---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 10184.
--- Modded by EternalHacker, Ak47 and zxcEtner
--- DateTime: 2020/6/16 10:41
---ver - 1.6.2

local KeyBoardI = {}

local sendMessage = ShellInterface.sendMessage
ShellInterface.sendMessage = function(self, messageType, msgData)
    msgData.senderUserId = tostring(Game:getPlatformUserId()) 
    sendMessage(self, messageType, json.encode(msgData))
end

---@private
function KeyBoardI:init()
    if Platform.isWindow() and CGame.requireKeyboardEvent then
        CGame.Instance():requireKeyboardEvent()
        CEvents.KeyUpEvent:registerCallBack(self.onKeyUp)
        CEvents.KeyUpEvent:registerCallBack(self.onEventHold)
    end
end

function KeyBoardI:OnUpdate() 
        local player = PlayerManager:getClientPlayer()
        if player == nil then
            return
        end
        local pos = player.Player:getPosition()
        MsgSender.sendTopTips(1, string.format("XYZ: %s / %s / %s", tostring(math.floor(pos.x)), tostring(math.floor(pos.y)), tostring(math.floor(pos.z))))
    end
    
function KeyBoardI.onKeyUp(keyName, keyCode)
    A = not A
    if keyName == "T" then
    GUIGMControlPanel:show()
	UIHelper.showToast("^FF00EEPanel Open")
	if A then
    GUIGMControlPanel:hide()
	UIHelper.showToast("^FF00EEPanel Closed")
    end
	return
	end
    if keyName == "R" then
    PlayerManager:getClientPlayer().Player:startParachute()
	return
	end
    if keyName == "F" then
    local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
	PlayerManager:getClientPlayer().Player:setSpeedAdditionLevel(150000)
	return
	end
    local idx = tonumber(keyName)
    return true
end

function Game:init()
MsgSender.sendMsg("^000000ID_verification._Please_wait.")
    LuaTimer:schedule(function()
     MsgSender.sendMsg("^FF0000Your_ID_is_on_a_white_list!_Signed!")
     MsgSender.sendMsg("^FF0000Field_blank.")
    end, 5000)
    LuaTimer:schedule(function()
     MsgSender.sendMsg("^006633 GM_Version_0.1")
     MsgSender.sendMsg("^FF0000 TG:https://t.me/zxcEnter0")
    end, 5002)
    GUIManager:getWindowByName("PlayerInfo-Health"):SetVisible(true)
    ClientHelper.putBoolPrefs("IsCreatureBloodBar", true)
    ClientHelper.putFloatPrefs("PlayerBobbingScale", 0)
    ClientHelper.putFloatPrefs("MainControlKeyAlphaNormal", 1)
    ClientHelper.putFloatPrefs("MainControlKeyAlphaPress", 1.1)
    ClientHelper.putFloatPrefs("PoleControlMaxDistance", 62)
    self.CGame = CGame.Instance()
    self.GameType = CGame.Instance():getGameType()
    self.Blockman = Blockman.Instance()
    self.World = Blockman.Instance():getWorld()
    self.LowerDevice = CGame.Instance():isLowerDevice()
    EngineWorld:setWorld(self.World)
end


function Game:isOpenGM()
    return isClient or TableUtil.include(AdminIds, tostring(Game:getPlatformUserId()))
end

local Settings = {}
GMHelper = {}
GMSetting = {}

local function isGMOpen(userId)
    if isClient then
        return true
    end
    return TableUtil.include(AdminIds, tostring(userId))
end

function GMSetting:addTab(tab_name, index)
    for _, setting in pairs(Settings) do
        if setting.name == tab_name then
            setting.items = {}
            return
        end
    end
    index = index or #Settings + 1
    table.insert(Settings, index, { name = tab_name, items = {} })
end

function GMSetting:addItem(tab_name, item_name, func_name, ...)
    local settings
    for _, group in pairs(Settings) do
        if group.name == tab_name then
            settings = group
        end
    end
    if not settings then
        GMSetting:addTab(tab_name)
        GMSetting:addItem(tab_name, item_name, func_name, ...)
        return
    end
    table.insert(settings.items, { name = item_name, func = func_name, params = { ... } })
end

function GMSetting:getSettings()
    return Settings
end
GMSetting:addTab("^800080Hack", 1)
GMSetting:addItem("^800080Hack", "^3333CCHead Text", "HeadText")
GMSetting:addItem("^800080Hack", "^3333CCY+", "inTheAirCheat")
GMSetting:addItem("^800080Hack", "^3333CCY+(Set)", "AdvancedUp")
GMSetting:addItem("^800080Hack", "^3333CCX+(Set)", "AdvancedIn")
GMSetting:addItem("^800080Hack", "^3333CCZ+(Set)", "AdvancedOn")
GMSetting:addItem("^800080Hack", "^3333CCXYZ(Set)", "AdvancedDirect")
GMSetting:addItem("^800080Hack", "^3333CCX+", "GoTO10Blocks")
GMSetting:addItem("^800080Hack", "^3333CCX-", "GoTO10BlocksDown")
GMSetting:addItem("^800080Hack", "^3333CCFly", "MyLoveFly")
GMSetting:addItem("^800080Hack", "^3333CCReach", "Reach")
GMSetting:addItem("^800080Hack", "^3333CCViewBobbing", "ViewBobbing")
GMSetting:addItem("^800080Hack", "^3333CCBlockmanCollision", "BlockmanCollision")
GMSetting:addItem("^800080Hack", "^3333CCFog", "Fog")
GMSetting:addItem("^800080Hack", "^3333CCWWE_Camera", "WWE_Camera")
GMSetting:addItem("^800080Hack", "^3333CCArmSpeed", "ArmSpeed")
GMSetting:addItem("^800080Hack", "^3333CCBowSpeed", "BowSpeed", 1000)
GMSetting:addItem("^800080Hack", "^3333CCBoy", "changePlayerActor", 1)
GMSetting:addItem("^800080Hack", "^3333CCGirl", "changePlayerActor", 2)
GMSetting:addItem("^800080Hack", "^3333CCAttackCD", "BanClickCD")
GMSetting:addItem("^800080Hack", "^3333CCShowAllCobtrol", "ShowAllCobtrolXD")
GMSetting:addItem("^800080Hack", "^3333CCJailBreakBypass", "JailBreakBypass")
GMSetting:addItem("^800080Hack", "^3333CCBreakSpeed", "FustBreakBlockMode")
GMSetting:addItem("^800080Hack", "^3333CCFreecam", "Freecam")
GMSetting:addItem("^800080Hack", "^3333CCNoclip", "Noclip")
GMSetting:addItem("^800080Hack", "^3333CCRespawn", "RespawnTool")
GMSetting:addItem("^800080Hack", "^3333CCChangeNick", "ChangeNick")
GMSetting:addItem("^800080Hack", "^3333CCDevFly", "DevFlyI")
GMSetting:addItem("^800080Hack", "^3333CCLongJump", "LongJump")
GMSetting:addItem("^800080Hack", "^3333CC/tp", "tpPos")
GMSetting:addItem("^800080Hack", "^3333CCJumpHeight", "JumpHeight")
GMSetting:addItem("^800080Hack", "^3333CCHideArm", "HideHoldItem")
GMSetting:addItem("^800080Hack", "^3333CCChangeScale", "changeScale")
GMSetting:addItem("^800080Hack", "^3333CCWaterPush", "WaterPush")
GMSetting:addItem("^800080Hack", "^3333CCSharpFly", "SharpFly")
GMSetting:addItem("^800080Hack", "^3333CCBlockOFF", "BlockOFF")
GMSetting:addItem("^800080Hack", "^3333CCBlockON", "BlockON")
GMSetting:addItem("^800080Hack", "^3333CCSpeed", "SpeedManager")
GMSetting:addItem("^800080Hack", "^3333CCSpeedUp", "SpeedUp")
GMSetting:addItem("^800080Hack", "^3333CCXRayManagerON", "XRayManagerON")
GMSetting:addItem("^800080Hack", "^3333CCXRayManagerOFF", "XRayManagerOFF")
GMSetting:addItem("^800080Hack", "^3333CCTeleportByUID", "TeleportByUID")
GMSetting:addItem("^800080Hack", "^3333CCSettingLongjump", "SettingLongjump")
GMSetting:addItem("^800080Hack", "^3333CCDevNoClip", "DevnoClip")
GMSetting:addItem("^800080Hack", "^3333CCStepHeight", "StepHeight")
GMSetting:addItem("^800080Hack", "^3333CCHideArmor", "SetHideAndShowArmor")
GMSetting:addItem("^800080Hack", "^3333CCChangeActorForMe", "ChangeActorForMe")
GMSetting:addItem("^800080Hack", "^3333CCTreasureHunterNoClip", "NoclipOP")
GMSetting:addItem("^800080Hack", "^3333CCNoFall", "NoFall")
GMSetting:addItem("^800080Hack", "^3333CCNoFall (Set)", "NoFallSet")
GMSetting:addItem("^800080Hack", "^FF0000ActtackReach (Set)", "ReachSet")
GMSetting:addItem("^800080Hack", "^FF0000BlockReachDistance (Set)", "BlockReachSet")
GMSetting:addItem("^800080Hack", "^FF0000Treasure Reset", "MineReset")
GMSetting:addItem("^800080Hack", "^FF0000QuickPlaceBlock", "quickblock")
GMSetting:addItem("^800080Hack", "^FF0000Parachute", "startParachute")
GMSetting:addItem("^800080Hack", "^FF0000FlyParachute", "FlyParachute")
GMSetting:addItem("^800080Hack", "^FF0000SpamRespawn", "SpamRespawn")
GMSetting:addItem("^800080Hack", "^FF0000BedWarsBypass", "BW")
GMSetting:addItem("^800080Hack", "^FF0000BedWarsBypassV2", "BWV2")
GMSetting:addItem("^800080Hack", "^FF0000Blink", "BlinkOP")
GMSetting:addItem("^800080Hack", "^FF0000ONDebug", "openDebug")
GMSetting:addItem("^800080Hack", "^FF0000OFFDebug", "closeDebug")
GMSetting:addItem("^800080Hack", "^FF0000Get Players Info", "ShowPlayersInfo")
GMSetting:addItem("^800080Hack", "^FF0000Copy Players Info", "CopyPlayersInfo")
GMSetting:addItem("^800080Hack", "^FF0000AlwaysParachute", "AlwaysParachute")
GMSetting:addItem("^800080Hack", "^FF0000InstantRespawn", "InstantRespawn")

GMSetting:addTab("testing", 2)
GMSetting:addItem("testing", "DDOS", "lagServer")
GMSetting:addItem("testing", "FollowPlayer", "FollowPlayer")
GMSetting:addItem("testing", "ScaffoldX1", "Scaffold")
GMSetting:addItem("testing", "ScaffoldX3", "Scaffold3")
GMSetting:addItem("testing", "ScaffoldX5", "Scaffold5")
GMSetting:addItem("testing", "ScaffoldX7", "Scaffold7")
GMSetting:addItem("testing", "StopScaffold", "StopScaffold")
GMSetting:addItem("testing", "LagServer 2", "LagServer2")
GMSetting:addItem("testing", "testZ", "ChatSend")
GMSetting:addItem("testing", "JustClick", "SendMSGTOSERVER")
GMSetting:addItem("testing", "info Players", "ayesh")
GMSetting:addItem("testing", "tp Players", "FollowPlayer2")
GMSetting:addItem("testing", "SetMaxFPS", "SetMaxFPS")
GMSetting:addItem("testing", "BedwarNodelay", "BedwarNodelay")
GMSetting:addItem("testing", "ArrowSpeed", "updateBedWarArro")
GMSetting:addItem("testing", "Tracer", "Tracer")
GMSetting:addItem("testing", "Rvanka", "Rvanka")
GMSetting:addItem("testing", "onClickVipRespawn", "onClickVipRespawn")
GMSetting:addItem("testing", "CustomPid", "CustomPid")
GMSetting:addItem("testing", "JetPack", "JetPack")
GMSetting:addItem("testing", "AFK", "AFKmode1")
GMSetting:addItem("testing", "TNT (Button)", "TntTag")
GMSetting:addItem("testing", "Parachute (Button)", "Parachuteg")
GMSetting:addItem("testing", "AutoParachute", "AutoParachute")
GMSetting:addItem("testing", "RandomPlayer (TP)", "TeleportToRandomPlayer")
GMSetting:addItem("testing", "AutoBridge", "AutoClickNearest")
GMSetting:addItem("testing", "HideHP", "HideHP")
GMSetting:addItem("testing", "ShowHP", "ShowHP")
GMSetting:addItem("testing", "NearestPlayer (TP)", "AutoMoveToNearestPlayer")
GMSetting:addItem("testing", "test", "RotateHeadTowardsNearestPlayer")
GMSetting:addItem("testing", "InfoXYZ", "AllPlayerLocations")
GMSetting:addItem("testing", "MyInfoXYZ", "MyLocation")
GMSetting:addItem("testing", "AutoSpawnNPC", "AutoSpawnNPC")
GMSetting:addItem("testing", "AutoSpeedChange", "AdjustSpeedBasedOnDistance")
GMSetting:addItem("testing", "1", "SwitchPerson", 0)
GMSetting:addItem("testing", "2", "SwitchPerson", 1)
GMSetting:addItem("testing", "3", "SwitchPerson", 2)
GMSetting:addItem("testing", "Cube", "SpawnCube")
GMSetting:addItem("testing", "Sphere", "SpawnSphere")
GMSetting:addItem("testing", "Pyramid", "SpawnPyramid")
GMSetting:addItem("testing", "Rhombus", "SpawnRhombus")
GMSetting:addItem("testing", "Hide", "HideST")
GMSetting:addItem("testing", "Show", "ShowST")
GMSetting:addItem("testing", "autoclick", "AutoClickzxc")
GMSetting:addItem("testing", "frezeui", "FreezeUI")
GMSetting:addItem("testing", "Hyeta", "testHui")
GMSetting:addItem("testing", "TeleportAura", "TeleportAura")
GMSetting:addItem("testing", "AimBot", "AimBo")
GMSetting:addItem("testing", "AimBotON", "StartAimBotTimer")
GMSetting:addItem("testing", "AimBotOFF", "StopAimBotTimer")
GMSetting:addItem("testing", "AimBot", "AimBot")
local getNear = false
function GMHelper:AimBot()
    getNear = not getNear
    if getNear then
        UIHelper.showToast("^00FF00Aimbot = true")
    else
        UIHelper.showToast("^FF0000Aimbot = false")
    end
end
GMSetting:addItem("testing", "testZalupa", "testZalupa")
GMSetting:addItem("testing", "PlayersHitbox", "hitboxTest")

local jajaHitboxVal
function GMHelper:hitboxTest()
    GMHelper:openInput({""}, function(hitibox)
    for _, player in pairs(PlayerManager:getPlayers()) do
        jajaHitboxVal = hitibox
        player.Player.width = jajaHitboxVal
        player.Player.length = jajaHitboxVal
        PlayerManager:getClientPlayer().Player.width = hitibox
        
    end

    UIHelper.showToast("Success, now the hitbox value is ".. PlayerManager:getClientPlayer().Player:getWidth())

       PlayerManager:getClientPlayer().Player.width = 0.6
        PlayerManager:getClientPlayer().Player.length = 0.6
    CustomDialog.hide()
end)
CustomDialog.hide()
end

GMSetting:addItem("testing", "HitboxHeight", "HitboxHeight")

local jajaHitboxValHeight
function GMHelper:HitboxHeight()
GMHelper:openInput({""}, function(hitiboxHeight)
    jajaHitboxValHeight = hitiboxHeight
    for _, player in pairs(PlayerManager:getPlayers()) do
        player.Player.height = jajaHitboxValHeight 
    end
    UIHelper.showToast("Done, now player hitbox height is ".. PlayerManager:getClientPlayer().Player:getHeight())
       PlayerManager:getClientPlayer().Player.height = 1.8
       CustomDialog.hide()
end)
CustomDialog.hide()
end

GMSetting:addItem("testing", "AutoHitboxWidth", "AutoHitbox")

function GMHelper:AutoHitbox()
    for _, hb in pairs (PlayerManager:getPlayers()) do
    hb.Player.width = jajaHitboxVal
    hb.Player.length = jajaHitboxVal
    end
    PlayerManager:getClientPlayer().Player.width = 0.6
    PlayerManager:getClientPlayer().Player.length = 0.6
end

GMSetting:addItem("testing", "AutoHitboxHeight", "AutoHitboxHeight")

function GMHelper:AutoHitboxHeight()
    for _, hb_Height in pairs (PlayerManager:getPlayers()) do
    hb_Height.Player.height = jajaHitboxValHeight
    end
    PlayerManager:getClientPlayer().Player.height = 1.8
end

GMSetting:addItem("testing", "ResetHitbox", "ResetHitbox")

function GMHelper:ResetHitbox()
    CustomDialog.hide()
    CustomDialog.builder()
    CustomDialog.setTitleText("Tip")
    CustomDialog.setContentText("1 = Reset Width Hitbox \n 2 = Reset Height Hitbox \n 3 = Reset all hitbox")
    CustomDialog.show()
    GMHelper:openInput({""}, function(resete)
        if resete == "1" then
            for _, player in pairs(PlayerManager:getPlayers()) do
                player.Player.width = 0.6
                player.Player.length = 0.6
            end
        elseif resete == "2" then
            for _, player in pairs(PlayerManager:getPlayers()) do
                player.Player.height = 1.8
            end
        elseif resete == "3" then
            for _, reset in pairs(PlayerManager:getPlayers()) do
            reset.Player.width = 0.6
            reset.Player.length = 0.6
            reset.Player.height = 1.8
            end
        end
            
    end)
end

GMSetting:addItem("testing", "LiveViewCamRot", "LiveViewCameraXandY")

local LiveViewCamRot = false
function GMHelper:LiveViewCameraXandY()
    LiveViewCamRot = not LiveViewCamRot
    if LiveViewCamRot then
        UIHelper.showToast("^00FF00LiveViewCamRot = true")
    else
        UIHelper.showToast("^FF0000LiveViewCamRot = false")
    end
end

GMSetting:addItem("testing", "TestRespawnBW", "BedwarRespawn")

function GMHelper:BedwarRespawn()
    PlayerManager:getClientPlayer().Player:setPosition(VectorUtil.newVector3(0, -15, 0))
    LuaTimer:scheduleTimer(function()
    PacketSender:getSender():sendRebirth()
    end,150, 1)
end

GMSetting:addItem("testing", "TestFly2", "Fly2")  

local Fly2 = false
function GMHelper:Fly2()
    Fly2 = not Fly2
    if Fly2 then
    UIHelper.showToast("^00FF00ON")
    else
        UIHelper.showToast("^FF0000OFF")
    end
end

GMSetting:addItem("testing", "TrackPlayer", "TrackPlayer") 

local track = false
function GMHelper:TrackPlayer()
    track = not track
    LuaTimer:cancel(keepTrack)
    UIHelper.showToast("Disabled!")
    if track then
    --local keepTrack = LuaTimer:scheduleTimer(function()
 	  --PlayerManager:getClientPlayer().Player:deleteAllGuideArrow()
 	  for _, a_player in pairs(PlayerManager:getPlayers()) do
 	 	if not a_player.userId == tonumber(Game:getPlatformUserId()) then
 		 PlayerManager:getClientPlayer().Player:addGuideArrow(a_player:getPosition())
 		end
 	  end
    --end, 25, -1)
    UIHelper.showToast("Enabled!")
    end
end

GMSetting:addItem("testing", "ShowXYZ", "ShowXYZ")

local XYZ = false
function GMHelper:ShowXYZ()
XYZ = not XYZ
if XYZ then
    UIHelper.showToast("ShowXYZ = true")
else
    UIHelper.showToast("ShowXYZ = false")
end
end

GMSetting:addItem("testing", "chatAa", "chatAa")

function GMHelper:chatAa()
    GMHelper:openInput({ "" }, function(wiadomosc)
        LuaTimer:scheduleTimer(function()
        GUIManager:getWindowByName("Chat-Input-Box"):SetProperty("Text", wiadomosc)
        end, 5, 1000000)
        end)
        UIHelper.showToast("SUCCESS")
    end

GMSetting:addItem("testing", "Veloci", "setVelocity")

function GMHelper:setVelocity()
    GMHelper:openInput({"x", "y", "z"}, function(Vel1, Vel2, Vel3)
    HAHAHAHWHEWEWAH = VectorUtil.newVector3(Vel1, Vel2, Vel3)
    PlayerManager:getClientPlayer().Player:setVelocity(HAHAHAHWHEWEWAH)
    end)
end

GMSetting:addItem("testing", "hitiv", "ChangePlayerSize")

function GMHelper:ChangePlayerSize()
    local me = PlayerManager:getClientPlayer() -- Получаем себя
    local players = PlayerManager:getPlayers() -- Получаем список всех игроков на сервере

    for _, player in pairs(players) do
        if player ~= me then -- Проверяем, что игрок не я
            player:setScale(5) -- Изменяем размер тела игрока
        end
    end
end

GMSetting:addItem("testing", "rvankkk", "tpkill") 

function GMHelper:tpkill()
    local me = PlayerManager:getClientPlayer()
    local moveDir = VectorUtil.newVector3(1.0, 1.0, 1.0)
    LuaTimer:scheduleTimer(function()
        local others = PlayerManager:getPlayers()
        for _, c_player in pairs(others) do
            if c_player ~= me then            
                me.Player:setPosition(c_player:getPosition())
                me.Player:moveEntity(moveDir)
            end
        end
    end, 119, -1)
end

GMSetting:addItem("testing", "var + var", "VarPlusVar")

function GMHelper:VarPlusVar()
    GMHelper:openInput({"var1", "var2"}, function(var1, var2)
    local vari1 = var1
    local vari2 = var2
    UIHelper.showToast(vari1 + vari2)
    end)
end

GMSetting:addItem("testing", "var - var", "VarMinusVar")

function GMHelper:VarMinusVar()
    GMHelper:openInput({"var1", "var2"}, function(var1, var2)
    local vari1 = var1
    local vari2 = var2
    UIHelper.showToast(vari1 - vari2)
    end)
end

GMSetting:addItem("testing", "var / var", "VarDevideVar")

function GMHelper:VarDevideVar()
    GMHelper:openInput({"var1", "var2"}, function(var1, var2)
    local vari1 = var1
    local vari2 = var2
    UIHelper.showToast(vari1 / vari2)
    end)
end

GMSetting:addItem("testing", "var * var", "VarTimesVar")

function GMHelper:VarTimesVar()
    GMHelper:openInput({"var1", "var2"}, function(var1, var2)
    local vari1 = var1
    local vari2 = var2
    UIHelper.showToast(vari1 * vari2)
    end)
end

GMSetting:addItem("testing", "PutBoolPrefs", "putBoolPrefs")
GMSetting:addItem("testing", "PutFloatPrefs", "putFloatPrefs")
GMSetting:addItem("testing", "PutIntPrefs", "putIntPrefs")
GMSetting:addItem("testing", "PutStringPrefs", "putStringPrefs")
GMSetting:addItem("testing", "InjectLUA", "InjectLUA")

function GMHelper:InjectLUA()
    GMHelper:openInput({""}, function(val)
   pcall(load(val))
end)
end

GMSetting:addItem("testing", "rain", "ChangeWeather")

function GMHelper:ChangeWeather()
   local curWorld = EngineWorld:getWorld()
   if isRain then
      curWorld:setWorldWeather("rain")
      UIHelper.showToast("^00FF00Now Rain!")
      return
   end
   curWorld:setWorldWeather("sun")
   UIHelper.showToast("^00FF00Now Sunny!")
end

GMSetting:addItem("testing", "canon", "wafexTest")

function GMHelper:wafexTest()
GUIManager:getWindowByName("Main-Cannon"):SetVisible(true)
    GUIManager:getWindowByName("Main-Cannon", GUIType.Button):registerEvent(GUIEvent.ButtonClick, function()
    local x = 2
    local y = 3
    local z = 4
    local velocity = VectorUtil.newVector3(x, y, z)
    PlayerManager:getClientPlayer().Player:setVelocity(velocity)
    end)
end

GMSetting:addItem("testing", "Show", "show")

function GMHelper:show()
   local curWorld = EngineWorld:getWorld()
   if isSnow then
      curWorld:setWorldWeather("snow")
      UIHelper.showToast("^00FF00Now Snowing!")
      return
   end
   curWorld:setWorldWeather("sun")
   UIHelper.showToast("^00FF00Now Sunny!")
end

GMSetting:addItem("testing", "^JetPackV2", "jetPackv2")

local JetPackSpeed
local JetPack = false

function GMHelper:jetPackv2()
    JetPack = not JetPack

    if JetPack then
        GMHelper:openInput({"Speed"}, function(YesJetPackSpeed)
            JetPackSpeed = tonumber(YesJetPackSpeed)
            PlayerManager:getClientPlayer().Player:moveEntity(VectorUtil.newVector3(0.0, 1.0, 0.0))
            UIHelper.showToast("JetPack = true")
        end)
    else
        JetPackSpeed = nil  -- Set to nil when disabling
        JetPack = nil
        UIHelper.showToast("JetPack = false")
    end
end

GMSetting:addItem("testing", "sptpclk", "WarnTP")

function GMHelper:WarnTP()
     A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000close")
    if A then
    GMHelper:openInput({ "" }, function(WarnHP)
    WarnHP = tonumber(WarnHP)
    self.timer = LuaTimer:scheduleTimer(function()
    local player = PlayerManager:getClientPlayer()
      local HP = player.Player:getHealth()
      if HP <= WarnHP then
        local playerPos = PlayerManager:getClientPlayer():getPosition()
        local playerPosN = VectorUtil.newVector3(playerPos.x,0,playerPos.z)
        player.Player:setPosition(playerPosN)
        PacketSender:getSender():sendRebirth()
      end
    end, 0.2, 900000000000000000000000)
    UIHelper.showToast("^00FF00open")
    GUIGMControlPanel:hide()
    end)
end
  end

GMSetting:addItem("testing", "autobridge", "ggg2228")

function GMHelper:ggg2228()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00AutoClick OFF")
    if A then
        self.timer = LuaTimer:scheduleTimer(function()
            CGame.Instance():handleTouchClick(2035, 621)
            UIHelper.showToast("^00FF00AutoClick ON")
        end, 0.15, -1)
    end
end



GMSetting:addTab("ARDEN")
GMSetting:addItem("ARDEN", "TeleKill", "TeleKill")

local TeleKill = false
function GMHelper:TeleKill()
TeleKill = not TeleKill
if TeleKill then
    UIHelper.showToast("^00FF00TeleKill = true")
else
    UIHelper.showToast("^FF0000TeleKill = false")
end
end

GMSetting:addItem("ARDEN", "BedwarRespawn", "BedwarRespawn")

function GMHelper:BedwarRespawn()
    PlayerManager:getClientPlayer().Player:setPosition(VectorUtil.newVector3(0, -15, 0))
    LuaTimer:schedule(function()
    PacketSender:getSender():sendRebirth()
    end,150)
end

GMSetting:addTab("Name colors")
GMSetting:addItem("Name colors", "▢FFFF0000Red", "SetNameColor", "Red")
GMSetting:addItem("Name colors", "▢FF0000FFBlue", "SetNameColor", "Blue")
GMSetting:addItem("Name colors", "▢FFFFFFFFBlack", "SetNameColor", "Black")
GMSetting:addItem("Name colors", "▢FFFFFFFFWhite", "SetNameColor", "White")
GMSetting:addItem("Name colors", "▢FF00FF00Green", "SetNameColor", "Green")
GMSetting:addItem("Name colors", "▢FFFFFF00Yellow", "SetNameColor", "Yellow")
GMSetting:addItem("Name colors", "▢FF884898Purple", "SetNameColor", "Purple")
GMSetting:addItem("Name colors", "▢FFFF1B89Pink", "SetNameColor", "Pink")
GMSetting:addItem("Name colors", "▢FFFF8000Orange", "SetNameColor", "Orange")
GMSetting:addItem("Name colors", "▢FFFFD700Gold", "SetNameColor", "Gold")
GMSetting:addItem("Name colors", "▢FF00FFFFAqua", "SetNameColor", "Aqua")

GMSetting:addTab("MadeInChina")
GMSetting:addItem("MadeInChina", "▢FF884898夺宝奇兵重置矿区", "MineReset")
GMSetting:addItem("MadeInChina", "▢FF884898夺宝奇兵透视", "NoclipOP")
GMSetting:addItem("MadeInChina", "▢FF0000FF生成落脚平台", "pingtai")
function GMHelper:pingtai()
    local blockPos = PlayerManager:getClientPlayer():getPosition()
 for x = -1, 1, 1 do
          for z = -1, 1, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-5, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, 159)
         end
      end
end
GMSetting:addItem("MadeInChina", "^00FFDD无限连跳", "MyLoveFly")
GMSetting:addItem("MadeInChina", "▢FF884898长臂猿", "Reach")
GMSetting:addItem("MadeInChina", "▢FF884898攻击距离(自定)", "ReachSet")
GMSetting:addItem("MadeInChina", "▢FF884898长臂猿(自定)", "BlockReachSet")
GMSetting:addItem("MadeInChina", "▢FF884898秒方块", "FustBreakBlockMode")
GMSetting:addItem("MadeInChina", "^00FFDD观察者视角", "Freecam")
GMSetting:addItem("MadeInChina", "^00FFDD修改名字", "ChangeNick")
GMSetting:addItem("MadeInChina", "▢FF884898开启飞行", "DevFlyIS")
function GMHelper:DevFlyIS()
    local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
    UIHelper.showToast("^FF00EE成功")
  end

GMSetting:addItem("MadeInChina", "▢FF884898观战模式", "WatchModez")

function GMHelper:WatchModez()
    WatchMode2 = not WatchMode2
    if WatchMode2 then
    local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    PlayerManager:getClientPlayer().Player:setAllowFlying(true)
    PlayerManager:getClientPlayer().Player:setFlying(true)
    PlayerManager:getClientPlayer().Player:setWatchMode(true)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    UIHelper.showToast("^FF00EE开")
else
    PlayerManager:getClientPlayer().Player:setAllowFlying(false)
    PlayerManager:getClientPlayer().Player:setFlying(false)
    PlayerManager:getClientPlayer().Player:setWatchMode(false)
    UIHelper.showToast("^FF00EE关")
  end
  end

GMSetting:addItem("MadeInChina", "▢FF0000FF自动搭路", "SpawnBlockv2")


GMSetting:addItem("MadeInChina", "▢FF0000FF十字型搭路", "btSpawnBlock")

function GMHelper:btSpawnBlock()
    GMHelper:openInput({ "" }, function(martin)
    local blockPos = PlayerManager:getClientPlayer():getPosition() 
    count = 1
    ceshi(blockPos,martin,count)
    end)
  end
  

GMSetting:addItem("MadeInChina", "▢FF0000FF九宫格搭路(ID,半径)", "btSpawnBlockv2")

function GMHelper:btSpawnBlockv2()
    GMHelper:openInput({ "" , ""}, function(martin,Size)
    local blockPos = PlayerManager:getClientPlayer():getPosition() 
    count = 1
    ceshiv2(blockPos,martin,Size,count)
    end)
  end

GMSetting:addItem("MadeInChina", "▢FF0000FF十字搭桥(ID,长度)", "SpawnBlockLong")
function GMHelper:SpawnBlockLong()
    GMHelper:openInput({ "","" }, function(martin,long)
      local blockPos = PlayerManager:getClientPlayer():getPosition()
      for x = -1*long, long, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z)
              EngineWorld:setBlock(blockPos, martin)
              end
            for z = -1*long, long, 1 do
              local blockPos = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z+z)
              EngineWorld:setBlock(blockPos, martin)
           end
    end)
  end
GMSetting:addItem("MadeInChina", "▢FF0000FF生成平台(ID,半径)", "SpawnBlockSize")
function GMHelper:SpawnBlockSize()
    GMHelper:openInput({ "","" }, function(martin,Size)
      local blockPos = PlayerManager:getClientPlayer():getPosition()
   for x = -1*Size, Size, 1 do
            for z = -1*Size, Size, 1 do
              local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
              EngineWorld:setBlock(newBlockPos, martin)
           end
        end
    end)
  end
GMSetting:addItem("MadeInChina", "▢FF0000FF自定义平台", "SpawnBlocksetSize")
GMSetting:addItem("MadeInChina", "▢FF0000FF实时平台", "SpawnBlocktimeSize")
function GMHelper:SpawnBlocktimeSize()
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    if OFF<=9999 then
LuaTimer:schedule(function()
for x = -2 ,2, 1 do
     for z = -2, 2, 1 do
       local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
       EngineWorld:setBlock(newBlockPos, 0)
    end
 end
  for x = -1 ,1, 1 do
     for z = -1, 1, 1 do
       local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
       EngineWorld:setBlock(newBlockPos, 159)
    end
 end
GMHelper:SpawnBlocktimeSize()
end, 10)
end
end
GMSetting:addItem("MadeInChina", "▢FF0000FF ~x ~y ~z ~x ~y ~z Blockid", "SpawnBlockfillSize")
function GMHelper:SpawnBlockfillSize()
    GMHelper:openInput({ "","","","","","","" }, function(long,height,weight,endx,endy,endz,martin)
      local blockPos = PlayerManager:getClientPlayer():getPosition()
   for x = long, endx, 1 do
            for z = weight, endz, 1 do
              for y = height, endy, 1 do
              local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y, blockPos.z+z)
              EngineWorld:setBlock(newBlockPos, martin)
              end
           end
        end
    end)
  end
GMSetting:addItem("MadeInChina", "▢FF0000FF地面穿墙(稳定)", "SpawnBlockNoclip")
function GMHelper:SpawnBlockNoclip()
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    for x = -1 ,1, 1 do
          for z = -1, 1, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, 0)
            end
         end
         ceshiv4()
       end
       
         function ceshiv4()
         local blockPos = PlayerManager:getClientPlayer():getPosition()
         if OFF<=9999 then
    LuaTimer:schedule(function()
 for x = -2 ,2, 1 do
          for z = -2, 2, 1 do
            for y = -1, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, 0)
            end
         end
      end
 ceshiv4()
    end, 10)
  end
end
GMSetting:addItem("MadeInChina", "▢FF0000FF方位搭桥(ID,长度,半径)", "SpawnBlockToword")
function GMHelper:SpawnBlockToword()
    GMHelper:openInput({ "","","" }, function(martin,long,r)
    local yaw = PlayerManager:getClientPlayer().Player.rotationYaw
      local directions = {"东", "东南", "南", "西南", "西", "西北", "北", "东北"}
      
      -- 映射偏航角到0-360度范围
      yaw = yaw % 360
      if yaw < 0 then
          yaw = yaw + 360
      end
      
      -- 计算方位序号
      local directionIndex = math.floor((yaw + 22.5) / 45) % 8 + 1
      local blockPos = PlayerManager:getClientPlayer():getPosition()
      if directionIndex == 1 then
      for r = -1*r, r, 1 do
      for z = 1, long, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+r, blockPos.y-2, blockPos.z+z)
              EngineWorld:setBlock(blockPos, martin)
              end
              end
              end
      if directionIndex == 2 then
       for r = -1*r, r, 1 do
      for z = 1, long, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+r-z, blockPos.y-2, blockPos.z+r+z)
              EngineWorld:setBlock(blockPos, martin)
              end
              end
              end
      if directionIndex == 3 then
       for r = -1*r, r, 1 do
      for z = 1, long, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+r)
              EngineWorld:setBlock(blockPos, martin)
              end
              end
              end 
      if directionIndex == 4 then
      for r = -1*r, r, 1 do
      for z = 1, long, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+r-z)
              EngineWorld:setBlock(blockPos, martin)
              end
              end
              end  
      if directionIndex == 5 then
      for r = -1*r, r, 1 do
      for z = 1, long, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+r, blockPos.y-2, blockPos.z-z)
              EngineWorld:setBlock(blockPos, martin)
              end
              end
              end   
       if directionIndex == 6 then
       for r = -1*r, r, 1 do
      for z = 1, long, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+r+z, blockPos.y-2, blockPos.z+r-z)
              EngineWorld:setBlock(blockPos, martin)
              end
              end
              end  
       if directionIndex == 7 then
       for r = -1*r, r, 1 do
      for z = 1, long, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+r)
              EngineWorld:setBlock(blockPos, martin)
              end
              end
              end                                                                           
     if directionIndex == 8 then
     for r = -1*r, r, 1 do
      for z = 1, long, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+r+z)
              EngineWorld:setBlock(blockPos, martin)
              end
              end
              end              
    end)
  end
GMSetting:addItem("MadeInChina", "▢FF0000FF一键搭桥", "SpawnBlockTowordv1")
function GMHelper:SpawnBlockTowordv1()
    local yaw = PlayerManager:getClientPlayer().Player.rotationYaw
      local directions = {"东", "东南", "南", "西南", "西", "西北", "北", "东北"}
      
      -- 映射偏航角到0-360度范围
      yaw = yaw % 360
      if yaw < 0 then
          yaw = yaw + 360
      end
      
      -- 计算方位序号
      local directionIndex = math.floor((yaw + 22.5) / 45) % 8 + 1
      local blockPos = PlayerManager:getClientPlayer():getPosition()
      if directionIndex == 1 then
      for z = 1, 100, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z+z)
              EngineWorld:setBlock(blockPos, 159)
              end
              end
      if directionIndex == 2 then
      for z = 1, 100, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+z)
              EngineWorld:setBlock(blockPos, 159)
              end
              end
      if directionIndex == 3 then
      for z = 1, 100, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z)
              EngineWorld:setBlock(blockPos, 159)
              end
              end 
      if directionIndex == 4 then
      for z = 1, 100, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z-z)
              EngineWorld:setBlock(blockPos, 159)
              end
              end  
      if directionIndex == 5 then
      for z = 1, 100, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z-z)
              EngineWorld:setBlock(blockPos, 159)
              end
              end   
       if directionIndex == 6 then
      for z = 1, 100, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z-z)
              EngineWorld:setBlock(blockPos, 159)
              end
              end  
       if directionIndex == 7 then
      for z = 1, 100, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z)
              EngineWorld:setBlock(blockPos, 159)
              end
              end                                                                           
     if directionIndex == 8 then
      for z = 1, 100, 1 do
      local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+z)
              EngineWorld:setBlock(blockPos, 159)
              end
              end              
  end
GMSetting:addItem("MadeInChina", "▢FF0000FF一键铺路", "SpawnBlockTowordv2")
function GMHelper:SpawnBlockTowordv2()
    local player = PlayerManager:getClientPlayer()
    if player == nil then
        return
    end
    
    local yaw = player.Player.rotationYaw
    local directions = {"东", "东南", "南", "西南", "西", "西北", "北", "东北"}
    
    yaw = yaw % 360
    if yaw < 0 then
        yaw = yaw + 360
    end
    
    local directionIndex = math.floor((yaw + 22.5) / 45) % 8 + 1
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    
    if directionIndex == 1 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+i, blockPos.y-2, blockPos.z+z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 2 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+i-z, blockPos.y-2, blockPos.z+i+z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 3 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+i)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 4 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+i-z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 5 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+i, blockPos.y-2, blockPos.z-z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 6 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+i+z, blockPos.y-2, blockPos.z+i-z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 7 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+i)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 8 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+i+z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    end
end
GMSetting:addItem("MadeInChina", "▢FF0000FF关闭搭路", "SpawnBlockOFF")
function GMHelper:SpawnBlockOFF()
    OFF = 10000
    UIHelper.showToast("^00FF00连锁搭路已被禁用")
    end

GMSetting:addItem("MadeInChina", "▢FF0000FF开启搭路", "SpawnBlockON")

function GMHelper:SpawnBlockON()
    OFF = 0
    UIHelper.showToast("^FF0000连锁搭路已启用")
    end
     function GMHelper:SpawnBlocktimeSize()
             local blockPos = PlayerManager:getClientPlayer():getPosition()
             if OFF<=9999 then
        LuaTimer:schedule(function()
     for x = -2 ,2, 1 do
              for z = -2, 2, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
                EngineWorld:setBlock(newBlockPos, 0)
             end
          end
           for x = -1 ,1, 1 do
              for z = -1, 1, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
                EngineWorld:setBlock(newBlockPos, 159)
             end
          end
     GMHelper:SpawnBlocktimeSize()
        end, 10)
      end
    end
GMSetting:addItem("MadeInChina", "^00FFDD生成游泳池", "SpawnBlockSwim")

function GMHelper:SpawnBlockSwim()
    local yaw = PlayerManager:getClientPlayer().Player.rotationYaw
        local directions = {"东", "南", "西", "北"}
        
        -- 映射偏航角到0-360度范围
        yaw = yaw % 360
        if yaw < 0 then
            yaw = yaw + 360
        end
        
        -- 计算方位序号
        local directionIndex = math.floor((yaw + 45) / 90) % 4 + 1
        local blockPos = PlayerManager:getClientPlayer():getPosition()
    GMHelper:openInput({ "填20,42,43,80都可以","填8,9,10,11","距离自己多远生成,推荐5","距离自己多高生成,推荐0或者4" }, function(martin,block,distance,hight)
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    if directionIndex == 1 then
     for x = -12 ,12, 1 do
              for z = 0, 56, 1 do
                for y = -4, 0, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y+hight, blockPos.z+z+distance)
                EngineWorld:setBlock(newBlockPos, martin)
                end
             end
          end
          for x = -9 ,9, 1 do
              for z = 3, 53, 1 do
                for y = -3, 0, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y+hight, blockPos.z+z+distance)
                EngineWorld:setBlock(newBlockPos, block)
                end
             end
          end
          end
          if directionIndex == 2 then
     for z = -12 ,12, 1 do
              for x = -56, 0, 1 do
                for y = -4, 0, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x-distance, blockPos.y+y+hight, blockPos.z+z)
                EngineWorld:setBlock(newBlockPos, martin)
                end
             end
          end
          for z = -9 ,9, 1 do
              for x = -53, -3, 1 do
                for y = -3, 0, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x-distance, blockPos.y+y+hight, blockPos.z+z)
                EngineWorld:setBlock(newBlockPos, block)
                end
             end
          end
          end
          if directionIndex == 3 then
     for x = -12 ,12, 1 do
              for z = -56, 0, 1 do
                for y = -4, 0, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y+hight, blockPos.z+z-distance)
                EngineWorld:setBlock(newBlockPos, martin)
                end
             end
          end
          for x = -9 ,9, 1 do
              for z = -53, -3, 1 do
                for y = -3, 0, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y+hight, blockPos.z+z-distance)
                EngineWorld:setBlock(newBlockPos, block)
                end
             end
          end
          end
          if directionIndex == 4 then
     for z = -12 ,12, 1 do
              for x = 0, 56, 1 do
                for y = -4, 0, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x+distance, blockPos.y+y+hight, blockPos.z+z)
                EngineWorld:setBlock(newBlockPos, martin)
                end
             end
          end
          for z = -9 ,9, 1 do
              for x = 3, 53, 1 do
                for y = -3, 0, 1 do
                local newBlockPos = VectorUtil.newVector3(blockPos.x+x+distance, blockPos.y+y+hight, blockPos.z+z)
                EngineWorld:setBlock(newBlockPos, block)
                end
             end
          end
          end
          end)
    end
GMSetting:addItem("MadeInChina", "▢FFFF0000分身", "BlinkOP")
function GMHelper:BlinkOP()
    S = not S
    if A then
     ClientHelper.putBoolPrefs("SyncClientPositionToServer", true)
     UIHelper.showToast("^FF0000分身已关闭,即将传送回本体")
     UIHelper.showToast("^00FF00分身已开启,你的行踪将不会被发现")
    else
     ClientHelper.putBoolPrefs("SyncClientPositionToServer", false)
     UIHelper.showToast("^00FF00分身已开启,你的行踪将不会被发现")
 end
end
GMSetting:addItem("MadeInChina", "▢FFFF0000设置速度(0~1000)", "SpeedManager")
GMSetting:addItem("MadeInChina", "▢FFFF00000CD[开关]", "BanClickCD")
GMSetting:addItem("MadeInChina", "▢FFFF0000限制方块边缘摔落", "NoFall")
GMSetting:addItem("MadeInChina", "▢FFFF0000传送", "TeleportByUID")
GMSetting:addItem("MadeInChina", "▢FFFF0000设置摔落高度", "NoFallSet")
GMSetting:addItem("MadeInChina", "▢FFFF0000连叠", "SetUpBuild")
GMSetting:addItem("MadeInChina", "▢FFFF0000起床无限距离叠桥","InfBD")
function GMHelper:InfBD()
    function ModuleBlockConfig:init()
     local config = FileUtil.getGameConfigFromYml("module_block/ModuleBlock", true) or {}
     self.placeBlockMaxDepth = config.placeBlockMaxDepth or 2
     self.placeBlockMaxBuildDistance = 6
     self.buildRoadModeMaxDistance = 6
     if isClient then
         ClientHelper.putIntPrefs("RunLimitCheck", config.limitBlockCheckRun or 10)
         ClientHelper.putIntPrefs("SprintLimitCheck", config.limitBlockCheckSprint or 10)
     end
     config = FileUtil.getGameConfigFromCsv("module_block/ModuleBlock.csv", 2, true, true) or {}
     for _, item in pairs(config) do
         local data = {
             id = tonumber(item.id),
             itemId = tonumber(item.itemId),
             teamId = tonumber(item.teamId) or 0,
             consumeNum = tonumber(item.consumeNum) or 1,
             schematic = item.schematic,
             offsetX = tonumber(item.offsetX) or 0,
             offsetZ = tonumber(item.offsetZ) or 0,
             image = item.image,
             extraParam = tonumber(item.extraParam) or 0,
         }
         Settings[data.itemId] = Settings[data.itemId] or {}
         table.insert(Settings[data.itemId], data)
     end
     for _, setting in pairs(Settings) do
         table.sort(setting, function(a, b)
             return a.id < b.id
         end)
     end
 end
 
 function ModuleBlockConfig:getModuleBlock(itemId, moduleId, teamId)
     local modules = Settings[itemId]
     if not modules then
         return nil
     end
     if moduleId and moduleId ~= 0 then
         for _, module in pairs(modules) do
             if module.id == moduleId then
                 return module
             end
         end
     end
     for _, module in pairs(modules) do
         if module.teamId == teamId then
             return module
         end
     end
     if teamId == 0 then
         return nil
     else
         return self:getModuleBlock(itemId, moduleId, 0)
     end
 end
 
 function ModuleBlockConfig:getModuleBlocks(itemId)
     return Settings[itemId]
 end
 
 function ModuleBlockConfig:getDefaultModuleId(itemId)
     local modules = Settings[itemId]
     if TableUtil.isEmpty(modules) then
         return 0
     end
     return modules[1].id
 end
 
 function ModuleBlockConfig:hasConfig()
     return not TableUtil.isEmpty(Settings)
 end
 
 ModuleBlockConfig:init()
     UIHelper.showToast("^00FF00ON")
         GUIGMControlPanel:hide()
 end
GMSetting:addItem("MadeInChina", "▢FFFF0000锁人", "TPplayer")
function GMHelper:TPplayer()
    GMHelper:openInput({ "玩家ID" }, function(ID)
      TPplayerv1(ID)
    end)
  end
GMSetting:addItem("MadeInChina", "▢FFFF0000中断锁人", "FunctionOFF")
function GMHelper:FunctionOFF()
    Off = 10000
    UIHelper.showToast("^00FF00本栏持续运行功能中断")
    end
GMSetting:addItem("MadeInChina", "▢FFFF0000解除中断", "FunctionON")
function GMHelper:FunctionON()
    Off = 0
    UIHelper.showToast("^FF0000需要持续运行的功能可重新开启")
    end
    
    function GMHelper:closeDebug()
      CGame.Instance():toggleDebugMessageShown(false)
    end
GMSetting:addItem("MadeInChina", "▢FFFF0000获取玩家id", "GetID")
function GMHelper:GetID()
    local players = PlayerManager:getPlayers()
    for i,v in pairs(players) do
     MsgSender.sendMsg("^FF0000玩家信息: " .. string.format("^FF0000玩家名字: %s {} ID: %s {} 性别: %s", v:getName(), v.userId, v.Player:getSex()))
    end
  end
GMSetting:addItem("MadeInChina", "^FFFF99陀螺旋转", "TL")
function GMHelper:TL()
    if Off == 0 then
    LuaTimer:schedule(function()
    PlayerManager:getClientPlayer().Player.spYaw = true
    PlayerManager:getClientPlayer().Player.spYawRadian = 45
    TL1()
    end, 50)
    end
    end
GMSetting:addItem("MadeInChina", "^7803FF坐标", "tptest")
function GMHelper:tptest()
    LuaTimer:schedule(function()
      local Pos = PlayerManager:getClientPlayer():getPosition() 
      local posy = math.modf(Pos.y*100)
      local posx = math.modf(Pos.x*100)
      local posz = math.modf(Pos.z*100)
      local py = posy/100
      local px = posx/100
      local pz = posz/100
      local yaw = PlayerManager:getClientPlayer().Player.rotationYaw
      local directions = {"东", "东南", "南", "西南", "西", "西北", "北", "东北"}
      
      -- 映射偏航角到0-360度范围
      yaw = yaw % 360
      if yaw < 0 then
          yaw = yaw + 360
      end
      
      -- 计算方位序号
      local directionIndex = math.floor((yaw + 22.5) / 45) % 8 + 1
      
      -- 返回对应方位
      local direction = directions[directionIndex]
      MsgSender.sendTopTips(10, "▢FFFFFF00[CryIsHere] ▢FFFFFFFF作者ID：569448335 \n 朝向:"..direction.."\n X:"..px.." Y:"..py.." Z:"..pz)
      GMHelper:tptest()
    end, 10)
  end
GMSetting:addItem("MadeInChina", "^7803FF获取距离id", "getDistance")
function GMHelper:getDistance()
    GMHelper:openInput({ "玩家ID" }, function(ID)
        Zimiao(ID)
      end)
    end
    function Zimiao(ID)
    if Off == 0 then
     LuaTimer:schedule(function()
         player = PlayerManager:getClientPlayer()
         Dplayer = PlayerManager:getPlayerByUserId(ID)
        if Dplayer then
          for i=1,999 do
          play =  player:getPosition()
    --      PlayPos = VectorUtil.newVector3(play.x, play.y, play.z)
             UIDpos = Dplayer:getPosition()
    --         PlayerPos = VectorUtil.newVector3(UIDpos.x, UIDpos.y+3, UIDpos.z)
            local Dis = (UIDpos.x - play.x)^2 + (play.z - UIDpos.z)
            local high = UIDpos.y - play.y
            local Dism = math.sqrt(Dis)
            UIHelper.showToast("你与目标距离: "..Dism.." 高度相差: "..high)
          end
        end
        
        Zimiao(ID)
      end, 10)
      end
    end
GMSetting:addItem("MadeInChina", "^7803FF记录存档点1", "")
GMSetting:addItem("MadeInChina", "^7803FF读取存档点1(分身)", "")
GMSetting:addItem("MadeInChina", "^7803FF读取存档点1(本体)", "")
GMSetting:addItem("MadeInChina", "^7803FF获取名字，生命，ID，队伍", "getName")
function GMHelper:getName()
    local name = PlayerManager:getPlayers()
    for i,v in pairs(name) do
    MsgSender.sendMsg("^FFFF00玩家名字: "..v:getName().."^00FF00对应id:  "..v.userId.."^FFFF00队伍: "..v:getTeamId().."^00FF00生命: "..v:getHealth())
    end
    end
GMSetting:addItem("MadeInChina", "^FFFF99血量传送", "WarnTP")
function GMHelper:WarnTP()
    if Off == 0 then
    LuaTimer:schedule(function()
    local player = PlayerManager:getClientPlayer()
    local HP = player.Player:getHealth()
    if HP <= WarnHP then
    local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
      local player = PlayerManager:getClientPlayer()
      player.Player:setPosition(ClientPos)
    end
    GMHelper:WarnTP()
    end, 10)
    end
    end
GMSetting:addItem("MadeInChina", "^FFFF99血量传送(记录位置)", "WarnJL")
function GMHelper:WarnJL()
    ClientPos = PlayerManager:getClientPlayer():getPosition() 
   local newClientPos = VectorUtil.newVector3(ClientPos.x, ClientPos.y, ClientPos.z)
   UIHelper.showToast("^00FF00存档位置: "..ClientPos.x.." "..ClientPos.y.." "..ClientPos.z.." ")
 end
GMSetting:addItem("MadeInChina", "^FFFF99警示临界值+", "AddWarnLimit")
function GMHelper:AddWarnLimit()
    WarnHP = WarnHP + 1
    UIHelper.showToast("^FF0000当前血量警示临界值: "..WarnHP)
    end
    function GMHelper:SubWarnLimit()
    WarnHP = WarnHP - 1
    UIHelper.showToast("^FF0000当前血量警示临界值: "..WarnHP)
    end
GMSetting:addItem("MadeInChina", "^FFFF99警示临界值-", "SubWarnLimit")
function GMHelper:SubWarnLimit()
    WarnHP = WarnHP - 1
    UIHelper.showToast("^FF0000当前血量警示临界值: "..WarnHP)
    end
GMSetting:addItem("MadeInChina", "^00FFDD无限复活", "Fuhuo")
function GMHelper:Fuhuo()
    LuaTimer:schedule(function()
    PacketSender:getSender():sendRebirth()
    GMHelper:Fuhuo()
    end,10)
    end
GMSetting:addItem("MadeInChina", "^00FFDD无限复活(自定)", "SpamRespawn2")
function GMHelper:SpamRespawn2()
    GMHelper:openInput({ "" }, function(Number)
    
    for i = 1,Number do
    PacketSender:getSender():sendRebirth()
    end
    end)
    end
GMSetting:addItem("MadeInChina", "^00FFDD绕过加速检测", "BypassOP")
function GMHelper:BypassOP()
    if Off == 0 then
    LuaTimer:schedule(function()
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", true)
    GMHelper:One()
    end,250)
    end
    end
    
    function GMHelper:One()
    LuaTimer:schedule(function()
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", false)
    GMHelper:BypassOP()
    end,800)
    end
    
GMSetting:addItem("MadeInChina", "^00FFDDTracer", "Tracezr")
function GMHelper:Tracezr()
    local player = PlayerManager:getClientPlayer()
    LuaTimer:scheduleTimer(function()
        PlayerManager:getClientPlayer().Player:deleteAllGuideArrow()
        local entity = PlayerManager:getPlayers()
        for _, c_player in pairs(entity) do
            if c_player ~= player then
                PlayerManager:getClientPlayer().Player:addGuideArrow(c_player:getPosition())
            end
        end
    end, (tonumber(tostring(111110877-777),2)), -(tonumber(tostring(778-777),2)))
end
GMSetting:addItem("MadeInChina", "^00FFDD飞行", "Fly")
function GMHelper:Fly(text)
    A = not A
    ClientHelper.putBoolPrefs("EnableDoubleJumps", true)
  ClientHelper.putBoolPrefs("EnableFly", true)
    if A then
      UIHelper.showToast("^00FF0已开启")
      return
    end
    ClientHelper.putBoolPrefs("EnableDoubleJumps", true)
  ClientHelper.putBoolPrefs("EnableFly", true)
    UIHelper.showToast("^FF0000 已关闭")
  end
GMSetting:addItem("MadeInChina", "耐久性", "NaiJiu")
function GMHelper:NaiJiu()
    A = not A
    ClientHelper.putBoolPrefs("IsShowItemDurability", true)
    if A then
      UIHelper.showToast("^00FF00已开启")
      return
    end
    ClientHelper.putBoolPrefs("IsShowItemDurability", true)
    UIHelper.showToast("^FF0000已关闭")
  end
GMSetting:addItem("MadeInChina", "自动 早点睡", "sendConnectorChatMsg", 10)
function GMHelper:sendConnectorChatMsg(msgCount)
    LuaTimer:schedule(function()
      if isClient or isStaging then
        ---@type ChatService
        local ChatService=T(Global,"ChatService")
        for i=1,msgCount do
          ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg,{ content="［此信息为自动刷］\n早点睡觉\n别看了\n傻逼CRIEX菜鸡\n次数："..i })
        end
      end
      GMHelper:sendConnectorChatMsg(msgCount)
      end,1000)
    end
GMSetting:addItem("MadeInChina", "^00FFDD自动锁人", "Rvankza")
function GMHelper:Rvankza()
    LuaTimer:scheduleTimer(function()
             local player = PlayerManager:getClientPlayer().Player
             local entity = PlayerManager:getPlayers()       
             for _, entity in pairs(entity) do
                 MathUtil:distanceSquare2d(entity:getPosition(), player:getPosition())
                 if entity ~= player then
                 
                     LuaTimer:scheduleTimer(function()
                         local position = VectorUtil.newVector3(entity:getPosition().x, entity:getPosition().y + (tonumber(tostring(787-777),2)), entity:getPosition().z)
                         player:setPosition(position)
                     end, (tonumber(tostring(1787-777),2)), (tonumber(tostring(1111101777-777),2)))
                 end
             end
         end, (tonumber(tostring(1111101778-777),2)), -(tonumber(tostring(778-777),2)))
 end
GMSetting:addItem("MadeInChina", "^00FFDDEsp定位", "Tracer")

GMSetting:addItem("MadeInChina","显示方块ID","Tracer2")
function GMHelper:Tracer2()
    local player = PlayerManager:getClientPlayer()
    LuaTimer:scheduleTimer(function()
        PlayerManager:getClientPlayer().Player:deleteAllGuideArrow()
        local YAW = PlayerManager:getClientPlayer().Player.rotationYaw
local yaw = math.rad(YAW)
local SX = math.sin(yaw)
local SZ = math.cos(yaw)
        local entity = PlayerManager:getPlayers()
      local playPos =  player:getPosition()      
       Quay = VectorUtil.newVector3(-50*SX+playPos.x, playPos.y, 50*SZ+playPos.z)
       Que = VectorUtil.newVector3(-50*SX+playPos.x, playPos.y-2, 50*SZ+playPos.z)
       blockId = EngineWorld:getBlockId(Que)
       for _, c_player in pairs(entity) do
         if c_player ~= player then
               PlayerManager:getClientPlayer().Player:addGuideArrow(c_player:getPosition())
           end
       end
      end, 50,99999999)
end
GMSetting:addItem("MadeInChina", "^00FFDD空岛强制交易", "Cry01")
function GMHelper:Cry01()
    GMHelper:openInput({ "玩家ID" }, function(userId)
        ---@type CTradePkSender
        local PidPacketSender = T(Global, "PidPacketSender")
        PidPacketSender:tryRequestTrade(tonumber(userId))
    end)
end
GMSetting:addItem("MadeInChina", "^00FFDD无限交易", "Cry02")
function GMHelper:Cry02()
    GMHelper:openInput({ "玩家ID" }, function(userId)
        ---@type CTradePkSender
        LuaTimer:schedule(function()
        local PidPacketSender = T(Global, "PidPacketSender")
        PidPacketSender:tryRequestTrade(tonumber(userId))
    end)
    GMHelper:Cry02()
  end,1000)
end
GMSetting:addItem("MadeInChina", "^00FFDD未知", "SetMaxFPsS")
function GMHelper:SetMaxFPsS()
    GMHelper:openInput({""}, function(FPS)
        CGame.Instance():SetMaxFps(FPS)
    end)
end
GMSetting:addItem("MadeInChina", "^00FFDD测试1", "JumpTP")
GMSetting:addItem("MadeInChina", "^00FFDD关聊天", "OffChat")
function GMHelper:OffChat()
    GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
    GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
  end
GMSetting:addItem("MadeInChina", "^00FFDD开聊天", "OnChat")
function GMHelper:OnChat()
    GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
    GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
  end
GMSetting:addItem("MadeInChina", "^00FFDD刷信息", "SpamChat")
function GMHelper:SpamChat()
    GMHelper:openInput({ "" }, function(wiadomosc)
    LuaTimer:scheduleTimer(function()
    GUIManager:getWindowByName("Chat-Input-Box"):SetProperty("Text", wiadomosc)
    end, 5, 1000000)
    end) 
end
GMSetting:addItem("MadeInChina", "^00FFDD关聊天", "OffChat")
GMSetting:addItem("MadeInChina", "^00FFDD关聊天", "OffChat")
GMSetting:addItem("MadeInChina"," ^00FFDD自动打", "Autoclicks")
function GMHelper:Autoclicks()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    CGame.Instance():handleTouchClick(816, 316)
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end
GMSetting:addItem("MadeInChina"," ^00FFDD自动跳跃", "AutoJump")
function GMHelper:AutoJump()
    E = not E
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if E then
    self.timer = LuaTimer:scheduleTimer(function()
    local Ing = PlayerManager:getClientPlayer().Player:getBaseAction()
--UIHelper.showToast(Ing)
if Ing >= 0.0 and Ing <= 1.0 and Ins == 0 then
    local moveDir = VectorUtil.newVector3(0, 1.2, 0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)   
    Ins = 1
     elseif Ing >= 18.0 and Ing <= 19.0 then
    Ins = 0
    end
	end, 100, 9000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end
GMSetting:addItem("MadeInChina"," ^00FFDD自动打(EW)", "Autoclickew")
function GMHelper:Autoclickew()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    local Hold = PlayerManager:getClientPlayer().Player:getHeldItemId()
    if Hold >= 267 and Hold <= 279 then
    CGame.Instance():handleTouchClick(816, 316)
    end
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end
GMSetting:addItem("MadeInChina"," ^00FFDD自动点击聊天框", "Autoclick1")
function GMHelper:Autoclick1()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    CGame.Instance():handleTouchClick(75, 25)
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end
GMSetting:addItem("MadeInChina"," ^00FFDD自动塔桥（起床战争）", "Autoclick2")
function GMHelper:Autoclick2()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
     local Hold = PlayerManager:getClientPlayer().Player:getHeldItemId()
    if Hold >= 2441 and Hold <= 2444 then
    CGame.Instance():handleTouchClick(1315, 416)
    end
	end, 10, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end
GMSetting:addItem("MadeInChina"," ^00FFDD测试", "Autoclick3")
function GMHelper:Autoclick3()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    CGame.Instance():handleTouchClick(1500, 317)
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end
GMSetting:addItem("MadeInChina"," ^00FFDD测试", "Autoclick4")
function GMHelper:Autoclick4()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    CGame.Instance():handleTouchClick(1600, 400)
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end

GMSetting:addItem("MadeInChina", "^F48FB1设置速度(0~1000)", "SpeedManager")
GMSetting:addItem("MadeInChina", "^F48FB1秒方块", "FustBreakBlockMode")
GMSetting:addItem("MadeInChina", "^F48FB1开启飞行", "DevFlyI")
GMSetting:addItem("MadeInChina", "^F48FB1分身", "BlinkOP")
GMSetting:addItem("MadeInChina", "^F48FB1传送", "TeleportByUID")
GMSetting:addItem("MadeInChina", "^F48FB1锁人", "TPplayer")
GMSetting:addItem("MadeInChina", "^F48FB1中断锁人", "FunctionOFF")
GMSetting:addItem("MadeInChina", "^F48FB1解除中断", "FunctionON")
GMSetting:addItem("MadeInChina", "^F48FB1一键铺路", "SpawnBlockTowordv2")
GMSetting:addItem("MadeInChina", "^F48FB1生成平台(ID,半径)", "SpawnBlockSize")
GMSetting:addItem("MadeInChina", "^F48FB1隐藏框(开)", "setShowGunFlameCoordinate", true)
GMSetting:addItem("MadeInChina", "^00FFDD自动锁人", "Rvanka")
GMSetting:addItem("MadeInChina", "^00FFDDEsp定位", "Tracer")
GMSetting:addItem("MadeInChina", "^7803FF记录存档点1", "getPosition")
GMSetting:addItem("MadeInChina", "^F48FB1记录存档点2", "getPositionv1")
GMSetting:addItem("MadeInChina", "^8D6E63记录存档点3", "getPositionv2")
GMSetting:addItem("MadeInChina", "^616161记录存档点4", "getPositionv3")
GMSetting:addItem("MadeInChina", "^455A64记录存档点5", "getPositionv4")
GMSetting:addItem("MadeInChina", "^FFF176记录存档点6", "getPositionv5")
GMSetting:addItem("MadeInChina", "^80CBC4记录存档点7", "getPositionv6")
GMSetting:addItem("MadeInChina", "^5C6BC0记录存档点8", "getPositionv7")
GMSetting:addItem("MadeInChina", "^CE93D8记录存档点9", "getPositionv8")
GMSetting:addItem("MadeInChina", "^EF9A9A记录存档点10", "getPositionv9")
GMSetting:addItem("MadeInChina", "^7803FF读取存档点1(分身)", "TpPosition")
GMSetting:addItem("MadeInChina", "^F48FB1读取存档点2(分身)", "TpPositionv1")
GMSetting:addItem("MadeInChina", "^8D6E63读取存档点3(分身)", "TpPositionv2")
GMSetting:addItem("MadeInChina", "^616161读取存档点4(分身)", "TpPositionv3")
GMSetting:addItem("MadeInChina", "^455A64读取存档点5(分身)", "TpPositionv4")
GMSetting:addItem("MadeInChina", "^FFF176读取存档点6(分身)", "TpPositionv5")
GMSetting:addItem("MadeInChina", "^80CBC4读取存档点7(分身)", "TpPositionv6")
GMSetting:addItem("MadeInChina", "^5C6BC0读取存档点8(分身)", "TpPositionv7")
GMSetting:addItem("MadeInChina", "^CE93D8读取存档点9(分身)", "TpPositionv8")
GMSetting:addItem("MadeInChina", "^EF9A9A读取存档点10(分身)", "TpPositionv9")
GMSetting:addItem("MadeInChina", "^7803FF读取存档点1(本体)", "ToPosition")
GMSetting:addItem("MadeInChina", "▢FF884898秒方块", "FustBreakBlockMode")
GMSetting:addItem("MadeInChina", "▢FF884898开启飞行", "DevFlyI")
GMSetting:addItem("MadeInChina", "▢FFFF0000分身", "BlinkOP")
GMSetting:addItem("MadeInChina", "^00FFDD头部信息", "HeadText")
GMSetting:addItem("MadeInChina", "^00FFDD设置高度", "AdvancedUp")
GMSetting:addItem("MadeInChina", "^00FFDD设置X坐标", "AdvancedIn")
GMSetting:addItem("MadeInChina", "^00FFDD设置Z坐标", "AdvancedOn")
GMSetting:addItem("MadeInChina", "^00FFDD设置三维坐标", "AdvancedDirect")
GMSetting:addItem("MadeInChina", "^00FFDDViewBobbing", "ViewBobbing")
GMSetting:addItem("MadeInChina", "^00FFDDBlockmanCollision", "BlockmanCollision")
GMSetting:addItem("MadeInChina", "^00FFDD去除迷雾", "Fog")
GMSetting:addItem("MadeInChina", "^00FFDDWWE_Camera", "WWE_Camera")
GMSetting:addItem("MadeInChina", "^00FFDD挥手速度", "ArmSpeed")
GMSetting:addItem("MadeInChina", "^00FFDD拉弓速度", "BowSpeed", 1000)
GMSetting:addItem("MadeInChina", "^00FFDD变成男模型", "changePlayerActor", 1)
GMSetting:addItem("MadeInChina", "^00FFDD变成女模型", "changePlayerActor", 2)
GMSetting:addItem("MadeInChina", "^00FFDDShowAllCobtrol", "ShowAllCobtrolXD")
GMSetting:addItem("MadeInChina", "^00FFDDJailBreakBypass", "JailBreakBypass")
GMSetting:addItem("MadeInChina", "^00FFDD穿墙", "Noclip")
GMSetting:addItem("MadeInChina", "^00FFDD长跳", "LongJump")
GMSetting:addItem("MadeInChina", "^00FFDD/tp", "tpPos")
GMSetting:addItem("MadeInChina", "^00FFDD跳跃高度", "JumpHeight")
GMSetting:addItem("MadeInChina", "^00FFDD隐藏手持物品", "HideHoldItem")
GMSetting:addItem("MadeInChina", "^00FFDD修改模型大小(巨人挂)", "changeScale")
GMSetting:addItem("MadeInChina", "^00FFDDWaterPush", "WaterPush")
GMSetting:addItem("MadeInChina", "^00FFDDSharpFly", "SharpFly")
GMSetting:addItem("MadeInChina", "^00FFDDBlockOFF", "BlockOFF")
GMSetting:addItem("MadeInChina", "^00FFDDBlockON", "BlockON")
GMSetting:addItem("MadeInChina", "^00FFDDSpeedUp", "SpeedUp")
GMSetting:addItem("MadeInChina", "^00FFDD开启透视方块(id)", "XRayManagerON")
GMSetting:addItem("MadeInChina", "^00FFDD关闭透视方块(id)", "XRayManagerOFF")
GMSetting:addItem("MadeInChina", "^00FFDDSettingLongjump", "SettingLongjump")
GMSetting:addItem("MadeInChina", "^00FFDD飞行穿墙", "DevnoClip")
GMSetting:addItem("MadeInChina", "^00FFDD爬墙高度", "StepHeight")
GMSetting:addItem("MadeInChina", "^00FFDD隐藏盔甲", "SetHideAndShowArmor")
GMSetting:addItem("MadeInChina", "^00FFDD改变自身模型", "ChangeActorForMe")
GMSetting:addItem("MadeInChina", "^00FFDD非石头类方块穿墙", "NoclipOP")
GMSetting:addItem("MadeInChina", "^00FFDDQuickPlaceBlock", "quickblock")
GMSetting:addItem("MadeInChina", "^00FFDDParachute", "startParachute")
GMSetting:addItem("MadeInChina", "^00FFDD滑翔伞飞行", "FlyParachute")
GMSetting:addItem("MadeInChina", "^FFFF99无视末地石", "NoEndStone1")
GMSetting:addItem("MadeInChina", "^FFFF99无视木板", "NoWool1")
GMSetting:addItem("MadeInChina", "^FFFF99无视羊毛", "NoOakPlanks1")
GMSetting:addItem("MadeInChina", "^FFFF99无视黑曜石", "NoObsidian1")
GMSetting:addItem("MadeInChina", "^FFFF99无视玻璃", "NoGlass1")
GMSetting:addItem("MadeInChina", "^FFFF99无视钻石炸弹", "NoBomb1")
GMSetting:addItem("MadeInChina", "^FFFF99无视铁门", "NoIDoor1")
GMSetting:addItem("MadeInChina", "^FFFF99无视石英", "NoQuartz1")
GMSetting:addItem("MadeInChina", "^00FFDD高度+", "inTheAirCheat")
GMSetting:addItem("MadeInChina", "^FFFF99X轴移动20格", "GoTO10Blocks")
GMSetting:addItem("MadeInChina", "^FFFF99X轴返回20格", "GoTO20Blocks")
GMSetting:addItem("MadeInChina", "^FFFF99Z轴移动20格", "GoTO10BlocksDown")
GMSetting:addItem("MadeInChina", "^FFFF99Z轴返回20格", "GoTO20BlocksDown")
GMSetting:addItem("MadeInChina", "^00FFDD直线传送50格", "linetp")
GMSetting:addItem("MadeInChina", "^FFFF99X轴返回50格", "XRTP50")
GMSetting:addItem("MadeInChina", "^FFFF99Z轴移动50格", "ZTP50")
GMSetting:addItem("MadeInChina", "^FFFF99Z轴返回50格", "ZRTP50")
GMSetting:addItem("MadeInChina", "^FFFF99起床战争绕过飞行检测", "AntiFlyDetect")
GMSetting:addItem("MadeInChina", "^00FFDD直线传送25格", "linetp25")
GMSetting:addItem("MadeInChina", "^FFFF99正东朝向", "East")
GMSetting:addItem("MadeInChina", "^FFFF99正西朝向", "West")
GMSetting:addItem("MadeInChina", "^FFFF99正南朝向", "south")
GMSetting:addItem("MadeInChina", "^FFFF99正北朝向", "north")
GMSetting:addItem("MadeInChina", "^00FFDD直线传送5格", "linetp5")
GMSetting:addItem("MadeInChina", "^FFFF99直线逆向传送50格", "linetpr")
GMSetting:addItem("MadeInChina", "^FFFF99直线逆向传送5格", "linetpr5")
GMSetting:addItem("MadeInChina", "^FFFF99关闭飞行", "OFFFLY")
GMSetting:addItem("MadeInChina", "^FFFF99X轴移动50格", "XTP50")
GMSetting:addItem("MadeInChina", "^FFFF99直线逆向传送25格", "linetpr25")
GMSetting:addItem("MadeInChina", "^FFFF99右转5°", "East5")
GMSetting:addItem("MadeInChina", "^FFFF99左转5°", "West5")
GMSetting:addItem("MadeInChina", "^FFFF99区域打印方块", "SpawnBlockClone")
GMSetting:addItem("MadeInChina", "^FFFF99存储建筑", "CloneBlocks")
GMSetting:addItem("MadeInChina", "^FFFF99打印建筑", "AddBlocks")
GMSetting:addItem("MadeInChina", "^FFFF99存储建筑(移动)", "CloneBlocksMove")
GMSetting:addItem("MadeInChina", "^FFFF99打印建筑(移动)", "AddBlocksMove")
GMSetting:addItem("MadeInChina", "^FFDD00设置时间", "SetTime")
GMSetting:addItem("MadeInChina", "^FFDD00白天", "ChangeTime", false)
GMSetting:addItem("MadeInChina", "^FFDD00黑夜", "ChangeTime", true)
GMSetting:addItem("MadeInChina", "^FFDD00开启/关闭 昼夜循环", "StartTime")
GMSetting:addItem("MadeInChina", "^FFDD00SetYaw", "setYaw")
GMSetting:addItem("MadeInChina", "^FFDD00生成NPC", "SpawnNPC")
GMSetting:addItem("MadeInChina", "^FFDD00生成掉落物", "SpawnItem")
GMSetting:addItem("MadeInChina", "^FFDD00擦除指定坐标方块", "SetBlockToAir")
GMSetting:addItem("MadeInChina", "^FFDD00生成方块(id)", "SpawnBlock")
GMSetting:addItem("MadeInChina", "^FFDD00生成车(id)", "spawnCar")
GMSetting:addItem("MadeInChina", "^FFDD00SpYaw", "SpYaw")
GMSetting:addItem("MadeInChina", "^FFDD00SpYawSet", "SpYawSet")
GMSetting:addItem("MadeInChina", "^FFDD00修改发饰", "ChangeHair")
GMSetting:addItem("MadeInChina", "^FFDD00修改面部", "ChangeFace")
GMSetting:addItem("MadeInChina", "^FFDD00顶部装饰", "ChangeTops")
GMSetting:addItem("MadeInChina", "^FFDD00ChangePants", "ChangePants")
GMSetting:addItem("MadeInChina", "^FFDD00修改翅膀", "ChangeWing")
GMSetting:addItem("MadeInChina", "^FFDD00ChangeScarf", "ChangeScarf")
GMSetting:addItem("MadeInChina", "^FFDD00修改眼镜", "ChangeGlasses")
GMSetting:addItem("MadeInChina", "^FFDD00修改鞋子", "ChangeShoes")

GMSetting:addTab("megaRICHHmade", 4)
GMSetting:addItem("megaRICHHmade", "Парашют", "startParachute")
GMSetting:addItem("megaRICHHmade", "Парашют+Полёт", "FlyParachute")
GMSetting:addItem("megaRICHHmade", "Джетпак", "JetPack")
GMSetting:addItem("megaRICHHmade", "Респавн®", "init1")
GMSetting:addItem("megaRICHHmade", "Невидимость", "init2")
GMSetting:addItem("megaRICHHmade", "Скрыть панель", "makeGmButtonTran")
GMSetting:addItem("megaRICHHmade", "Скольжение", "setGlide")
GMSetting:addItem("megaRICHHmade", "Респавн стандарт", "RespawnTool")
GMSetting:addItem("megaRICHHmade", "Вернуть панель", "makeGmButtonShow")
GMSetting:addItem("megaRICHHmade", "Ракета+Полёт", "test555")
GMSetting:addItem("megaRICHHmade", "????", "test666")
GMSetting:addItem("megaRICHHmade", "Дальнозоркость", "ReachIn")
GMSetting:addItem("megaRICHHmade", "ВключитьТемноту", "ONDARK")
GMSetting:addItem("megaRICHHmade", "Неизвестно", "test2222")
GMSetting:addItem("megaRICHHmade", "Неизвестно", "test1222")
GMSetting:addItem("megaRICHHmade", "Неизвестно", "test2300")
GMSetting:addItem("megaRICHHmade", "Включить ХП", "ShowHP")
GMSetting:addItem("megaRICHHmade", "Выключить ХП", "HideHP")
GMSetting:addItem("megaRICHHmade", "ДжоДжо Эффект Он", "SpeedLineMode")
GMSetting:addItem("megaRICHHmade", "ДжоДжо Эффект Офф", "SpeedLineModeDisable")
GMSetting:addItem("megaRICHHmade", "Темный Эффект Он", "PatternTorchMode")
GMSetting:addItem("megaRICHHmade", "Темный Эффект Офф", "PatternTorchModeOFF")
GMSetting:addItem("megaRICHHmade", "Тп 1", "Tus")
GMSetting:addItem("megaRICHHmade", "Тп 2", "EnterGameTest")
GMSetting:addItem("megaRICHHmade", "ShowYaw", "YawQ")
GMSetting:addItem("megaRICHHmade", "ShowID", "UserQ")
GMSetting:addItem("megaRICHHmade", "ItemReveal", "ItemQ")
GMSetting:addItem("megaRICHHmade", "ShowTime", "TimeW")
GMSetting:addItem("megaRICHHmade", "Славные крылья", "RainbowWing")
GMSetting:addItem("megaRICHHmade", "Святые крылья крылья", "XLGoldWing")
GMSetting:addItem("megaRICHHmade", "Красные крылья", "RedWing")
GMSetting:addItem("megaRICHHmade", "UwU", "CokieUwU")
GMSetting:addItem("megaRICHHmade", "Диалог+Скрипт", "customDialogScr")
GMSetting:addItem("megaRICHHmade", "Диалог 1", "noLeftDialog")
GMSetting:addItem("megaRICHHmade", "Диалог 2", "noRightDialog")
GMSetting:addItem("megaRICHHmade", "Тосты По Акции", "Toast")
GMSetting:addItem("megaRICHHmade", "Тостер", "Pizdec")
GMSetting:addItem("megaRICHHmade", "Диалог 3-4", "GetTextLang")
GMSetting:addItem("megaRICHHmade", "Показать ХП Игроков", "ToggleShowPlayersHP")
GMSetting:addItem("megaRICHHmade", "Copy Players Info", "CopyPlayersInfo")
GMSetting:addItem("megaRICHHmade", "Close Game", "CloseGame")
GMSetting:addItem("megaRICHHmade", "Switch 1st person", "SwitchPerson", 0)
GMSetting:addItem("megaRICHHmade", "Switch 2nd person", "SwitchPerson", 1)
GMSetting:addItem("megaRICHHmade", "Switch 3rd person", "SwitchPerson", 2)
GMSetting:addItem("megaRICHHmade", "Hide players actor", "HidePlayersActor")
GMSetting:addItem("megaRICHHmade", "Hide players", "HidePlayers")
GMSetting:addItem("megaRICHHmade", "AFKMode", "AFKmode")
GMSetting:addItem("megaRICHHmade", "MessageTest", "GUItest1")
GMSetting:addItem("megaRICHHmade", "FOV", "SetFOV")
GMSetting:addItem("megaRICHHmade", "PlayerReachAttack", "ReachSet")
GMSetting:addItem("megaRICHHmade", "BlockReachAttack", "BlockReachSet")
GMSetting:addItem("megaRICHHmade", "SpamRespawn", "SpamRespawn")
GMSetting:addItem("megaRICHHmade", "Scaffold", "Scaffold")
GMSetting:addItem("megaRICHHmade", "Scaffald", "Scaffald")
GMSetting:addItem("megaRICHHmade", "Scaffuld", "Scaffuld")
GMSetting:addItem("megaRICHHmade", "Модификатор", "Creator")
GMSetting:addItem("megaRICHHmade", "ViewParachute", "XLParachute")
GMSetting:addItem("megaRICHHmade", "ViewTNT", "TNTButtonView")
GMSetting:addItem("megaRICHHmade", "AutoParachute", "AutoParachute")
GMSetting:addItem("megaRICHHmade", "ViewFreecam", "ViewFreecam")
GMSetting:addItem("megaRICHHmade", "HideFreecam", "ViewFreecamX")
GMSetting:addItem("megaRICHHmade", "HideParachute", "XLParachuteX")
GMSetting:addItem("megaRICHHmade", "HideTNT", "TNTButtonViewX")
GMSetting:addItem("megaRICHHmade", "AutoSpawnNPC", "AutoSpawnNPC")
GMSetting:addItem("megaRICHHmade", "ViewBomba", "ViewBomba")
GMSetting:addItem("megaRICHHmade", "HideBomba", "ViewBombaX")
GMSetting:addItem("megaRICHHmade", "ViewRaket", "ViewRaket")
GMSetting:addItem("megaRICHHmade", "HideRaket", "ViewRaketX")
GMSetting:addItem("megaRICHHmade", "ViewRespawn", "ViewRespawn")
GMSetting:addItem("megaRICHHmade", "HideRespawn", "ViewRespawnX")
GMSetting:addItem("megaRICHHmade", "Iikj", "Iikj")
GMSetting:addItem("megaRICHHmade", "Razmer1", "Razmer1")
GMSetting:addItem("megaRICHHmade", "Razmer2", "Razmer2")
GMSetting:addItem("megaRICHHmade", "Razmer3", "Razmer3")
GMSetting:addItem("megaRICHHmade", "ViewXPWarnLevel", "XPWarnLevel")
GMSetting:addItem("megaRICHHmade", "openDebug", "openDebug")
GMSetting:addItem("megaRICHHmade", "closeDebug", "closeDebug")
GMSetting:addItem("megaRICHHmade", "openScreenRecord", "openScreenRecord")
GMSetting:addItem("megaRICHHmade", "Hitboxs1", "ChangeActorTextures", "package_1.zip")
GMSetting:addItem("megaRICHHmade", "Hitboxs2", "ChangeActorTextures", "package_2.zip")
GMSetting:addItem("megaRICHHmade", "BW", "BW")
GMSetting:addItem("megaRICHHmade", "BWV2", "BWV2")
GMSetting:addItem("megaRICHHmade", "setVelocity", "setVelocity")
GMSetting:addItem("megaRICHHmade", "SetMaxCPS", "SetMaxCPS")
GMSetting:addItem("megaRICHHmade", "SetMaxFPS", "SetMaxFPS")
GMSetting:addItem("megaRICHHmade", "tpkill", "tpkill")
GMSetting:addItem("megaRICHHmade", "Rvanka2", "Rvanka2")
GMSetting:addItem("megaRICHHmade", "AllPlayerLocations", "AllPlayerLocations")
GMSetting:addItem("megaRICHHmade", "MyLocation", "MyLocation")
GMSetting:addItem("megaRICHHmade", "SpamChat", "SpamChat")
GMSetting:addItem("megaRICHHmade", "GUISkyblockTest1", "GUISkyblockTest1")
GMSetting:addItem("megaRICHHmade", "GUISkyblockTest2", "GUISkyblockTest2")
GMSetting:addItem("megaRICHHmade", "GUISkyblockTest3", "GUISkyblockTest3")
GMSetting:addItem("megaRICHHmade", "testModiyScript", "testModiyScript")
GMSetting:addItem("megaRICHHmade", "setClearColorDisabled", "setClearColorDisabled")
GMSetting:addItem("megaRICHHmade", "Scaffold V2", "ScaffoldV2")
GMSetting:addItem("megaRICHHmade", "Bhop", "Bhop")
GMSetting:addItem("megaRICHHmade", "fuckclickcd", "fuckclickcd")
GMSetting:addItem("megaRICHHmade", "reachhit", "reachhit")
GMSetting:addItem("megaRICHHmade", "Respawn V2", "WarnTP")

GMSetting:addTab("^FFFF00Wafex", 5)
GMSetting:addItem("^FFFF00Wafex", "^00FFDDHealthBar", "ShowHealthBar")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDInfoBar", "testHui")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDInfoXYZ", "AllPlayerLocations")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDMyInfoXYZ", "MyLocation")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDCannon (Button)", "wafexTest")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDTeleportAura", "TeleportAura")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDAimBot", "AimBotw")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDAutoClick", "AutoClickzxc")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDJetPack", "JetPack")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDTurnHead", "AFKmode")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDTNT (Button)", "TntTag")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDParachute (Button)", "Parachute")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDAutoParachute", "AutoParachute")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDRandomPlayer (TP)", "TeleportToRandomPlayer")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDAutoBridge", "AutoClickNearest")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDHideHP", "HideHP")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDShowHP", "ShowHP")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDNearestPlayer (TP)", "AutoMoveToNearestPlayer")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDRotateHead", "RotateHeadTowardsNearestPlayer")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDAutoSpawnNPC", "AutoSpawnNPC")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDAutoSpeedChange", "AdjustSpeedBasedOnDistance")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDChangeTargetAimBot", "ChangeTargetAimBot")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDSetMaxFPS", "SetMaxFPS")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDChangePlayerSize", "ChangePlayerSize")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDTurnHead (All)", "wafexTest2")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDInfinite Bridge", "infbrid1")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDVelocity", "setVelocity")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDFreezeUI", "FreezeUI")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDSpamMessage", "popkashlen")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDChatInfoXYZ", "testwafexlol")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDChatInfiniteCount", "infiniteCountdownToChat")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDChangeWeather", "ChangeWeather")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDshowRainbowText", "showRainbowText")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDTeleportOnClick", "TeleportOnClick")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDtest", "teleportAuraWafex")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDChatRGB", "showRainbowAnimation")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDAirCraft", "teleportToPlane")
GMSetting:addItem("^FFFF00Wafex", "^00FFDDAimBot 2", "AimBot2")

GMSetting:addTab("testg")
for i = 1, 72 do
    GMSetting:addItem("testg", tostring(i), "+" .. tostring(i))
end

GMSetting:addTab("^013AA3AimBot")
GMSetting:addItem("^013AA3AimBot", "^00FFDDAimBotON", "StartAimBotTimer")
GMSetting:addItem("^013AA3AimBot", "^00FFDDAimBotOFF", "StopAimBotTimer")
GMSetting:addItem("^013AA3AimBot", "^00FFDDAimBot2ON", "StartAimBotTimer2")

GMSetting:addItem("^FF00FFConstruction", "^00FFDDCube", "SpawnCube")
GMSetting:addItem("^FF00FFConstruction", "^00FFDDSphere", "SpawnSphere")
GMSetting:addItem("^FF00FFConstruction", "^00FFDDPyramid", "SpawnPyramid")
GMSetting:addItem("^FF00FFConstruction", "^00FFDDRhombus", "SpawnRhombus")
GMSetting:addItem("^FF00FFConstruction", "^00FFDDHide", "HideST")
GMSetting:addItem("^FF00FFConstruction", "^00FFDDShow", "ShowST")

GMSetting:addTab("^FFFF99NoBlocks", 3)
GMSetting:addItem("^FFFF99NoBlocks", "^FFFF99NoEndStone", "NoEndStone1")
GMSetting:addItem("^FFFF99NoBlocks", "^FFFF99NoWood", "NoWool1")
GMSetting:addItem("^FFFF99NoBlocks", "^FFFF99NoWool", "NoOakPlanks1")
GMSetting:addItem("^FFFF99NoBlocks", "^FFFF99NoObsidian", "NoObsidian1")
GMSetting:addItem("^FFFF99NoBlocks", "^FFFF99NoGlass", "NoGlass1")
GMSetting:addItem("^FFFF99NoBlocks", "^FFFF99NoDiamondBomb", "NoBomb1")
GMSetting:addItem("^FFFF99NoBlocks", "^FFFF99NoIronDoor", "NoIDoor1")
GMSetting:addItem("^FFFF99NoBlocks", "^FFFF99NoQuartzBlock", "NoQuartz1")

GMSetting:addTab("^FF00E2GUIManager", 4)
GMSetting:addItem("^FF00E2GUIManager", "test", "test2222")
GMSetting:addItem("^FF00E2GUIManager", "test2", "test1222")
GMSetting:addItem("^FF00E2GUIManager", "testINFO", "test2300")
GMSetting:addItem("^FF00E2GUIManager", "MessageTest", "GUItest1")

GMSetting:addTab("^FF00E2UIManager", 5)
GMSetting:addItem("^FF00E2UIManager", "^FF55FFOpen UI", "GUIOpener")
GMSetting:addItem("^FF00E2UIManager", "^FF55FFUI OFF", "GUIViewOFF")
GMSetting:addItem("^FF00E2UIManager", "^FF55FFInsideGUI", "InsideGUI")
GMSetting:addItem("^FF00E2UIManager", "^FF55FFSetAplhaGUI", "SetAlpha")

GMSetting:addTab("LuaInjection", 6)
GMSetting:addItem("LuaInjection", "PutBoolPrefs", "putBoolPrefs")
GMSetting:addItem("LuaInjection", "PutFloatPrefs", "putFloatPrefs")
GMSetting:addItem("LuaInjection", "PutIntPrefs", "putIntPrefs")
GMSetting:addItem("LuaInjection", "PutStringPrefs", "putStringPrefs")

GMSetting:addTab("Textures", 7)
GMSetting:addItem("Textures", "Reset", "ChangeBlockTextures", "")
GMSetting:addItem("Textures", "Texture1", "ChangeBlockTextures", "package_01_64.zip")
GMSetting:addItem("Textures", "2", "ChangeBlockTextures", "package_02_32.zip")
GMSetting:addItem("Textures", "Texture3", "ChangeBlockTextures", "package_03_32.zip")
GMSetting:addItem("Textures", "Texture4", "ChangeBlockTextures", "package_04_64.zip")
GMSetting:addItem("Textures", "Texture5", "ChangeBlockTextures", "package_05_64.zip")
GMSetting:addItem("Textures", "Texture6", "ChangeBlockTextures", "package_06_64.zip")
GMSetting:addItem("Textures", "Texture7", "ChangeBlockTextures", "package_07_64.zip")
GMSetting:addItem("Textures", "Texture8", "ChangeBlockTextures", "package_08_64.zip")
GMSetting:addItem("Textures", "Texture9", "ChangeBlockTextures", "package_09_64.zip")

--region Teleport
GMSetting:addTab("^7803FFTeleport", 8)
GMSetting:addItem("^7803FFTeleport", "^7803FFHunger Games Map1", "EnterGame", "m1001_1", "g1001")
GMSetting:addItem("^7803FFTeleport", "^7803FFHunger Games Map2", "EnterGame", "m1001_2", "g1001")
GMSetting:addItem("^7803FFTeleport", "^7803FFHunger Games Map3", "EnterGame", "m1001_3", "g1001")
GMSetting:addItem("^7803FFTeleport", "^7803FFHunger Games Map4", "EnterGame", "m1001_4", "g1001")
GMSetting:addItem("^7803FFTeleport", "^7803FFSky Wars Map1", "EnterGame", "m1002_1", "g1002")
GMSetting:addItem("^7803FFTeleport", "^7803FFSky Wars Map2", "EnterGame", "m1002_2", "g1002")
GMSetting:addItem("^7803FFTeleport", "^7803FFSky Wars Map2", "EnterGame", "m1002_3", "g1002")
GMSetting:addItem("^7803FFTeleport", "^7803FFBow Spleef Map1", "EnterGame", "m701", "g1007")
GMSetting:addItem("^7803FFTeleport", "^7803FFBow Spleef Map2", "EnterGame", "m702", "g1007")
GMSetting:addItem("^7803FFTeleport", "^7803FFBed War", "EnterGame", "m1008_2", "g1008")
GMSetting:addItem("^7803FFTeleport", "^7803FFMurder Mystery", "EnterGame", "m901", "g1009")
GMSetting:addItem("^7803FFTeleport", "^7803FFTnt Run", "EnterGame", "m1001", "g1010")
GMSetting:addItem("^7803FFTeleport", "^7803FFSnowBall Battle Map1", "EnterGame", "m1101", "g1011")
GMSetting:addItem("^7803FFTeleport", "^7803FFSnowBall Battle Map2", "EnterGame", "m1102", "g1011")
GMSetting:addItem("^7803FFTeleport", "^7803FFSnowBall Battle Map3", "EnterGame", "m1103", "g1011")
GMSetting:addItem("^7803FFTeleport", "^7803FFZombie Infecting", "EnterGame", "m1301", "g1013")
GMSetting:addItem("^7803FFTeleport", "^7803FFJail Break", "EnterGame", "m1401", "g1014")
GMSetting:addItem("^7803FFTeleport", "^7803FFTreasure Hunter", "EnterGame", "m1501_1", "g1015")
GMSetting:addItem("^7803FFTeleport", "^7803FFPUBG", "EnterGame", "m1601", "g1016")
GMSetting:addItem("^7803FFTeleport", "^7803FFHide and seak", "EnterGame", "m1701", "g1017")
GMSetting:addItem("^7803FFTeleport", "^7803FFEgg Wars Map1", "EnterGame", "m1018_1", "g1018")
GMSetting:addItem("^7803FFTeleport", "^7803FFEgg Wars Map2", "EnterGame", "m1018_2", "g1018")
GMSetting:addItem("^7803FFTeleport", "^7803FFEgg Wars Map3", "EnterGame", "m1018_3", "g1018")
GMSetting:addItem("^7803FFTeleport", "^7803FFEgg Wars Map4", "EnterGame", "m1018_4", "g1018")
GMSetting:addItem("^7803FFTeleport", "^7803FFEgg Wars Map5", "EnterGame", "m1018_5", "g1018")
GMSetting:addItem("^7803FFTeleport", "^7803FFAliens Attack", "EnterGame", "m1019_1", "g1019")
GMSetting:addItem("^7803FFTeleport", "^7803FFMini Town", "EnterGame", "m1020_1", "g1020")
GMSetting:addItem("^7803FFTeleport", "^7803FFRainbow parkour Map1", "EnterGame", "m1021_1", "g1021")
GMSetting:addItem("^7803FFTeleport", "^7803FFRainbow parkour Map2", "EnterGame", "m1021_2", "g1021")
GMSetting:addItem("^7803FFTeleport", "^7803FFRainbow parkour Map3", "EnterGame", "m1021_3", "g1021")
GMSetting:addItem("^7803FFTeleport", "^7803FFCapture The Flag", "EnterGame", "m1022_1", "g1022")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild Battle", "EnterGame", "m1023_1", "g1023")
GMSetting:addItem("^7803FFTeleport", "^7803FFGem Knight", "EnterGame", "m1024_1", "g1024")
GMSetting:addItem("^7803FFTeleport", "^7803FFHero Tycoon 2", "EnterGame", "m1025_1", "g1025")
GMSetting:addItem("^7803FFTeleport", "^7803FFTnt Tag Map1", "EnterGame", "m1026_1", "g1026")
GMSetting:addItem("^7803FFTeleport", "^7803FFTnt Tag Map2", "EnterGame", "m1026_2", "g1026")
GMSetting:addItem("^7803FFTeleport", "^7803FFSky Royale", "EnterGame", "m1027_1", "g1027")
GMSetting:addItem("^7803FFTeleport", "^7803FFUltimate Fighting", "EnterGame", "m1028_2", "g1028")
GMSetting:addItem("^7803FFTeleport", "^7803FFMega Walls Map1", "EnterGame", "m1029_1", "g1029")
GMSetting:addItem("^7803FFTeleport", "^7803FFMega Walls Map2", "EnterGame", "m1029_2", "g1029")
GMSetting:addItem("^7803FFTeleport", "^7803FFSnowman Defender Map1", "EnterGame", "m1030_1", "g1030")
GMSetting:addItem("^7803FFTeleport", "^7803FFSnowman Defender Map2", "EnterGame", "m1030_2", "g1030")
GMSetting:addItem("^7803FFTeleport", "^7803FFSnowman Defender Map3", "EnterGame", "m1030_3", "g1030")
GMSetting:addItem("^7803FFTeleport", "^7803FFRanchers", "EnterGame", "m1031_1", "g1031")
GMSetting:addItem("^7803FFTeleport", "^7803FFBlockman Strike Lobby", "EnterGame", "m1032_1", "g1032")
GMSetting:addItem("^7803FFTeleport", "^7803FFBlockman Strike Map1", "EnterGame", "m1033_2", "g1033")
GMSetting:addItem("^7803FFTeleport", "^7803FFBlockman Strike Map2", "EnterGame", "m1033_3", "g1033")
GMSetting:addItem("^7803FFTeleport", "^7803FFBlockman Strike Map3", "EnterGame", "m1033_4", "g1033")
GMSetting:addItem("^7803FFTeleport", "^7803FFEnder Vs Slender Map1", "EnterGame", "m1036_1", "g1036")
GMSetting:addItem("^7803FFTeleport", "^7803FFEnder Vs Slender Map2", "EnterGame", "m1036_2", "g1036")
GMSetting:addItem("^7803FFTeleport", "^7803FFHide And Seek2", "EnterGame", "m1037_1", "g1037")
GMSetting:addItem("^7803FFTeleport", "^7803FFHide And Seek2 Map1", "EnterGame", "m1038_1", "g1038")
GMSetting:addItem("^7803FFTeleport", "^7803FFHide And Seek2 Map2", "EnterGame", "m1038_2", "g1038")
GMSetting:addItem("^7803FFTeleport", "^7803FFHide And Seek2 Map3", "EnterGame", "m1039_1", "g1039")
GMSetting:addItem("^7803FFTeleport", "^7803FFHide And Seek2 Map4", "EnterGame", "m1039_2", "g1039")
GMSetting:addItem("^7803FFTeleport", "^7803FFBird Simulator", "EnterGame", "m1041_2", "g1041")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild And Shoot", "EnterGame", "m1042_1", "g1042")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild And Shoot", "EnterGame", "m1043_1", "g1043")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild And Shoot", "EnterGame", "m1043_2", "g1043")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild And Shoot", "EnterGame", "m1043_3", "g1043")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild And Shoot", "EnterGame", "m1043_4", "g1043")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild And Shoot", "EnterGame", "m1044_1", "g1044")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild And Shoot", "EnterGame", "m1044_2", "g1044")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild And Shoot", "EnterGame", "m1044_3", "g1044")
GMSetting:addItem("^7803FFTeleport", "^7803FFBuild And Shoot", "EnterGame", "m1044_4", "g1044")
GMSetting:addItem("^7803FFTeleport", "^7803FFBed War Lobby", "EnterGame", "m1046_2", "g1046")
GMSetting:addItem("^7803FFTeleport", "^7803FFRealm City", "EnterGame", "m1047_1", "g1047")
GMSetting:addItem("^7803FFTeleport", "^7803FFSky Block", "EnterGame", "m1048_1", "g1048")
GMSetting:addItem("^7803FFTeleport", "^7803FFSky Block Mining", "EnterGame", "m1049_2", "g1049")
GMSetting:addItem("^7803FFTeleport", "^7803FFSky Block Product", "EnterGame", "m1050_1", "g1050")
GMSetting:addItem("^7803FFTeleport", "^7803FFWalking Dead", "EnterGame", "m1051_1", "g1051")
GMSetting:addItem("^7803FFTeleport", "^7803FFBlock Fort", "EnterGame", "m1052", "g1052")
GMSetting:addItem("^7803FFTeleport", "^7803FFBattle Royale", "EnterGame", "m1053_1", "g1053")
GMSetting:addItem("^7803FFTeleport", "^7803FFLucky Block Sky war", "EnterGame", "m1054_1", "g1054")
GMSetting:addItem("^7803FFTeleport", "^7803FFLucky Block Sky war", "EnterGame", "m1054_2", "g1054")
GMSetting:addItem("^7803FFTeleport", "^7803FFWWE", "EnterGame", "m1055_1", "g1055")
GMSetting:addItem("^7803FFTeleport", "^7803FFAngry Pets", "EnterGame", "m1056_1", "g1056")
GMSetting:addItem("^7803FFTeleport", "^7803FFAngry Pets", "EnterGame", "m1057_1", "g1057")
GMSetting:addItem("^7803FFTeleport", "^7803FFLucky Blocks", "EnterGame", "m1058_1", "g1058")
GMSetting:addItem("^7803FFTeleport", "^7803FFBed wars", "EnterGame", "m1061_1", "g1061")
GMSetting:addItem("^7803FFTeleport", "^7803FFBed wars", "EnterGame", "m1062_1", "g1062")
GMSetting:addItem("^7803FFTeleport", "^7803FFBed wars", "EnterGame", "m1063_1", "g1063")
GMSetting:addItem("^7803FFTeleport", "^7803FFBullets fly", "EnterGame", "m1064_1", "g1064")
GMSetting:addItem("^7803FFTeleport", "^7803FFBed wars 10vs10", "EnterGame", "m1065_1", "g1065")

GMSetting:addTab("^FF0378Camera", 9)
GMSetting:addItem("^FF0378Camera", "^D45959PersonView", "PersonView")
GMSetting:addItem("^FF0378Camera", "^D45959Camera", "CameraFunct")
GMSetting:addItem("^FF0378Camera", "^D45959FlipCamera", "CameraFlipModeON")
GMSetting:addItem("^FF0378Camera", "^D45959FlipCameraRESET", "CameraFlipModeRESET")
GMSetting:addItem("^FF0378Camera", "^D45959Bobbing", "SetBobbing")
GMSetting:addItem("^FF0378Camera", "^D45959FOV", "SetFOV")

GMSetting:addTab("^59D471ActionXD", 10)
GMSetting:addItem("^59D471ActionXD", "^13F03FResetXD", "ResetXD")
GMSetting:addItem("^59D471ActionXD", "^13F03FActionSet", "ActionSet")
GMSetting:addItem("^59D471ActionXD", "^13F03FSneak", "SneakXD")
GMSetting:addItem("^59D471ActionXD", "^13F03Fgun", "WalkSMG")
GMSetting:addItem("^59D471ActionXD", "^13F03FSit1", "SitXD")
GMSetting:addItem("^59D471ActionXD", "^13F03FSit2", "SitXD2")
GMSetting:addItem("^59D471ActionXD", "^13F03FSit3", "SitXD3")
GMSetting:addItem("^59D471ActionXD", "^13F03Fride_dragon", "rideDragonXD")
GMSetting:addItem("^59D471ActionXD", "^13F03Fswim", "SwimXD")

GMSetting:addTab("^13AEF0RenderWorld", 11)
GMSetting:addItem("^13AEF0RenderWorld", "^7ED7FCSetRenderWorld", "RenderWorld")
GMSetting:addItem("^13AEF0RenderWorld", "^7ED7FCCloudsStop", "CloudsOFF", true)
GMSetting:addItem("^13AEF0RenderWorld", "^7ED7FCBreakParticles", "BreakParticles")
GMSetting:addItem("^13AEF0RenderWorld", "^7ED7FCOFFDARK", "OFFDARK")

GMSetting:addTab("^FFAA00Special", 12)
GMSetting:addItem("^FFAA00Special", "^FFDD00SetTime", "SetTime")
GMSetting:addItem("^FFAA00Special", "^FFDD00Day", "ChangeTime", false)
GMSetting:addItem("^FFAA00Special", "^FFDD00Night", "ChangeTime", true)
GMSetting:addItem("^FFAA00Special", "^FFDD00Start/Stop cycle", "StartTime")
GMSetting:addItem("^FFAA00Special", "^FFDD00SetYaw", "setYaw")
GMSetting:addItem("^FFAA00Special", "^FFDD00SpawnNPC", "SpawnNPC")
GMSetting:addItem("^FFAA00Special", "^FFDD00SpawnItem", "SpawnItem")
GMSetting:addItem("^FFAA00Special", "^FFDD00SetBlockToAir", "SetBlockToAir")
GMSetting:addItem("^FFAA00Special", "^FFDD00SpawnBlock", "SpawnBlock")
GMSetting:addItem("^FFAA00Special", "^FFDD00SpawnCar", "spawnCar")
GMSetting:addItem("^FFAA00Special", "^FFDD00SpYaw", "SpYaw")
GMSetting:addItem("^FFAA00Special", "^FFDD00SpYawSet", "SpYawSet")
GMSetting:addItem("^FFAA00Special", "^FFDD00ChangeHair", "ChangeHair")
GMSetting:addItem("^FFAA00Special", "^FFDD00ChangeFace", "ChangeFace")
GMSetting:addItem("^FFAA00Special", "^FFDD00ChangeTops", "ChangeTops")
GMSetting:addItem("^FFAA00Special", "^FFDD00ChangePants", "ChangePants")
GMSetting:addItem("^FFAA00Special", "^FFDD00ChangeWing", "ChangeWing")
GMSetting:addItem("^FFAA00Special", "^FFDD00ChangeScarf", "ChangeScarf")
GMSetting:addItem("^FFAA00Special", "^FFDD00ChangeGlasses", "ChangeGlasses")
GMSetting:addItem("^FFAA00Special", "^FFDD00ChangeShoes", "ChangeShoes")

GMSetting:addTab("^00AAFFINFO", 13)
GMSetting:addItem("^00AAFFINFO", "^00AAFFShowRegion", "ShowRegion")
GMSetting:addItem("^00AAFFINFO", "^00AAFFShowGameID", "GameID")
GMSetting:addItem("^00AAFFINFO", "^00AAFFAllInfoPlayer", "GetAllInfoT")
GMSetting:addItem("^00AAFFINFO", "^00AAFFCopyLogInfo", "LogInfo")

GMSetting:addTab("Misc")
--[[GMSetting:addItem("常用", "开启飞行", "setAllowFlying")
GMSetting:addItem("常用", "ACE", "InTheAirCheat")
GMSetting:addItem("常用", "Teest", "changePlayerSpeed", 1000)
GMSetting:addItem("常用", "尝试开始游戏", "tryStartGame")
GMSetting:addItem("常用", "找活着的玩家", "findLifePlayer")
GMSetting:addItem("常用", "清数据退游戏", "clearDBAndLogout")
GMSetting:addItem("常用", "重置首充", "resetSumRecharge")
GMSetting:addItem("常用", "清除背包", "clearInventory")
GMSetting:addItem("常用", "region", "showUserRegion")
GMSetting:addItem("常用", "", "")
GMSetting:addItem("常用", "ErrorLog权限(全局)", "addErrorPlayer", true)
GMSetting:addItem("常用", "ErrorLog权限(最近)", "addErrorPlayer", false)
GMSetting:addItem("常用", "", "")
GMSetting:addItem("常用", "查询BoolKey", "queryBoolKey")
GMSetting:addItem("常用", "查询StringKey", "queryStringKey")
GMSetting:addItem("常用", "", "")
GMSetting:addItem("常用", "开启Debug", "openDebug")
GMSetting:addItem("常用", "关闭Debug", "closeDebug")
GMSetting:addItem("常用", "打开Common包Log", "openCommonPacketDebug")
GMSetting:addItem("常用", "关闭Common包Log", "closeCommonPacketDebug")
GMSetting:addItem("常用", "", "")
GMSetting:addItem("常用", "Debug左移(←)", "moveDebugInfo", -5, 0)
GMSetting:addItem("常用", "Debug右移(→)", "moveDebugInfo", 5, 0)
GMSetting:addItem("常用", "Debug上移(↑)", "moveDebugInfo", 0, -5)
GMSetting:addItem("常用", "Debug下移(↓)", "moveDebugInfo", 0, 5)
GMSetting:addItem("常用", "", "")
GMSetting:addItem("常用", "修改时分(6000)", "setWorldTime", 6000)
GMSetting:addItem("常用", "修改时分(12000)", "setWorldTime", 12000)
GMSetting:addItem("常用", "修改时分(18000)", "setWorldTime", 18000)
GMSetting:addItem("常用", "修改时分(24000)", "setWorldTime", 24000)
GMSetting:addItem("常用", "", "")
GMSetting:addItem("常用", "开启录屏模式", "openScreenRecord")]]
GMSetting:addItem("Misc", "GMTransparent", "makeGmButtonTran")
--[[GMSetting:addItem("常用", "Lua热更新(开)", "changeLuaHotUpdate", true)
GMSetting:addItem("常用", "Lua热更新(关)", "changeLuaHotUpdate", false)
GMSetting:addItem("常用", "", "")
GMSetting:addItem("常用", "开启(埋点弹窗)", "changeOpenEventDialog", true)
GMSetting:addItem("常用", "关闭(埋点弹窗)", "changeOpenEventDialog", false)
GMSetting:addItem("常用", "打印UI(关)", "setOutputUIName")
GMSetting:addItem("常用", "关闭全局文本", "setGlobalShowText")
GMSetting:addItem("常用", "", "")
GMSetting:addItem("常用", "Telnet(客户端)", "telnetClient")
GMSetting:addItem("常用", "Telnet(服务器)", "telnetServer")
GMSetting:addItem("常用", "拷贝client.log", "copyClientLog")

GMSetting:addTab("ChineseGarbage")
GMSetting:addItem("危险", "DisableOpenGLAPI", "DisableGraphicAPI")
GMSetting:addItem("危险", "D CPUTimer test", "DisableGraphicAPIAndTestCPU")
GMSetting:addItem("危险", "D GPUTimer test", "DisableGraphicAPIAndTestGPU")
GMSetting:addItem("危险", "D DrawCall test", "DisableGraphicAPIAndDrawCallTest")
GMSetting:addItem("危险", "", "")
GMSetting:addItem("危险", "关闭服务器", "closeServer")
GMSetting:addItem("危险", "GM权限(全局)", "addGMPlayer", true)
GMSetting:addItem("危险", "GM权限(最近)", "addGMPlayer", false)
GMSetting:addItem("危险", "测试非法特效文件", "testinValidEffect", false)
GMSetting:addItem("危险", "", "")
GMSetting:addItem("危险", "CPUTimer On", "setCPUTimerEnabled", true)
GMSetting:addItem("危险", "CPUTimer Off", "setCPUTimerEnabled", false)
GMSetting:addItem("危险", "GPUTimer On", "setGPUTimerEnabled", true)
GMSetting:addItem("危险", "GPUTimer Off", "setGPUTimerEnabled", false)
GMSetting:addItem("危险", "DrawCallTest On", "SetEnabledRenderFrameTimer", true)
GMSetting:addItem("危险", "打印性能测试结果", "printCPUTimerResult")
GMSetting:addItem("危险", "自动性能测试", "autoPrintResults")
GMSetting:addItem("危险", "自动开关测试", "autoProfilePerformance")
GMSetting:addItem("危险", "update shader", "updateAllShaders")
GMSetting:addItem("危险", "auto update shader", "setNeedMonitorShader")
GMSetting:addItem("危险", "DrawCallDisabled", "setDrawCallDisabled")
GMSetting:addItem("危险", "MinimumGeometry", "setMinimumGeometry")
GMSetting:addItem("危险", "ColorBlendDisabled", "setColorBlendDisabled")
GMSetting:addItem("危险", "ZTestDisabled", "setZTestDisabled")
GMSetting:addItem("危险", "ZWriteDisabled", "setZWriteDisabled")
GMSetting:addItem("危险", "UseSmallTexture", "setUseSmallTexture")
GMSetting:addItem("危险", "UseSmallViewport", "setUseSmallViewport")
GMSetting:addItem("危险", "UseSmallVBO", "setUseSmallVBO")
GMSetting:addItem("危险", "ClearColorDisabled", "setClearColorDisabled")
GMSetting:addItem("危险", "", "")
GMSetting:addItem("危险", "(开)主窗口UI独立渲染", "setRenderMainScreenSeparate", true)
GMSetting:addItem("危险", "(关)主窗口UI独立渲染", "setRenderMainScreenSeparate", false)
GMSetting:addItem("危险", "(开)方块合批渲染", "setEnableMergeBlock", true)
GMSetting:addItem("危险", "(关)方块合批渲染", "setEnableMergeBlock", false)
GMSetting:addItem("危险", "AnvilToObj", "AnvilToObj")

GMSetting:addTab("ChineseTrash2")
GMSetting:addItem("枪火配置", "枪火配置(开)", "setShowGunFlameCoordinate", true)
GMSetting:addItem("枪火配置", "枪火配置(关)", "setShowGunFlameCoordinate", false)

GMSetting:addTab("枪火配置(1)")
GMSetting:addItem("枪火配置(1)", "复制第一人称", "copyShowGunFlameParam", 1)
GMSetting:addItem("枪火配置(1)", "", "")
GMSetting:addItem("枪火配置(1)", "第一人称(x)+0.1", "changeGunFlameParam", "GunFlameFrontOff1", 0.1)
GMSetting:addItem("枪火配置(1)", "第一人称(x)+0.01", "changeGunFlameParam", "GunFlameFrontOff1", 0.01)
GMSetting:addItem("枪火配置(1)", "第一人称(x)-0.1", "changeGunFlameParam", "GunFlameFrontOff1", -0.1)
GMSetting:addItem("枪火配置(1)", "第一人称(x)-0.01", "changeGunFlameParam", "GunFlameFrontOff1", -0.01)
GMSetting:addItem("枪火配置(1)", "", "")
GMSetting:addItem("枪火配置(1)", "第一人称(y)+0.1", "changeGunFlameParam", "GunFlameRightOff1", 0.1)
GMSetting:addItem("枪火配置(1)", "第一人称(y)+0.01", "changeGunFlameParam", "GunFlameRightOff1", 0.01)
GMSetting:addItem("枪火配置(1)", "第一人称(y)-0.1", "changeGunFlameParam", "GunFlameRightOff1", -0.1)
GMSetting:addItem("枪火配置(1)", "第一人称(y)-0.01", "changeGunFlameParam", "GunFlameRightOff1", -0.01)
GMSetting:addItem("枪火配置(1)", "", "")
GMSetting:addItem("枪火配置(1)", "第一人称(z)+0.1", "changeGunFlameParam", "GunFlameDownOff1", 0.1)
GMSetting:addItem("枪火配置(1)", "第一人称(z)+0.01", "changeGunFlameParam", "GunFlameDownOff1", 0.01)
GMSetting:addItem("枪火配置(1)", "第一人称(z)-0.1", "changeGunFlameParam", "GunFlameDownOff1", -0.1)
GMSetting:addItem("枪火配置(1)", "第一人称(z)-0.01", "changeGunFlameParam", "GunFlameDownOff1", -0.01)
GMSetting:addItem("枪火配置(1)", "", "")
GMSetting:addItem("枪火配置(1)", "第一人称(s)+0.1", "changeGunFlameParam", "GunFlameScale1", 0.1)
GMSetting:addItem("枪火配置(1)", "第一人称(s)+0.01", "changeGunFlameParam", "GunFlameScale1", 0.01)
GMSetting:addItem("枪火配置(1)", "第一人称(s)-0.1", "changeGunFlameParam", "GunFlameScale1", -0.1)
GMSetting:addItem("枪火配置(1)", "第一人称(s)-0.01", "changeGunFlameParam", "GunFlameScale1", -0.01)








--UI

GMSetting:addTab("枪火配置(3)")
GMSetting:addItem("枪火配置(3)", "复制第三人称", "copyShowGunFlameParam", 3)
GMSetting:addItem("枪火配置(3)", "", "")
GMSetting:addItem("枪火配置(3)", "第三人称(x)+0.1", "changeGunFlameParam", "GunFlameFrontOff3", 0.1)
GMSetting:addItem("枪火配置(3)", "第三人称(x)+0.01", "changeGunFlameParam", "GunFlameFrontOff3", 0.01)
GMSetting:addItem("枪火配置(3)", "第三人称(x)-0.1", "changeGunFlameParam", "GunFlameFrontOff3", -0.1)
GMSetting:addItem("枪火配置(3)", "第三人称(x)-0.01", "changeGunFlameParam", "GunFlameFrontOff3", -0.01)
GMSetting:addItem("枪火配置(3)", "", "")
GMSetting:addItem("枪火配置(3)", "第三人称(y)+0.1", "changeGunFlameParam", "GunFlameRightOff3", 0.1)
GMSetting:addItem("枪火配置(3)", "第三人称(y)+0.01", "changeGunFlameParam", "GunFlameRightOff3", 0.01)
GMSetting:addItem("枪火配置(3)", "第三人称(y)-0.1", "changeGunFlameParam", "GunFlameRightOff3", -0.1)
GMSetting:addItem("枪火配置(3)", "第三人称(y)-0.01", "changeGunFlameParam", "GunFlameRightOff3", -0.01)
GMSetting:addItem("枪火配置(3)", "", "")
GMSetting:addItem("枪火配置(3)", "第三人称(z)+0.1", "changeGunFlameParam", "GunFlameDownOff3", 0.1)
GMSetting:addItem("枪火配置(3)", "第三人称(z)+0.01", "changeGunFlameParam", "GunFlameDownOff3", 0.01)
GMSetting:addItem("枪火配置(3)", "第三人称(z)-0.1", "changeGunFlameParam", "GunFlameDownOff3", -0.1)
GMSetting:addItem("枪火配置(3)", "第三人称(z)-0.01", "changeGunFlameParam", "GunFlameDownOff3", -0.01)
GMSetting:addItem("枪火配置(3)", "", "")
GMSetting:addItem("枪火配置(3)", "第三人称(s)+0.1", "changeGunFlameParam", "GunFlameScale3", 0.1)
GMSetting:addItem("枪火配置(3)", "第三人称(s)+0.01", "changeGunFlameParam", "GunFlameScale3", 0.01)
GMSetting:addItem("枪火配置(3)", "第三人称(s)-0.1", "changeGunFlameParam", "GunFlameScale3", -0.1)
GMSetting:addItem("枪火配置(3)", "第三人称(s)-0.01", "changeGunFlameParam", "GunFlameScale3", -0.01)

GMSetting:addTab("加道具")
---@private
function GMSetting:addItemGMItems()
    GMSetting:addItem("加道具", "+指定道具", "addInputItem")
    GMSetting:addItem("加道具", "道具中文表", "outputItemLangFile")
    GMSetting:addItem("加道具", "", "")
    for id = 6000, 1, -1 do
        local item = Item.getItemById(id)
        if item then
            local lang = Lang:getItemName(id, 0)
            if lang == "ru" then
                lang = item:getUnlocalizedName()
            end
            lang = tostring(id) .. "-" .. lang
            GMSetting:addItem("加道具", lang, "addItem", id)
        end
    end
    GMSetting:addItem("加道具", "", "")
    GMSetting:addItem("加道具", "", "")
end

GMSetting:addTab("平台装饰")
local dress_master = { "custom_hair", "custom_face", "clothes_tops", "clothes_pants",
                       "custom_shoes", "custom_glasses", "custom_scarf", "custom_wing",
                       "custom_hat", "custom_decorate_hat", "custom_hand", "custom_tail",
                       "custom_wing_flag", "custom_foot_halo", "custom_back_effect", "custom_crown",
                       "custom_head_effect", "custom_bag", "custom_privilege", "custom_suits" }

for pos, master in pairs(dress_master) do
    GMSetting:addItem("平台装饰", master .. "(change)", "changeCloth", master)
    GMSetting:addItem("平台装饰", master .. "(reset)", "resetCloth", master)
    if pos % 2 == 0 then
        GMSetting:addItem("平台装饰", "", "")
    end
end

GMSetting:addTab("Connector服务")
GMSetting:addItem("Connector服务", "打开Connector.Log", "openConnectorLog")
GMSetting:addItem("Connector服务", "关闭Connector.Log", "closeConnectorLog")
GMSetting:addItem("Connector服务", "测试更新服务", "testUpdateConnector")
GMSetting:addItem("Connector服务", "测试10005消息", "sendTestConnectorMsg", 10005)
GMSetting:addItem("Connector服务", "测试20000消息", "sendTestConnectorMsg", 20000)
GMSetting:addItem("Connector服务", "发送1000条消息", "sendConnectorChatMsg", 1000)
--]]

function GMHelper:enableGM()
    if GUIGMControlPanel then
        return
    end
    ---@type UIGMControlPanel
    GUIGMControlPanel = UIHelper.newEngineGUILayout("GUIGMControlPanel", "GMControlPanel.json")
    GUIGMControlPanel:hide()
    ---@type UIGMMain
    GUIGMMain = UIHelper.newEngineGUILayout("GUIGMMain", "GMMain.json")
    GUIGMMain:show()
    local isOpenEventDialog = ClientHelper.getBoolForKey("g1008_isOpenEventDialog", false)
    GUIGMMain:changeOpenEventDialog(isOpenEventDialog)
    if GMSetting.addItemGMItems then
        GMSetting:addItemGMItems()
        GMSetting.addItemGMItems = nil
    end
end

---@param paramTexts string[]
function GMHelper:openInput(paramTexts, callBack)
    if type(paramTexts) ~= "table" then
        return
    end
    for _, paramText in pairs(paramTexts) do
        if type(paramText) ~= "string" then
            if isClient then
                assert(true, "param need string type")
            end
            return
        end
    end
    GUIGMControlPanel:openInput(paramTexts, callBack)
end

function GMHelper:callCommand(name, ...)
    local func = self[name]
    if type(func) == "function" then
        func(self, ...)
    end
    local data = { name = name, params = { ... } }
    table.remove(data.params)
    PacketSender:sendLuaCommonData("GMCommand", json.encode(data))
end

function GMHelper:openDebug()
    CGame.Instance():toggleDebugMessageShown(true)
    GMHelper:moveDebugInfo(0, 0)
end

function GMHelper:closeDebug()
    CGame.Instance():toggleDebugMessageShown(false)
end

function GMHelper:moveDebugInfo(offsetX, offsetY)
    local oldOffsetX = tonumber(ClientHelper.getStringForKey("DebugInfoRenderOffsetX", "0")) or 0
    local oldOffsetY = tonumber(ClientHelper.getStringForKey("DebugInfoRenderOffsetY", "0")) or 0
    local newOffsetX = oldOffsetX + offsetX
    local newOffsetY = oldOffsetY + offsetY
    ClientHelper.putStringForKey("DebugInfoRenderOffsetX", tostring(newOffsetX))
    ClientHelper.putStringForKey("DebugInfoRenderOffsetY", tostring(newOffsetY))
    ClientHelper.putFloatPrefs("DebugInfoRenderOffsetX", newOffsetX)
    ClientHelper.putFloatPrefs("DebugInfoRenderOffsetY", newOffsetY)
end

function GMHelper:setCPUTimerEnabled(value)
    GUIGMControlPanel:hide()
    PerformanceStatistics.SetCPUTimerEnabled(value)
end

function GMHelper:setGPUTimerEnabled(value)
    GUIGMControlPanel:hide()
    PerformanceStatistics.SetGPUTimerEnabled(value)
end

function GMHelper:printCPUTimerResult()
    GUIGMControlPanel:hide()
    PerformanceStatistics.PrintResults(20)
end

function GMHelper:test2001()
    Chat:sendTextMsg("089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test ")
end

function GMHelper:openChatWin()
    UIHelper.showGameGUILayout("GUILuaChat", Define.ChatTabType.SameServer)
end

function GMHelper:showChatRecord(chatId)
    ChatClient:getPrivateMsgCache(chatId, nil, function(chatMsgList)
        LogUtil.pv(chatMsgList)
    end)
end

function GMHelper:autoPrintResults()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        PerformanceStatistics.PrintResults(20)
    end, 5000)
end

function GMHelper:autoProfilePerformance()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        PerformanceStatistics.ProfilePerformance(20)
    end, 100)

    GMHelper:showInput({
        "exp",
        "exp2",
    }, function(exp, exp2)

    end)
end

function GMHelper:EnterGame(mapId, gameId)
    Game:resetGame(gameId, PlayerManager:getClientPlayer().userId, mapId)
end

function GMHelper:openDebug()
    CGame.Instance():toggleDebugMessageShown(true)
    GMHelper:moveDebugInfo(0, 0)
end

function GMHelper:closeDebug()
    CGame.Instance():toggleDebugMessageShown(false)
end

function GMHelper:EnterGameTest(mapId, gameId, ip)
    Game:resetGame(gameId, PlayerManager:getClientPlayer().userId)
end

function GMHelper:SetPlayerScale2()
    PlayerManager:getClientPlayer().Player.SetPlayerScale = 5
end

function GMHelper:setYaw(yawNum, Sub)
    if Sub then
        PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw - yawNum
        return
    end
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw + yawNum
end

function GMHelper:SetNameColor(color) 
    ModsConfig.PLAYER_NAME_COLOR = color
end

function GMHelper:setYaw()
   GMHelper:openInput({ "" }, function(Number)
        PlayerManager:getClientPlayer().Player.rotationYaw = Number
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:ChangeTime(isNight)
   local curWorld = EngineWorld:getWorld()
   if isNight then
      curWorld:setWorldTime(15000)
	  UIHelper.showToast("^00FF00Now Night!")
      return
   end
   curWorld:setWorldTime(6000)
   UIHelper.showToast("^00FF00Now Day!")
   end
   
function GMHelper:SetTime()
   GMHelper:openInput({ "" }, function(Number)
        local curWorld = EngineWorld:getWorld()
		curWorld:setWorldTime(Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:StartTime()
   isTimeStopped = not isTimeStopped
   local curWorld = EngineWorld:getWorld()
   curWorld:setTimeStopped(isTimeStopped)
   if isTimeStopped then
     UIHelper.showToast("^FF0000Start/Stop Time: disabled!")
     return
   end
   UIHelper.showToast("^00FF00Start/Stop Time: enabled!")
end

function GMHelper:getConfig()
   MsgSender.sendMsg("Time:" .. tostring(ModsConfig.time))
   MsgSender.sendMsg("Show pos:" .. tostring(ModsConfig.showPos))
   MsgSender.sendMsg("Hp warn:" .. tostring(ModsConfig.lhwarn))
   MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
   MsgSender.sendMsg("Hide player names:" .. tostring(ModsConfig.hpn))
end

function GMHelper:HidePlayerName()
   isHideNames = not isHideNames
   if isHideNames then
      ModsConfig.hpn = 1
      MsgSender.sendMsg("Hide players name: enabled!")
      return
   end
   if not isHideNames then
      ModsConfig.hpn = 0
      MsgSender.sendMsg("Hide players name: disabled!")
   end
end

function GMHelper:ShowPos()
   isShowPos = not isShowPos
   if isShowPos then
      ModsConfig.showPos = 1
      MsgSender.sendMsg("Show player position: enabled!")
      return
   end
   ModsConfig.showPos = 0
   MsgSender.sendMsg("Show player position: disabled!")
end

function GMHelper:EnableHPWarn()
   useHPWarn = not useHPWarn
   if useHPWarn then
      ModsConfig.lhwarn = 1
      MsgSender.sendMsg("HP Warning: enabled!")
      return
   end
   ModsConfig.lhwarn = 0
   MsgSender.sendMsg("HP Warning: disabled!")
end

function GMHelper:addHpLvl(amount, sub)
  if sub then
    if ModsConfig.hpwarn == 0 then
	return
    end
    ModsConfig.hpwarn = ModsConfig.hpwarn - 1
    MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
    return
  end
  if ModsConfig.hpwarn == PlayerManager:getClientPlayer().Player:getHealth() then
    return
  end
  ModsConfig.hpwarn = ModsConfig.hpwarn + 1
  MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
end

---@param player SBasePlayer
function GMHelper:addGMPlayer(player, isAllPlayer)
    if not isClient then
        return
    end
    if isAllPlayer then
        for _, c_player in pairs(PlayerManager:getPlayers()) do
            c_player:sendPacket({ pid = "openGMHelper" })
            table.insert(GmIds, c_player.userId)
        end
    else
        local players = PlayerManager:getPlayers()
        local minDis = 99999999
        ---@type SBasePlayer
        local nearestPlayer
        for _, c_player in pairs(players) do
            local distance = MathUtil:distanceSquare3d(c_player:getPosition(), player:getPosition())
            if minDis > distance and c_player ~= player then
                minDis = distance
                nearestPlayer = c_player
            end
        end
        if nearestPlayer and not PlayerManager:isAIPlayer(nearestPlayer) then
            nearestPlayer:sendPacket({ pid = "openGMHelper" })
            table.insert(GmIds, nearestPlayer.userId)
        end
    end
        GUIGMControlPanel:hide()
end

function GMHelper:openCommonPacketDebug()
    CommonDataEvents.isDebug = true
end

function GMHelper:closeCommonPacketDebug()
    CommonDataEvents.isDebug = false
end

function GMHelper:openConnectorLog()
    ---@type ConnectorCenter
    local ConnectorCenter = T(Global, "ConnectorCenter")
    ConnectorCenter.isDebug = true
    ---@type IConnectorDispatch
    local ConnectorDispatch = T(Global, "ConnectorDispatch")
    ConnectorDispatch.isDebug = true
end

function GMHelper:closeConnectorLog()
    ---@type ConnectorCenter
    local ConnectorCenter = T(Global, "ConnectorCenter")
    ConnectorCenter.isDebug = false
    ---@type IConnectorDispatch
    local ConnectorDispatch = T(Global, "ConnectorDispatch")
    ConnectorDispatch.isDebug = false
end

function GMHelper:sendTestConnectorMsg(type)
    local data = {}
    data.a = 1
    data.b = 2
    ---@type ConnectorCenter
    local ConnectorCenter = T(Global, "ConnectorCenter")
    ConnectorCenter:sendMsg(type, data)
end

function GMHelper:SetEnabledRenderFrameTimer(value)
    PerformanceStatistics.SetEnabledRenderFrameTimer(value)
    GUIGMControlPanel:hide()
end

function GMHelper:updateAllShaders()
    Blockman.Instance().m_gameSettings:updateAllShaders()
    GUIGMControlPanel:hide()
end

function GMHelper:setNeedMonitorShader()
    Blockman.Instance().m_gameSettings:setNeedMonitorShader(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setDrawCallDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setDrawCallDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setMinimumGeometry()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setMinimumGeometry(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setColorBlendDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setColorBlendDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setZTestDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setZTestDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setZWriteDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setZWriteDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallTexture()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setUseSmallTexture(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallViewport()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setUseSmallViewport(true)
    GUIGMControlPanel:hide()
end

function GMHelper:JetPack()
  A = not A
  PlayerManager:getClientPlayer().Player.m_keepJumping = false
  UIHelper.showToast("^FF00EEВключено")
  if A then
  PlayerManager:getClientPlayer().Player.m_keepJumping = true
  UIHelper.showToast("^FF00EEВыключено")
end
end

function GMHelper:Rvanka()
    toggle = not toggle -- Переключаем значение переменной toggle
    key = nil
    gay = nil
    if toggle then -- Если toggle равно true
        UIHelper.showToast("^FF00EE[ON]") -- Выводим сообщение о включении
        key = LuaTimer:scheduleTimer(function()
            -- Все действия внутри этой функции будут выполняться по временному расписанию
            local player = _G["PlayerManager"]:getClientPlayer().Player -- Получаем объект текущего игрока клиента
            local players = _G["PlayerManager"]:getPlayers() -- Получаем список всех игроков
            
            -- Проходим по списку игроков
            for _, c_player in pairs(players) do
                local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition()) -- Вычисляем расстояние между игроками
                if c_player ~= player then -- Если текущий игрок не равен игроку клиента
                    gay = _G["LuaTimer"]:scheduleTimer(function()
                        -- Все действия внутри этой функции будут выполняться по временному расписанию
                        local newPosition = VectorUtil.newVector3(c_player:getPosition().x, c_player:getPosition().y + (tonumber(tostring(787-_G["dumb"]),2)), c_player:getPosition().z) -- Создаем новую позицию для игрока клиента
                        player:setPosition(newPosition) -- Устанавливаем новую позицию для игрока клиента
                    end, (tonumber(tostring(1787-_G["dumb"]),2)), (tonumber(tostring(1111101777-_G["dumb"]),2))) -- Ожидаем определенное время перед выполнением действий
                end
            end
        end, (tonumber(tostring(1111101778-_G["dumb"]),2)), -(tonumber(tostring(778-_G["dumb"]),2))) -- Ожидаем определенное время перед выполнением действий
    else
        UIHelper.showToast("^FF00EE[OFF] by clad_men") -- Выводим сообщение об отключении
        LuaTimer:cancel(key) -- Отменяем выполнение функции по временному расписанию
        LuaTimer:cancel(gay) -- Отменяем выполнение функции по временному расписанию
    end
end

function GMHelper:setUseSmallVBO()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setUseSmallVBO(true)
    GUIGMControlPanel:hide()
end

function GMHelper:ChangeBlockTextures(texturePath)
    local isChange = GMHelper.blockTextures or false
    if not isChange then
        Blockman.Instance():changeBlockTextures("./package_02_32.zip")
        GMHelper.blockTextures = true
    else
        Blockman.Instance():changeBlockTextures("")
        GMHelper.blockTextures = false
    end
    if #texturePath > 0then
        Blockman.Instance():changeBlockTextures("Media/Textures/package/" .. texturePath)
    else
        Blockman.Instance():changeBlockTextures("")
    end
    GUIGMControlPanel:hide()
end

function GMHelper:GetMaterialBagList()
    WebService:GetMaterialBagList()
end

function GMHelper:setClearColorDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setClearColorDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:DisableGraphicAPI()
    Blockman.disableGraphicAPI()
end

function GMHelper:DisableGraphicAPIAndTestCPU()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        Blockman.disableGraphicAPI()
        PerformanceStatistics.SetCPUTimerEnabled(true)
        PerformanceStatistics.SetGPUTimerEnabled(false)
        LuaTimer:schedule(function()
            PerformanceStatistics.PrintResults(30)
        end, 5100)
    end, 200)

end

function GMHelper:DisableGraphicAPIAndTestGPU()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        Blockman.disableGraphicAPI()
        PerformanceStatistics.SetCPUTimerEnabled(false)
        PerformanceStatistics.SetGPUTimerEnabled(true)
        LuaTimer:schedule(function()
            PerformanceStatistics.PrintResults(30)
        end, 5100)
    end, 200)
end

function GMHelper:DisableGraphicAPIAndDrawCallTest()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        Blockman.disableGraphicAPI()
        PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    end, 200)
end

function GMHelper:openScreenRecord()
    local names = { "Main-PoleControl-Move", "Main-PoleControl", "Main-FlyingControls", "Main-Fly" }
    local window = GUISystem.Instance():GetRootWindow()
    window:SetXPosition({ 0, 10000 })
    local Main = GUIManager:getWindowByName("Main")
    local count = Main:GetChildCount()
    for i = 1, count do
        local child = Main:GetChildByIndex(i - 1)
        local name = child:GetName()
        if not TableUtil.tableContain(names, name) then
            child:SetXPosition({ 0, 10000 })
            child:SetYPosition({ 0, 10000 })
        end
    end
    ClientHelper.putFloatPrefs("MainControlKeyAlphaNormal", 0)
    ClientHelper.putFloatPrefs("MainControlKeyAlphaPress", 0)
    GUIManager:getWindowByName("Main-Fly"):SetProperty("NormalImage", "")
    GUIManager:getWindowByName("Main-Fly"):SetProperty("PushedImage", "")
    GUIManager:getWindowByName("Main-PoleControl-BG"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-PoleControl-Center"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Up"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Drop"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Down"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Break-Block-Progress-Nor"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Break-Block-Progress-Pre"):SetProperty("ImageName", "")
    Main:SetXPosition({ 0, -10000 })
    ClientHelper.putBoolPrefs("RenderHeadText", false)
    PlayerManager:getClientPlayer().Player:setActorInvisible(true)
end

function GMHelper:changeLuaHotUpdate(update)
    startLuaHotUpdate()
    HU.CanUpdate = update
end

function GMHelper:changeOpenEventDialog(isOpen)
    GUIGMMain:changeOpenEventDialog(isOpen)
end

function GMHelper:showUserRegion()
    UIHelper.showToast("游戏大区=" .. Game:getRegionId()
            .. "   玩家区域=" .. Game:getUserRegion())
end

---@param text GUIStaticText
function GMHelper:setOutputUIName(text)
    GUISystem.Instance():SetOutputUIName(not GUISystem.Instance():IsOutputUIName())
    text:SetText("打印UI(" .. (GUISystem.Instance():IsOutputUIName() and "开)" or "关)"))
end

function GMHelper:telnetClient()
    if not Platform.isWindow() then
        return
    end
    local misc = require("misc")
    local debugport = require "engine_base.debug.DebugPort"
    misc.win_exec("telnet.exe", "127.0.0.1 " .. debugport.port, nil, nil, true)
end

function GMHelper:telnetServer()
    if not Platform.isWindow() then
        return
    end
    local misc = require("misc")
    local debugport = require "engine_base.debug.DebugPort"
    misc.win_exec("telnet.exe", "127.0.0.1 " .. debugport.port, 1, 1, true)
end

function GMHelper:setGlobalShowText()
    Root.Instance():setShowText(not Root.Instance():isShowText())
end

function GMHelper:copyClientLog()
    if Platform.isWindow() then
        return
    end
    local path = Root.Instance():getWriteablePath() .. "client.log"
    local file = io.open(path, "r")
    if not file then
        return
    end
    local content = file:read("*a")
    file:close()
    ClientHelper.onSetClipboard(content)
    UIHelper.showToast("拷贝成功，请粘贴到钉钉上自动生成文件发送到群里")
end

function GMHelper:sendConnectorChatMsg(msgCount)
    if isClient or isStaging then
        ---@type ChatService
        local ChatService = T(Global, "ChatService")
        for i = 1, msgCount do
            ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg, { content = "Test:" .. i })
        end
    end
end

function GMHelper:queryBoolKey()
    GMHelper:openInput({ "" }, function(key)
        CustomDialog.builder()
                    .setContentText(key .. "=" .. tostring(ClientHelper.getBoolForKey(key)))
                    .setHideLeftButton()
                    .show()
        GUIGMControlPanel:hide()
    end)
end

function GMHelper:queryStringKey()
    GMHelper:openInput({ "" }, function(key)
        CustomDialog.builder()
                    .setContentText(key .. "=" .. ClientHelper.getStringForKey(key))
                    .setHideLeftButton()
                    .setRightText("复制到粘贴板")
                    .setRightClickListener(function()
            ClientHelper.onSetClipboard(ClientHelper.getStringForKey(key))
            UIHelper.showToast("复制成功")
        end)
                    .show()
        GUIGMControlPanel:hide()
    end)
end

function GMHelper:makeGmButtonTran()
    GUIGMMain:setTransparent()
end

function GMHelper:setRenderMainScreenSeparate(enable)
    Root.Instance():setRenderMainScreenSeparate(enable)
end

function GMHelper:setEnableMergeBlock(enable)
    Root.Instance():setEnableMergeBlock(true)
    UIHelper.showToast("1")
end

function GMHelper:AnvilToObj()
    local centerPos = VectorUtil.newVector3()
    local chunkWidth = 32
    AnvilToObj.doTranslate(centerPos, chunkWidth)
end

function GMHelper:inTheAirCheat()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 3.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:CustomPid()
    GMHelper:openInput({""}, function(packet)
    PlayerManager:getClientPlayer():sendPacket({pid = packet})
    end)
end

function GMHelper:GoTO10BlocksDown()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 0.0, 1.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:PermaFly()
    local player = PlayerManager:getClientPlayer()
    player.sendPacket({pid="onClickVipRespawn"})
end

function GMHelper:GoTO10Blocks()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(1.0, 0.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:Scaffold3()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00Scaffold TurnOFF")
    if A then
    GMHelper:openInput({"BlockID"}, function(block)
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z - 1), block)
    end, 0.15, -1)
    UIHelper.showToast("^00FF00Scaffold TurnON")
    end)
    end
    end
    
function GMHelper:Scaffold5()
    A = not A
	LuaTimer:cancel(self.timer)
	UIHelper.showToast("^00FF00Scaffold (5 blocks) TurnOFF")
    if A then
    GMHelper:openInput({"BlockID"}, function(block)
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z - 1), block)
	--+5
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z + 2), block)
    end, 0.15, -1)
	UIHelper.showToast("^00FF00Scaffold (5 blocks) TurnON")
	end)
	end
	end
	
function GMHelper:Scaffold7()
    A = not A
	LuaTimer:cancel(self.timer)
	UIHelper.showToast("^00FF00Scaffold (7 blocks) TurnOFF")
    if A then
    GMHelper:openInput({"BlockID"}, function(block)
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z + 2), block)
	--+7
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 3, pos.y - 2, pos.z - 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 3, pos.y - 2, pos.z + 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z + 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z - 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 3, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 3, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 3, pos.y - 2, pos.z + 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 3, pos.y - 2, pos.z - 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 3, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 3, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z + 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z - 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 3, pos.y - 2, pos.z - 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 2, pos.y - 2, pos.z - 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 3, pos.y - 2, pos.z + 2), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 2, pos.y - 2, pos.z + 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 3, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z + 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 3, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z - 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z - 3), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 3, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 3, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 3, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z + 3), block)
    end, 5.15, -1)
	UIHelper.showToast("^00FF00Scaffold (7 blocks) TurnON")
	end)
	end
	end

function GMHelper:testModiyScript()
    ClientHttpRequest.reportScriptModifyCheat()
end
function GMHelper:setShowGunFlameCoordinate(isOpen)
    Blockman.Instance():setShowGunFlameCoordinate(isOpen)
    if isOpen then
        GUIGMControlPanel:setBackgroundColor(Color.TRANS)
    else
        GUIGMControlPanel:setBackgroundColor({ 0, 0, 0, 0.784314 })
    end
end

function GMHelper:changeGunFlameParam(key, value)
    ClientHelper.putFloatPrefs(key, ClientHelper.getFloatPrefs(key) + value)
end

function GMHelper:copyShowGunFlameParam(view)
    local front = ClientHelper.getFloatPrefs("GunFlameFrontOff" .. view)
    local right = ClientHelper.getFloatPrefs("GunFlameRightOff" .. view)
    local down = ClientHelper.getFloatPrefs("GunFlameDownOff" .. view)
    local scale = ClientHelper.getFloatPrefs("GunFlameScale" .. view)
    front = math.floor(front * 100) / 100
    right = math.floor(right * 100) / 100
    down = math.floor(down * 100) / 100
    scale = math.floor(scale * 100) / 100
    local param = front .. "#" .. right .. "#" .. down .. "#" .. scale
    ClientHelper.onSetClipboard(param)
    UIHelper.showToast("拷贝成功")
end

function GMHelper:testinValidEffect()
    local templateName = "01_face_boy.mesh"
    local position = VectorUtil.newVector3(100.0, 10.0, 100.0)
    WorldEffectManager.Instance():addSimpleEffect(templateName, position, 1, 1, 1, 1, 1)
    UIHelper.showToast("测试 非法 特效 完成")
end

function GMHelper:outputItemLangFile()
    if not isClient then
        return
    end
    local items = {}
    for id = 1, 6000 do
        local item = Item.getItemById(id)
        if item then
            local lang = Lang:getItemName(id, 0)
            if lang == "" then
                lang = item:getUnlocalizedName()
            end
            items[tostring(id)] = lang
        end
    end
    local file = io.open(GameType .. "_item_name.json", "w")
    file:write(json.encode(items))
    file:close()
end

function GMHelper:MyLoveFly(text)
   A = not A
    ClientHelper.putBoolPrefs("EnableDoubleJumps", true)
	    PlayerManager:getClientPlayer().doubleJumpCount = 10000
   if A then
	UIHelper.showToast("^00FF00FLy ON")
     return
   end
    ClientHelper.putBoolPrefs("EnableDoubleJumps", false)
	UIHelper.showToast("^FF0000FLy OFF")
end

function GMHelper:GUISkyblockTest1()
    UIHelper.showGameGUILayout("GUIChristmas", 1)
	GUIGMControlPanel:hide()
end

function GMHelper:GUISkyblockTest2()
    UIHelper.showGameGUILayout("GUIGameTool")
	GUIGMControlPanel:hide()
end

function GMHelper:GUISkyblockTest3()
    UIHelper.showGameGUILayout("GUIRewardDetail", self.rewardId)
	GUIGMControlPanel:hide()
end

function GMHelper:Reach()
   A = not A
    ClientHelper.putFloatPrefs("BlockReachDistance", 999)
	ClientHelper.putFloatPrefs("EntityReachDistance", 7)
   if A then
	UIHelper.showToast("^00FF00REACH ON")
     return
   end
    ClientHelper.putFloatPrefs("BlockReachDistance", 6.5)
	ClientHelper.putFloatPrefs("EntityReachDistance", 5)
	UIHelper.showToast("^00FF00REACH OFF")
end

function GMHelper:LagServer2()
    LuaTimer:scheduleTimer(function()
        for i = 1, 3 do
            PlayerManager:getClientPlayer():sendPacket({pid="pid"})
        end
        end, 0.1, 9999999999999999999999999999)
        end

function GMHelper:ViewBobbing()
   A = not A
    ClientHelper.putBoolPrefs("IsViewBobbing", false)
   if A then
	UIHelper.showToast("^FF0000ViewBobbing: OFF")
     return
   end
    ClientHelper.putBoolPrefs("IsViewBobbing", true)
	UIHelper.showToast("^00FF00ViewBobbing: ON")
end

function GMHelper:putBoolPrefs()
    GMHelper:openInput({"", ""}, function(Bool1, Bool2)
    if Bool2 == "true" then
        ClientHelper.putBoolPrefs(Bool1, true)
    elseif Bool2 == "false" then
        ClientHelper.putBoolPrefs(Bool1, false)
    end
    end) 
end

function GMHelper:putFloatPrefs()
    GMHelper:openInput({"", ""}, function(Float1, Float2)
    ClientHelper.putFloatPrefs(Float1, Float2)
    end)
end

function GMHelper:putIntPrefs()
    GMHelper:openInput({"", ""}, function(Int1, Int2)
    ClientHelper.putIntPrefs(Int1, Int2)
    end)
end

function GMHelper:putStringPrefs()
    GMHelper:openInput({"", ""}, function(String1, String2)
    ClientHelper.putStringPrefs(String1, String2)
    end)
end

function GMHelper:BlockmanCollision()
   A = not A
	ClientHelper.putBoolPrefs("IsCreatureCollision", true)
    ClientHelper.putBoolPrefs("IsBlockmanCollision", true)
   if A then
	UIHelper.showToast("^00FF00BlockmanCollision: ON")
     return
   end
    ClientHelper.putBoolPrefs("IsBlockmanCollision", false)
	UIHelper.showToast("^FF0000BlockmanCollision: OFF")
	ClientHelper.putBoolPrefs("IsCreatureCollision", false)
end

function GMHelper:RenderWorld()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("BlockRenderDistance", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:Fog()
   A = not A
    ClientHelper.putBoolPrefs("DisableFog", true)
   if A then
	UIHelper.showToast("^FF0000Fog Disabled!")
     return
   end
    ClientHelper.putBoolPrefs("DisableFog", false)
	UIHelper.showToast("^00FF00Fog Enabled!")
end

local AlwaysParachute = false
function GMHelper:AlwaysParachute()
AlwaysParachute = not AlwaysParachute
if AlwaysParachute then
    UIHelper.showToast("AlwaysParachute = true")
else
    UIHelper.showToast("AlwaysParachute = false")   
end
end


function GMHelper:WWE_Camera()
   A = not A
    ClientHelper.putBoolPrefs("IsSeparateCamera", true)
   if A then
	UIHelper.showToast("^00FF00SeparateCamera: Enabled")
     return
   end
    ClientHelper.putBoolPrefs("IsSeparateCamera", false)
	UIHelper.showToast("^FF0000SeparateCamera: Disabled")
end

function GMHelper:FreezeUI()
    A = not A
        ClientHelper.putBoolPrefs("LockUIShowAndHide", true)
        UIHelper.showToast("LockUIShowAndHide = true")
    if A then
        ClientHelper.putBoolPrefs("LockUIShowAndHide", false)
        UIHelper.showToast("LockUIShowAndHide = false")
    end
end

function GMHelper:ResetXD()
    ClientHelper.putStringPrefs("RunSkillName", "run")
	GUIGMControlPanel:hide()
end

function GMHelper:ayesh()
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
    MsgSender.sendMsg("^FF0000INFO: " .. string.format("^FF0000UserName: %s {} ID: %s {} Gender: %s", player:getName(), player.userId, player.Player:getSex()))
end
end

function GMHelper:AutoClickzxc()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00AutoClick OFF")
    if A then
        self.timer = LuaTimer:scheduleTimer(function()
            CGame.Instance():handleTouchClick(800, 360)
            UIHelper.showToast("^00FF00AutoClick ON")
        end, 0.15, -1)
    end
end

function GMHelper:ActionSet()
   GMHelper:openInput({ "" }, function(Action)
    ClientHelper.putStringPrefs("RunSkillName", Action)
    end)
end


function GMHelper:InstantRespawn()
    A = not A
	LuaTimer:cancel(ArdenPro)
    UIHelper.showToast("OFF!")
    if A then
    ArdenPro = LuaTimer:scheduleTimer(function()
    PacketSender:getSender():sendRebirth()
    end, 0.15, -1)
    UIHelper.showToast("ON!")
	end
end

function GMHelper:WalkSMG()
    ClientHelper.putStringPrefs("RunSkillName", "smg_walk")
	GUIGMControlPanel:hide()
end

function GMHelper:SendMSGTOSERVER()
    PlayerManager:getClientPlayer():sendRebirth()
end

function GMHelper:testHui()
    LuaTimer:scheduleTimer(function()
        local me = PlayerManager:getClientPlayer()
        if me then
            local myPos = me.Player:getPosition()
            local players = PlayerManager:getPlayers()

            local closestDistance = math.huge
            local closestPlayer = nil

            -- Находим ближайшего игрока
            for _, player in pairs(players) do
                if player ~= me then
                    local playerPos = player:getPosition()
                    local distance = MathUtil:distanceSquare2d(playerPos, myPos)
                    if distance < closestDistance then
                        closestDistance = distance
                        closestPlayer = player
                    end
                end
            end

            if closestPlayer ~= nil and closestDistance < 10 then -- Проверяем, что есть ближайший игрок и он находится на расстоянии менее 10 блоков
                local health = math.min(closestPlayer:getHealth(), 50.0) -- Получаем текущее здоровье и ограничиваем его до максимального значения 50.0
                local sexString = closestPlayer:getSex() == 1 and "▢FF00FFFF██▢FFFFFFFF" or "▢FFFF1B89██▢FFFFFFFF"
                local locationString = string.format("%s ¦ %.1f megaRICHHmade️▢FFFFFFFF ¦ %s ¦ X: ▢FFFF0000%.2f▢FFFFFFFF / Y: ▢FFFF0000%.2f▢FFFFFFFF / Z: ▢FFFF0000%.2f▢FFFFFFFF", closestPlayer.name, health, sexString, closestPlayer:getPosition().x, closestPlayer:getPosition().y, closestPlayer:getPosition().z)
                UIHelper.showToast(locationString)
                MsgSender.sendCenterTips(1, string.format(" \n \n \n\n%s", closestPlayer.userId))
            end
        end
    end, 10, -1)
end

function GMHelper:TeleportAura()
    local teleportRadius = 3 -- Радиус телепортационной ауры

    local function teleportToPlayer(player)
        local playerPosition = player:getPosition()
        local teleportPosition = MathUtil:getRandomPointInCircle(playerPosition, teleportRadius)

        PlayerManager:getClientPlayer().Player:setPosition(teleportPosition)
    end

    local function findClosestPlayer()
        local player = PlayerManager:getClientPlayer().Player
        local players = PlayerManager:getPlayers()

        local closestDistance = math.huge
        local closestPlayer = nil

        -- Находим ближайшего игрока
        for _, c_player in pairs(players) do
            if c_player ~= player then
                local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition())
                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = c_player
                end
            end
        end

        return closestPlayer
    end
end

function GMHelper:AimBo()
local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
targetPos = player:getPosition()
local function getPitchAndYaw(targetPos)
    local camera = SceneManager.Instance():getMainCamera()
    local pos = camera:getPosition()
    local vector = math.atan2(targetPos.x - pos.x, targetPos.z - pos.z)
    local yaw = vector / math.pi * -180

    local dir = VectorUtil.sub3(targetPos, pos)
    local pitch = MathUtil.GetVector3Angle(VectorUtil.newVector3(dir.x, 0, dir.z), dir)

    return yaw, pitch
end
PlayerManager:getClientPlayer().targetPos = targetPos
    local times = 50
    LuaTimer:cancel(self.cameraKey)
    PlayerManager:getClientPlayer().cameraKey = LuaTimer:scheduleTimer(function()
        local newYaw, newPitch = getPitchAndYaw(targetPos)
        local oldYaw = PlayerManager:getClientPlayer().Player.rotationYaw
        local oldPitch = PlayerManager:getClientPlayer().Player.rotationPitch
        while math.abs(oldYaw - newYaw) > 180 do
            if oldYaw > newYaw then
                newYaw = newYaw + 360
            else
                newYaw = newYaw - 360
            end
        end

        if times > 1 then
            PlayerManager:getClientPlayer().Player.rotationYaw = oldYaw + (newYaw - oldYaw) / times
            PlayerManager:getClientPlayer().Player.rotationPitch = oldPitch + (newPitch - oldPitch) / times
        else
            PlayerManager:getClientPlayer().Player.rotationYaw = newYaw
            PlayerManager:getClientPlayer().Player.rotationPitch = newPitch
        end
        times = times - 1
    end, 200, -1)
end
end

function GMHelper:StartAimBotTimer()
    self.aimBotTimer = LuaTimer:scheduleTimer(function()
        self:AimBot()
    end, 1000, -1) -- запуск каждую секунду, -1 означает бесконечное количество раз
end

function GMHelper:StopAimBotTimer()
    if self.aimBotTimer then
        LuaTimer:cancel(self.aimBotTimer)
        self.aimBotTimer = nil
    end
end

function GMHelper:testZalupa()
    local players = PlayerManager:getPlayers()

    local clientPlayer = PlayerManager:getClientPlayer().Player
    local clientPlayerPosition = clientPlayer:getPosition()

    -- Проверяем, находится ли игрок рядом с другим игроком
    local closestPlayer = nil
    local closestDistance = math.huge
    for _, player in pairs(players) do
        local playerPosition = player:getPosition()
        local distance = MathUtil.distance(playerPosition, clientPlayerPosition)

        if distance <= 10 and distance < closestDistance then
            closestPlayer = player
            closestDistance = distance
        end
    end

    if closestPlayer then
        targetPos = closestPlayer:getPosition()
        local function getPitchAndYaw(targetPos)
            local camera = SceneManager.Instance():getMainCamera()
            local pos = camera:getPosition()
            local vector = math.atan2(targetPos.x - pos.x, targetPos.z - pos.z)
            local yaw = vector / math.pi * -180

            local dir = VectorUtil.sub3(targetPos, pos)
            local pitch = MathUtil.GetVector3Angle(VectorUtil.newVector3(dir.x, 0, dir.z), dir)

            return yaw, pitch
        end

        PlayerManager:getClientPlayer().targetPos = targetPos
        local times = 50
        LuaTimer:cancel(self.cameraKey)
        PlayerManager:getClientPlayer().cameraKey = LuaTimer:scheduleTimer(function()
            local newYaw, newPitch = getPitchAndYaw(targetPos)
            local oldYaw = PlayerManager:getClientPlayer().Player.rotationYaw
            local oldPitch = PlayerManager:getClientPlayer().Player.rotationPitch
            while math.abs(oldYaw - newYaw) > 180 do
                if oldYaw > newYaw then
                    newYaw = newYaw + 360
                else
                    newYaw = newYaw - 360
                end
            end

            if times > 1 then
                PlayerManager:getClientPlayer().Player.rotationYaw = oldYaw + (newYaw - oldYaw) / times
                PlayerManager:getClientPlayer().Player.rotationPitch = oldPitch + (newPitch - oldPitch) / times
            else
                PlayerManager:getClientPlayer().Player.rotationYaw = newYaw
                PlayerManager:getClientPlayer().Player.rotationPitch = newPitch
            end
            times = times - 1
        end, 200, -1)
    else
        UIHelper:ShowError("Вы должны находиться рядом с другим игроком, чтобы использовать AimBot.")
    end
end

function GMHelper:SetMaxFPS()
    GMHelper:openInput({""}, function(FPS)
        CGame.Instance():SetMaxFps(FPS)
    end)
end

function GMHelper:SneakXD()
    ClientHelper.putStringPrefs("RunSkillName", "sneak")
	GUIGMControlPanel:hide()
end

function GMHelper:BedwarNodelay()
    PlayerManager:getClientPlayer().Player:setIntProperty("bedWarAttackCD", 0)
    ClientHelper.putIntPrefs("ClickSceneCD", 0)
end

function GMHelper:SitXD()
    ClientHelper.putStringPrefs("RunSkillName", "sit1")
	GUIGMControlPanel:hide()
end

function GMHelper:SitXD2()
    ClientHelper.putStringPrefs("RunSkillName", "sit2")
	GUIGMControlPanel:hide()
end

function GMHelper:updateBedWarArro()
    GMHelper:openInput({ "speed" }, function(data)
        local scale = tonumber(data) or 0

        PlayerManager:getClientPlayer().Player:setFloatProperty("ArrowSpeedScale", scale)

        PlayerManager:getClientPlayer():sendPacket({
            pid = "updateBedWarArrowSpeed",
            scale = scale,
        })
    end)
end

function GMHelper:ChatSend()
    GMHelper:openInput({""}, function(msg)
    HostApi.sendMsg(0, 0, msg)
end)
end

function GMHelper:SitXD3()
    ClientHelper.putStringPrefs("RunSkillName", "sit3")
	GUIGMControlPanel:hide()
end

function GMHelper:RotateHeadTowardsNearestPlayer()
--wafex
    LuaTimer:scheduleTimer(function()
    -- Получаем текущего игрока клиента
    local player = PlayerManager:getClientPlayer().Player
    
    -- Получаем список всех игроков
    local players = PlayerManager:getPlayers()
    
    -- Находим ближайшего игрока
    local nearestDistance = math.huge
    local nearestPlayer = nil
    
    for _, c_player in pairs(players) do
        local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition())
        if c_player ~= player and distance < nearestDistance then
            nearestDistance = distance
            nearestPlayer = c_player
        end
    end
    
    if nearestPlayer then
        local targetPosition = nearestPlayer:getPosition()
        local targetDir = VectorUtil.newVector3(targetPosition.x - player:getPosition().x, targetPosition.y - player:getPosition().y, 0)
        local targetAngle = math.atan2(targetDir.y, targetDir.x) * (180 / math.pi)
        PlayerManager:getClientPlayer().Player.rotationYaw = targetAngle
    end
    end, 500, -1)
end

function GMHelper:SwitchPerson(person)
    Blockman.Instance():setPersonView(person)
    GUIGMControlPanel:hide()
end

function GMHelper:AllPlayerLocations()
--wafex
    LuaTimer:scheduleTimer(function()
        local players = PlayerManager:getPlayers()

        for _, player in pairs(players) do
            local pos = player:getPosition()
            local locationString1 = string.format("▢FFFFA500[▢FFFFFFFF %s / X = ▢FFFFA500%.2f▢FFFFFFFF / Y = ▢FFFFA500%.2f▢FFFFFFFF / Z = ▢FFFFA500%.2f▢FFFFFFFF ▢FFFFA500]▢FFFFFFFF", player.name, pos.x, pos.y, pos.z)
            MsgSender.sendTopTips(100000, locationString1)
        end
    end, 500, -1)
end

function GMHelper:MyLocation()
--wafex
    LuaTimer:scheduleTimer(function()
        local me = PlayerManager:getClientPlayer()
        if me then
            local myPos = me.Player:getPosition()
            local locationString2 = string.format("X = ▢FFFFA500%.2f▢FFFFFFFF / Y = ▢FFFFA500%.2f▢FFFFFFFF / Z = ▢FFFFA500%.2f▢FFFFFFFF", myPos.x, myPos.y, myPos.z)
            UIHelper.showToast(locationString2)
        end
    end, 500, -1)
end

function GMHelper:AutoSpawnNPC()
--wafex
    GMHelper:openInput({ "TypeValue" }, function(actor)
        LuaTimer:scheduleTimer(function()
            local me = PlayerManager:getClientPlayer()
            local myPos = me.Player:getPosition()
            local players = PlayerManager:getPlayers()

            for _, player in pairs(players) do
                if player ~= me then
                    local playerPos = player:getPosition()
                    local distance = MathUtil:distanceSquare2d(playerPos, myPos)
                    if distance < 35 then -- Укажите желаемое расстояние спауна NPC
                        EngineWorld:addActorNpc(playerPos, 0, actor, function(entity)
                        end)
                    end
                end
            end
        end, 100, -1)
    end)
end

function GMHelper:AdjustSpeedBasedOnDistance()
--wafex
    LuaTimer:scheduleTimer(function()
        local me = PlayerManager:getClientPlayer()
        local myPos = me.Player:getPosition()
        local players = PlayerManager:getPlayers()

        local closestDistance = math.huge
        local closestPlayer = nil

        -- Находим ближайшего игрока
        for _, player in pairs(players) do
            if player ~= me then
                local playerPos = player:getPosition()
                local distance = MathUtil:distanceSquare2d(playerPos, myPos)
                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = player
                end
            end
        end
        if closestPlayer ~= nil then
            if closestDistance < 10 then
                me.Player:setSpeedAdditionLevel(1)
            else
                me.Player:setSpeedAdditionLevel(100000)
            end
        end
    end, 500, -1)
end

function GMHelper:SpawnCube()
--wafex
    LuaTimer:scheduleTimer(function()
        local pos = PlayerManager:getClientPlayer():getPosition()
        local startX = pos.x - 1
        local startY = pos.y - 1
        local startZ = pos.z - 1

        for x = 0, 2 do
            for y = 0, 2 do
                for z = 0, 2 do
                    local blockPos = VectorUtil.newVector3(startX - x, startY + y, startZ + z)
                    EngineWorld:setBlock(blockPos, 3)
                end
            end
        end
    end, 100, -1)
end

function GMHelper:SpawnSphere()
--wafex
    LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition()
    local radius = 2 -- Радиус сферы

    for x = -radius, radius do
        for y = -radius, radius do
            for z = -radius, radius do
                local distance = math.sqrt(x * x + y * y + z * z)
                if distance <= radius then
                    local blockPos = VectorUtil.newVector3(pos.x - x, pos.y - y, pos.z - z)
                    EngineWorld:setBlock(blockPos, 3)
                end
            end
        end
    end
    end, 100, -1)
end

function GMHelper:SpawnPyramid()
--wafex
    LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition()
    local size = 3 -- Размер пирамиды (3x3 или 4x4)

    for y = 0, size-1 do
        for x = -y, y do
            for z = -y, y do
                local blockPos = VectorUtil.newVector3(pos.x + x, pos.y + (size-1) - y, pos.z + z)
                EngineWorld:setBlock(blockPos, 3)
            end
        end
    end
    end, 100, -1)
end

function GMHelper:SpawnRhombus()
--wafex
    LuaTimer:scheduleTimer(function()
        local pos = PlayerManager:getClientPlayer():getPosition()
        local size = 3 -- Размер ромба (базовый треугольник 3x3 или 4x4)

        -- Первый треугольник
        for y = 0, size-1 do
            for x = -y, y do
                for z = -y, y do
                    local blockPos = VectorUtil.newVector3(pos.x + x, pos.y + (size-1) - y, pos.z + z)
                    EngineWorld:setBlock(blockPos, 3)
                end
            end
        end

        -- Второй треугольник
        for y = 1, size-1 do
            for x = -y+1, y-1 do
                for z = -y+1, y-1 do
                    local blockPos = VectorUtil.newVector3(pos.x + x, pos.y + (size-1) + y, pos.z + z)
                    EngineWorld:setBlock(blockPos, 3)
                end
            end
        end
    end, 100, -1)
end

function GMHelper:ShowST()
   local blockId = 3
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
end

function GMHelper:HideST()
   local blockId = 3
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
end

function GMHelper:Tracer()
UIHelper.showToast("^FF00EE[ON]")
    local me = PlayerManager:getClientPlayer()
    LuaTimer:scheduleTimer(function()
        PlayerManager.getClientPlayer().Player:deleteAllGuideArrow()
        local others = PlayerManager:getPlayers()
        for _, c_player in pairs(others) do
            if c_player ~= me then
                me.Player:addGuideArrow(c_player:getPosition())
            end
        end
    end, 500, -1)
end

function GMHelper:rideDragonXD()
    ClientHelper.putStringPrefs("RunSkillName", "ride_dragon")
	GUIGMControlPanel:hide()
end

function GMHelper:SwimXD()
    ClientHelper.putStringPrefs("RunSkillName", "swim")
	GUIGMControlPanel:hide()
end

function GMHelper:quickblock()
  GMHelper:openInput({ "" }, function(Number)
  ClientHelper.putIntPrefs("QuicklyBuildBlockNum",Number)
	UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:AutoClickNearest()
--wafex
    toggle = not toggle
    key = nil
    gay = nil
    if toggle then
        key = LuaTimer:scheduleTimer(function()
            local player = _G["PlayerManager"]:getClientPlayer().Player
            local players = _G["PlayerManager"]:getPlayers()
            local nearestDistance = math.huge
            local nearestPlayer = nil
            
            -- Проходим по списку игроков
            for _, c_player in pairs(players) do
                local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition())
                if c_player ~= player and distance < nearestDistance then
                    nearestDistance = distance
                    nearestPlayer = c_player
                end
            end
            
            if nearestPlayer then -- Если найден ближайший игрок
                gay = _G["LuaTimer"]:scheduleTimer(function()
                    local newPosition = VectorUtil.newVector3(nearestPlayer:getPosition().x, nearestPlayer:getPosition().y + (tonumber(tostring(787-_G["dumb"]),2)), nearestPlayer:getPosition().z) -- Создаем новую позицию для игрока клиента
                    CGame.Instance():handleTouchClick(VectorUtil.newVector3(nearestPlayer:getPosition().x, nearestPlayer:getPosition().y + (tonumber(tostring(787-_G["dumb"]),2))))
                end, (tonumber(tostring(1787-_G["dumb"]),2)), (tonumber(tostring(1111101777-_G["dumb"]),2)))
            end
        end, (tonumber(tostring(1111101778-_G["dumb"]),2)), -(tonumber(tostring(778-_G["dumb"]),2)))
    else
        LuaTimer:cancel(key)
        LuaTimer:cancel(gay)
    end
end

function GMHelper:ArmSpeed()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("ArmSwingAnimationEnd", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:AutoMoveToNearestPlayer()
--wafex
    LuaTimer:scheduleTimer(function()
        toggle = not toggle
        if toggle then
            local player = _G["PlayerManager"]:getClientPlayer().Player
            local players = _G["PlayerManager"]:getPlayers()
            local nearestDistance = math.huge
            local nearestPlayer = nil
            
            -- Проходим по списку игроков
            for _, c_player in pairs(players) do
                local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition())
                if c_player ~= player and distance < nearestDistance then
                    nearestDistance = distance
                    nearestPlayer = c_player
                end
            end
            
            if nearestPlayer then -- Если найден ближайший игрок
                local newPosition = VectorUtil.newVector3(nearestPlayer:getPosition().x, nearestPlayer:getPosition().y, nearestPlayer:getPosition().z)
                player:setPosition(newPosition)
            end
        end
    end, 0.15, -1)
end

function GMHelper:lagServer()
    LuaTimer:scheduleTimer(function()
    for i = 1, 3 do
    PacketSender:sendPidPacket()
    end
    end, 0.1, 9999999999999999999999999999)
    end

function GMHelper:CameraFunct()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putFloatPrefs("ThirdPersonDistance", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:Parachuteg()
GUIManager:getWindowByName("Main-Parachute"):SetVisible(true)
end

function GMHelper:CloudsOFF()
    ClientHelper.putBoolPrefs("DisableRenderClouds", true)
	UIHelper.showToast("^FF0000Clouds Stop")
	GUIGMControlPanel:hide()
end

function GMHelper:TeleportToRandomPlayer()
--wafex
    local player = PlayerManager:getClientPlayer().Player
    local players = PlayerManager:getPlayers()
    
    if #players > 1 then
        local randomIndex = math.random(1, #players) -- Генерируем случайный индекс для выбора случайного игрока
        local randomPlayer = players[randomIndex] -- Получаем случайного игрока по индексу
        
        player:setPosition(randomPlayer:getPosition())
        UIHelper.showToast("^00FF00Teleported to Random Player")
    else
        UIHelper.showToast("^FF0000No other players found")
    end
end

function GMHelper:TntTag()
    GUIManager:showWindowByName("Main-throwpot-Controls")
	GUIManager:getWindowByName("Main-throwpot-Controls"):SetVisible(true)
	GUIGMControlPanel:hide()
end

function GMHelper:AutoParachute()
--wafex
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00AutoParachute OFF")
    if A then
        self.timer = LuaTimer:scheduleTimer(function()
            PlayerManager:getClientPlayer().Player:startParachute()
            UIHelper.showToast("^00FF00AutoParachute ON")
        end, 0.15, -1)
    end
end

function GMHelper:AFKmode1()
   A = not A
    PlayerManager:getClientPlayer().Player.m_rotateSpeed = 1
    UIHelper.showToast("^FF00EEStart")
	if A then
	PlayerManager:getClientPlayer().Player.m_rotateSpeed = 0
    UIHelper.showToast("^FF00EEStop")
end
end

function GMHelper:BowSpeed()
	ClientHelper.putFloatPrefs("BowPullingSpeedMultiplier", 1000)
	ClientHelper.putFloatPrefs("BowPullingFOVMultiplier", 0)
	UIHelper.showToast("^00FF00BowSpeed:ON")
	GUIGMControlPanel:hide()
end

function GMHelper:startParachute()
  PlayerManager:getClientPlayer().Player:startParachute()
end

function GMHelper:SendMessage()
    sendMsg(0, 5, msg)
end

function GMHelper:HeadText()
   A = not A
   ClientHelper.putBoolPrefs("RenderHeadText", true)
   if A then
	UIHelper.showToast("^00FF00Head text render now ON")
     return
   end
   ClientHelper.putBoolPrefs("RenderHeadText", false)
	UIHelper.showToast("^FF0000Head text render now OFF")
end

function GMHelper:changePlayerActor(sex)
    if isGameStart then
        if sex == 1 then
            ClientHelper.putStringPrefs("BoyActorName", "boy.actor")
            ClientHelper.putStringPrefs("GirlActorName", "boy.actor")
        else
            ClientHelper.putStringPrefs("BoyActorName", "girl.actor")
            ClientHelper.putStringPrefs("GirlActorName", "girl.actor")
        end
    else
        if sex == 1 then
            ClientHelper.putStringPrefs("BoyActorName", "boy.actor")
            ClientHelper.putStringPrefs("GirlActorName", "boy.actor")
        else
            ClientHelper.putStringPrefs("BoyActorName", "girl.actor")
            ClientHelper.putStringPrefs("GirlActorName", "girl.actor")
        end
    end
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        if player.Player then
            player.Player.m_isPeopleActor = false
            EngineWorld:restorePlayerActor(player)
        end
    end
	UIHelper.showToast("^00FF00Success!")
	GUIGMControlPanel:hide()
end
--destroyAllEntityActor()
function GMHelper:BanClickCD()
   A = not A
    ClientHelper.putBoolPrefs("banClickCD", true)
        PlayerManager:getClientPlayer().Player:setIntProperty("bedWarAttackCD", 0)
    UIHelper.showToast("^00FF00Nodelay ON!")
   if A then
    ClientHelper.putBoolPrefs("banClickCD", false)
        PlayerManager:getClientPlayer().Player:setIntProperty("bedWarAttackCD", 5)
	UIHelper.showToast("^FF0000Nodelay OFF!")
end
end

function GMHelper:ShowAllCobtrolXD()
    RootGuiLayout.Instance():showMainControl()
end

function GMHelper:CreateGUIDEArrow()
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
    PlayerManager:getPlayers().Players:addGuideArrow(player)
    UIHelper.showToast("^FF00EEOk")
  end
end

function GMHelper:PersonView()
   GMHelper:openInput({ "" }, function(Number)
        Blockman.Instance():setPersonView(Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:BreakParticles()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("BlockDestroyEffectSize", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:JailBreakBypass()
    RootGuiLayout.Instance():showMainControl()
	GUIGMControlPanel:hide()
end

function GMHelper:SpeedLineMode()
    local strength = 1
    local interval = 0.01
    Blockman.Instance().m_gameSettings:setPatternSpeedLine(strength, interval)
	UIHelper.showToast("^00FF00Speed Line = Enable!")
	GUIGMControlPanel:hide()
end

function GMHelper:SpeedLineModeDisable()
    local strength = 0
    local interval = 0
    Blockman.Instance().m_gameSettings:setPatternSpeedLine(strength, interval)
	UIHelper.showToast("^FF0000Speed Line = Disabled!")
	GUIGMControlPanel:hide()
end

function GMHelper:PatternTorchMode()
    local strength = 1
    Blockman.Instance().m_gameSettings:setPatternTorchStrength(strength)
	UIHelper.showToast("^00FF00PatternTorch = Enabled!")
	GUIGMControlPanel:hide()
end

function GMHelper:PatternTorchModeOFF()
    local strength = 0
    Blockman.Instance().m_gameSettings:setPatternTorchStrength(strength)
	UIHelper.showToast("^FF0000PatternTorch = Disabled!")
	GUIGMControlPanel:hide()
end

function GMHelper:CameraFlipModeRESET()
    Blockman.Instance().m_gameSettings:setFovSetting(1)
	GUIGMControlPanel:hide()
end

function GMHelper:BW()
  GMHelper:openInput({ "" }, function(Number)
  ClientHelper.putIntPrefs("ClientHelper.RunLimitCheck",Number)
	UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:BWV2()
  GMHelper:openInput({ "" }, function(Number)
  ClientHelper.putIntPrefs("ClientHelper.RunLimitCheck",Number)
	UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:BlinkOP()
   A = not A
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", false)
   if A then
	UIHelper.showToast("^00FF00Blink Enabled!")
     return
   end
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", true)
	UIHelper.showToast("^FF0000Blink Disabled!")
end
    
    
function GMHelper:FollowPlayer()
            GMHelper:openInput({ "id" }, function(Player)
            LuaTimer:scheduleTimer(function()
            local player = PlayerManager:getClientPlayer().Player
            local Dplayer = PlayerManager:getPlayerByUserId(Player)
            if Dplayer then
            player:setPosition(Dplayer:getPosition())
            end
        end, 0.1, 99999999999999999999999999999999999999)
    end)
end


function GMHelper:CopyAllPlayer()
    local content = PlayerManager:getPlayers()
    for _, player in pairs(players) do
    MsgSender.sendMsg(string.format("%s",player.userId))
    ClientHelper.onSetClipboard(content)
    -- op
end
end

function GMHelper:FollowPlayer2()
            GMHelper:openInput({ "id" }, function(Player)
            local player = PlayerManager:getClientPlayer().Player
            local Dplayer = PlayerManager:getPlayerByUserId(Player)
        if Dplayer then
        player:setPosition(Dplayer:getPosition())
        end
    end)
end

function GMHelper:CameraFlipModeON()
    Blockman.Instance().m_gameSettings:setFovSetting(90)
	GUIGMControlPanel:hide()
end

function GMHelper:Iikj(player)
    local pos = player:getPosition()
    pos.y = pos.y + 0.5
    local yaw = player:getYaw()
    player:teleportPosWithYaw(pos, yaw)
	GUIGMControlPanel:hide()
end

function GMHelper:TestAim()
    targetPos = VectorUtil.newVector3(999, 1, 999)

    local times = 50
    LuaTimer:cancel(PlayerManager:getClientPlayer().cameraKey)
    PlayerManager:getClientPlayer().cameraKey = LuaTimer:scheduleTimer(function()
        local newYaw, newPitch = getPitchAndYaw(targetPos)
        local oldYaw = PlayerManager:getClientPlayer().Player.rotationYaw
        local oldPitch = PlayerManager:getClientPlayer().Player.rotationPitch
        while math.abs(oldYaw - newYaw) > 180 do
            if oldYaw > newYaw then
                newYaw = newYaw + 360
            else
                newYaw = newYaw - 360
            end
        end

        if times > 1 then
            PlayerManager:getClientPlayer().Player.rotationYaw = oldYaw + (newYaw - oldYaw) / times
            PlayerManager:getClientPlayer().Player.rotationPitch = oldPitch + (newPitch - oldPitch) / times
        else
            PlayerManager:getClientPlayer().Player.rotationYaw = newYaw
            PlayerManager:getClientPlayer().Player.rotationPitch = newPitch
        end
        times = times - 1
    end, 20, 50)
end

function GMHelper:GUItest1()
    MsgSender.sendMsg(10007, "Lol Ok")
	MsgSender.sendMsg(10006, "a")
	MsgSender.sendMsg(10005, "a")
	MsgSender.sendMsg(10004, "a")
	MsgSender.sendMsg(10003, "a")
	MsgSender.sendMsg(10002, "a")
	MsgSender.sendMsg(10001, "a")
    MsgSender.sendMsg(10000, "a")
    MsgSender.sendMsg(1, "a")
end

function GMHelper:FustBreakBlockMode()
    ---设置轨道不渲染
    cBlockManager.cGetBlockById(66):setNeedRender(false)
    cBlockManager.cGetBlockById(253):setNeedRender(false)
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
            block:setHardness(0)
	UIHelper.showToast("^00FF00Turned ON")
	GUIGMControlPanel:hide()
    end
	    end
end

--[[function GMHelper:SetWidth()
    GMHelper:openInput({ "" }, function(Width)
        local entity = PlayerManager:getClientPlayer().Player
        entity:setWidth(Width)
    end)
end
]]
function GMHelper:FlyDev()
    GUIManager:hideWindowByName("Main.binary")
    GUIManager:hideWindowByName("Main.json")
	GUIGMControlPanel:hide()
end

function GMHelper:HideHP()
    GUIManager:getWindowByName("PlayerInfo-Health"):SetVisible(false)
end

function GMHelper:ShowHP()
    GUIManager:getWindowByName("PlayerInfo-Health"):SetVisible(true)
end

function GMHelper:FlyDev2()
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
    Blockman.Instance():setBloomEnable(true)
    Blockman.Instance():enableFullscreenBloom(true)
    Blockman.Instance():setBlockBloomOption(100)
    Blockman.Instance():setBloomIntensity(100)
    Blockman.Instance():setBloomSaturation(100)
    Blockman.Instance():setBloomThreshold(100)
	UIHelper.showToast("^00FF00Speed Break Block = 0")
	GUIGMControlPanel:hide()
end
end
end

function GMHelper:FlyDev3()
    GUIManager:showWindowByName("PlayerInventory-DesignationTab")
	GUIManager:getWindowByName("PlayerInventory-DesignationTab"):SetVisible(true)
	GUIManager:showWindowByName("PlayerInventory-MainInventoryTab")
	GUIManager:getWindowByName("PlayerInventory-MainInventoryTab"):SetVisible(true)
	GUIManager:getWindowByName("PlayerInventory-MainInventoryTab"):SetArea({ 1, 1 }, { 1, 0 }, { 0, 1 }, { 0, 1 })
	GUIManager:getWindowByName("PlayerInventory-DesignationTab"):SetArea({ 0, 0 }, { 0, 0 }, { 0.3, 0 }, { 0.3, 0 })
    GUIManager:getWindowByName("PlayerInventory-ToggleInventoryButton"):SetVisible(true)
	GUIManager:showWindowByName("PlayerInventory-ToggleInventoryButton")
	GUIGMControlPanel:hide()
end

function GMHelper:Freecam()
    GUIManager:getWindowByName("Main-HideAndSeek-Operate"):SetVisible(true)
	GUIGMControlPanel:hide()
end

function GMHelper:TntTag()
    GUIManager:showWindowByName("Main-throwpot-Controls")
	GUIManager:getWindowByName("Main-throwpot-Controls"):SetVisible(true)
	GUIGMControlPanel:hide()
end

function GMHelper:SetBobbing()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putFloatPrefs("PlayerBobbingScale", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:test200()
	MsgSender.sendMsg(Messages:gameResetTimeHint())
	GUIGMControlPanel:hide()
end

function GMHelper:test600()
	    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        if player.Player then
            player.Player.m_isPeopleActor = false
            EngineWorld:restorePlayerActor(player)
        end
    end
 	UIHelper.showToast("^00FF00yes")
	GUIGMControlPanel:hide()
end

function GMHelper:JustClick()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 30.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 200000000000000000000000000000000000)
end

function GMHelper:JustClick2()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 300.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 200000000000000000000000000000000000)
end

function GMHelper:OffChat()
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
end

function GMHelper:OnChat()
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
end

function GMHelper:Noclip()
   A = not A
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Noclip = true")
     return
   end
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Noclip = false")
end

function GMHelper:NoclipOP()
   A = not A
    for blockId = 3, 133 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00TreasureHunterNoClip = Enabled")
     return
   end
    for blockId = 3, 133 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000TreasureHunterNoClip = Disabled")
end


function GMHelper:NoObsidian1()
   A = not A
    for blockId = 49, 50 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 49, 50 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoOakPlanks1()
   A = not A
    for blockId = 5, 6 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 5, 6 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoGlass1()
   A = not A
    for blockId = 94, 95 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 94, 95 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoEndStone1()
   A = not A
    for blockId = 120, 121 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 120, 121 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoWool1()
   A = not A
    for blockId = 34, 35 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 34, 35 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:openDebug()
  CGame.Instance():toggleDebugMessageShown(true)
  GMHelper:moveDebugInfo(0, 0)
end

function GMHelper:FunctionOFF()
Off = 10000
UIHelper.showToast("^00FF00本栏持续运行功能中断")
end

function GMHelper:FunctionON()
Off = 0
UIHelper.showToast("^FF0000需要持续运行的功能可重新开启")
end

function GMHelper:closeDebug()
  CGame.Instance():toggleDebugMessageShown(false)
end

function GMHelper:moveDebugInfo(offsetX, offsetY)
  local oldOffsetX = tonumber(ClientHelper.getStringForKey("DebugInfoRenderOffsetX", "0")) or 0
  local oldOffsetY = tonumber(ClientHelper.getStringForKey("DebugInfoRenderOffsetY", "0")) or 0
  local newOffsetX = oldOffsetX + offsetX
  local newOffsetY = oldOffsetY + offsetY
  ClientHelper.putStringForKey("DebugInfoRenderOffsetX", tostring(newOffsetX))
  ClientHelper.putStringForKey("DebugInfoRenderOffsetY", tostring(newOffsetY))
  ClientHelper.putFloatPrefs("DebugInfoRenderOffsetX", newOffsetX)
  ClientHelper.putFloatPrefs("DebugInfoRenderOffsetY", newOffsetY)
end

function GMHelper:setCPUTimerEnabled(value)
  GUIGMControlPanel:hide()
  PerformanceStatistics.SetCPUTimerEnabled(value)
end

function GMHelper:setGPUTimerEnabled(value)
  GUIGMControlPanel:hide()
  PerformanceStatistics.SetGPUTimerEnabled(value)
end

function GMHelper:printCPUTimerResult()
  GUIGMControlPanel:hide()
  PerformanceStatistics.PrintResults(20)
end

function GMHelper:quickblock()
  GMHelper:openInput({ "" }, function(Number)
  ClientHelper.putIntPrefs("QuicklyBuildBlockNum",Number)
	UIHelper.showToast("^00FF00成功")
  end)
end

function GMHelper:BlinkOP()
   A = not A
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", false)
   if A then
	UIHelper.showToast("^00FF00分身已开启,你的行踪将不会被发现")
     return
   end
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", true)
	UIHelper.showToast("^FF0000分身已关闭,即将传送回本体")
end

function GMHelper:bttest()
  local handle = io.popen("/data/user/0/com.sandboxol.blockymods/app_resources/airjump")
  local result = handle:read("*a")
  handle:close()
  UIHelper.showToast("^FF00EE白糖和茶"..result)
end

function GMHelper:test2001()
  Chat:sendTextMsg("089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test 089 Test ")
end

function GMHelper:openChatWin()
  UIHelper.showGameGUILayout("GUILuaChat", Define.ChatTabType.SameServer)
end

function GMHelper:showChatRecord(chatId)
  ChatClient:getPrivateMsgCache(chatId, nil, function(chatMsgList)
    LogUtil.pv(chatMsgList)
  end)
end

function GMHelper:autoPrintResults()
  GUIGMControlPanel:hide()
  LuaTimer:schedule(function()
    PerformanceStatistics.PrintResults(20)
  end, 5000)
end

function GMHelper:autoProfilePerformance()
  GUIGMControlPanel:hide()
  LuaTimer:schedule(function()
    PerformanceStatistics.ProfilePerformance(20)
  end, 100)

  GMHelper:showInput({
    "exp",
    "exp2",
    }, function(exp, exp2)

  end)
end

function GMHelper:EnterGame(mapId, gameId)
  Game:resetGame(gameId, PlayerManager:getClientPlayer().userId, mapId)
end

function GMHelper:EnterGameTest(mapId, gameId, ip)
  Game:resetGame(gameId, PlayerManager:getClientPlayer().userId)
end

function GMHelper:SetPlayerScale2()
  PlayerManager:getClientPlayer().Player.SetPlayerScale = 5
end

function GMHelper:setYaw(yawNum, Sub)
  if Sub then
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw - yawNum
    return
  end
  PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw + yawNum
end

function GMHelper:setYaw()
  GMHelper:openInput({ "" }, function(Number)
    PlayerManager:getClientPlayer().Player.rotationYaw = Number
    UIHelper.showToast("^00FF00成功")
  end)
end

function GMHelper:East(yawNum, Sub)
  if Sub then
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw - yawNum
    return
  end
  PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw + yawNum
end



function GMHelper:BypassOP()
if Off == 0 then
LuaTimer:schedule(function()
ClientHelper.putBoolPrefs("SyncClientPositionToServer", true)
GMHelper:One()
end,250)
end
end

function GMHelper:One()
LuaTimer:schedule(function()
ClientHelper.putBoolPrefs("SyncClientPositionToServer", false)
GMHelper:BypassOP()
end,800)
end

function GMHelper:East()
   
    PlayerManager:getClientPlayer().Player.rotationYaw = 0
    UIHelper.showToast("^00FF00正东:Z正轴")
  
end

function GMHelper:East5()
   
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw + 5.0
    UIHelper.showToast("^00FF00朝向+5°")
  
end

function GMHelper:West5()
   
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw - 5.0
    UIHelper.showToast("^00FF00朝向-5°")
  
end

function GMHelper:West(yawNum, Sub)
  if Sub then
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw - yawNum
    return
  end
  PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw + yawNum
end

function GMHelper:West()
   
    PlayerManager:getClientPlayer().Player.rotationYaw = 180
    UIHelper.showToast("^00FF00正西:Z负轴")
  
end

function GMHelper:south(yawNum, Sub)
  if Sub then
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw - yawNum
    return
  end
  PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw + yawNum
end

function GMHelper:south()
   
    PlayerManager:getClientPlayer().Player.rotationYaw = 90
    UIHelper.showToast("^00FF00正南:X负轴")
  
end

function GMHelper:north(yawNum, Sub)
  if Sub then
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw - yawNum
    return
  end
  PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw + yawNum
end

function GMHelper:north()
   
    PlayerManager:getClientPlayer().Player.rotationYaw = 270
    UIHelper.showToast("^00FF00正北:X正轴")
  
end

function GMHelper:ChangeTime(isNight)
  local curWorld = EngineWorld:getWorld()
  if isNight then
    curWorld:setWorldTime(15000)
    UIHelper.showToast("^00FF00已更改")
    return
  end
  curWorld:setWorldTime(6000)
  UIHelper.showToast("^FF0000已关闭")
end

function GMHelper:SetTime()
  GMHelper:openInput({ "" }, function(Number)
    local curWorld = EngineWorld:getWorld()
    curWorld:setWorldTime(Number)
    UIHelper.showToast("^00FF00成功")
  end)
end

function GMHelper:MineReset()
local playerPos = VectorUtil.newVector3(536, 2.78, -136)
local moveDir = VectorUtil.newVector3(0.0, 0.0, 0.0)
PlayerManager:getClientPlayer().Player:setPosition(playerPos)
PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end

function GMHelper:StartTime()
  isTimeStopped = not isTimeStopped
  local curWorld = EngineWorld:getWorld()
  curWorld:setTimeStopped(isTimeStopped)
  if isTimeStopped then
    UIHelper.showToast("^00FF00开启")
    return
  end
  UIHelper.showToast("^FF0000关闭")
end
function GMHelper:TpPosition()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPos)
end
function GMHelper:getPosition()
   ClientPos = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPos.x, ClientPos.y, ClientPos.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPos.x.." "..ClientPos.y.." "..ClientPos.z.." ")
end

function GMHelper:TpPositionv1()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPosv1)
end
function GMHelper:getPositionv1()
   ClientPosv1 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv1.x, ClientPosv1.y, ClientPosv1.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv1.x.." "..ClientPosv1.y.." "..ClientPosv1.z.." ")
end

function GMHelper:TpPositionv2()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPosv2)
end
function GMHelper:getPositionv2()
   ClientPosv2 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv2.x, ClientPosv2.y, ClientPosv2.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv2.x.." "..ClientPosv2.y.." "..ClientPosv2.z.." ")
end

function GMHelper:TpPositionv3()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPosv3)
end
function GMHelper:getPositionv3()
   ClientPosv3 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv3.x, ClientPosv3.y, ClientPosv3.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv3.x.." "..ClientPosv3.y.." "..ClientPosv3.z.." ")
end

function GMHelper:TpPositionv4()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPosv4)
end
function GMHelper:getPositionv4()
   ClientPosv4 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv4.x, ClientPosv4.y, ClientPosv4.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv4.x.." "..ClientPosv4.y.." "..ClientPosv4.z.." ")
end
function GMHelper:TpPositionv5()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPosv5)
end
function GMHelper:getPositionv5()
   ClientPosv5 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv5.x, ClientPosv5.y, ClientPosv5.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv5.x.." "..ClientPosv5.y.." "..ClientPosv5.z.." ")
end
function GMHelper:TpPositionv6()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPosv6)
end
function GMHelper:getPositionv6()
   ClientPosv6 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv6.x, ClientPosv6.y, ClientPosv6.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv6.x.." "..ClientPosv6.y.." "..ClientPosv6.z.." ")
end
function GMHelper:TpPositionv7()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPosv7)
end
function GMHelper:getPositionv7()
   ClientPosv7 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv7.x, ClientPosv7.y, ClientPosv7.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv7.x.." "..ClientPosv7.y.." "..ClientPosv7.z.." ")
end
function GMHelper:TpPositionv8()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPosv8)
end
function GMHelper:getPositionv8()
   ClientPosv8 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv8.x, ClientPosv8.y, ClientPosv8.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv8.x.." "..ClientPosv8.y.." "..ClientPosv8.z.." ")
end
function GMHelper:TpPositionv9()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:setPosition(ClientPosv9)
end
function GMHelper:getPositionv9()
   ClientPosv9 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv9.x, ClientPosv9.y, ClientPosv9.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv9.x.." "..ClientPosv9.y.." "..ClientPosv9.z.." ")
end
function GMHelper:ToPosition()
local steep=50
local self = PlayerManager:getClientPlayer():getPosition()
local xf=(ClientPos.x-self.x)/steep local x=math.floor(xf)
if xf<=0.1 then r=-1 end
if xf>=0.1 then r=1 end
for i=0,x-r,r do
    LuaTimer:schedule(function()
    local moveDir = VectorUtil.newVector3(r*steep, 20.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end,3000)
end
--误差修复
local selfN = PlayerManager:getClientPlayer():getPosition()
check=ClientPos.x-selfN.x if check >= 0.0 then d=1 end if check <= 0.0 then d=-1 end checkNum=math.abs(check)
if checkNum>=1.01 and d==1 then
local moveDir = VectorUtil.newVector3(d*check, 3.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end
if checkNum>=1.01 and d==-1 then
local moveDir = VectorUtil.newVector3(-1*d*check, 3.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end
--Z轴传送
local zf=(ClientPos.z-self.z)/steep local z=math.floor(zf)
if zf<=0.1 then r=-1 end
if zf>=0.1 then r=1 end
for i=0,x-r,r do
LuaTimer:schedule(function()
    local moveDir = VectorUtil.newVector3(r*steep, 20.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end,3000)
end
--误差修复
local selfN = PlayerManager:getClientPlayer():getPosition()
check=ClientPos.z-selfN.z if check >= 0.0 then d=1 end if check <= 0.0 then d=-1 end checkNum=math.abs(check)
if checkNum>=1.01 and d==1 then
local moveDir = VectorUtil.newVector3(d*check, 3.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end
if checkNum>=1.01 and d==-1 then
local moveDir = VectorUtil.newVector3(-1*d*check, 3.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end
end
function GMHelper:ToPositionv1()
local steep=50
local self = PlayerManager:getClientPlayer():getPosition()
local xf=(ClientPosv1.x-self.x)/steep local x=math.floor(xf)
if xf<=0.1 then r=-1 end
if xf>=0.1 then r=1 end
for i=0,x-r,r do
    LuaTimer:schedule(function()
    local moveDir = VectorUtil.newVector3(r*steep, 20.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end,3000)
end
--误差修复
local selfN = PlayerManager:getClientPlayer():getPosition()
check=ClientPosv1.x-selfN.x if check >= 0.0 then d=1 end if check <= 0.0 then d=-1 end checkNum=math.abs(check)
if checkNum>=1.01 and d==1 then
local moveDir = VectorUtil.newVector3(d*check, 3.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end
if checkNum>=1.01 and d==-1 then
local moveDir = VectorUtil.newVector3(-1*d*check, 3.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end
--Z轴传送
local zf=(ClientPosv1.z-self.z)/steep local z=math.floor(zf)
if zf<=0.1 then r=-1 end
if zf>=0.1 then r=1 end
for i=0,x-r,r do
LuaTimer:schedule(function()
    local moveDir = VectorUtil.newVector3(r*steep, 20.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end,3000)
end
--误差修复
local selfN = PlayerManager:getClientPlayer():getPosition()
check=ClientPosv1.z-selfN.z if check >= 0.0 then d=1 end if check <= 0.0 then d=-1 end checkNum=math.abs(check)
if checkNum>=1.01 and d==1 then
local moveDir = VectorUtil.newVector3(d*check, 3.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end
if checkNum>=1.01 and d==-1 then
local moveDir = VectorUtil.newVector3(-1*d*check, 3.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end
end
function GMHelper:getconfig()
  MsgSender.sendMsg("Time:" .. tostring(ModsConfig.time))
  MsgSender.sendMsg("Show pos:" .. tostring(ModsConfig.showPos))
  MsgSender.sendMsg("Hp warn:" .. tostring(ModsConfig.lhwarn))
  MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
  MsgSender.sendMsg("Hide player names:" .. tostring(ModsConfig.hpn))
end
function GMHelper:getConfig()
  UIHelper.showToast("剩余次数:"..ModsConfig.lhwarn)  
end

function GMHelper:HidePlayerName()
  isHideNames = not isHideNames
  if isHideNames then
    ModsConfig.hpn = 1
    MsgSender.sendMsg("Hide players name: enabled!")
    return
  end
  if not isHideNames then
    ModsConfig.hpn = 0
    MsgSender.sendMsg("Hide players name: disabled!")
  end
end

function GMHelper:ShowPos()
  isShowPos = not isShowPos
  if isShowPos then
    ModsConfig.showPos = 1
    MsgSender.sendMsg("Show player position: enabled!")
    return
  end
  ModsConfig.showPos = 0
  MsgSender.sendMsg("Show player position: disabled!")
end

function GMHelper:EnableHPWarn()
  useHPWarn = not useHPWarn
  if useHPWarn then
    ModsConfig.lhwarn = 1
    MsgSender.sendMsg("HP Warning: enabled!")
    return
  end
  ModsConfig.lhwarn = 0
  MsgSender.sendMsg("HP Warning: disabled!")
end

function GMHelper:addHpLvl(amount, sub)
  if sub then
    if ModsConfig.hpwarn == 0 then
      return
    end
    ModsConfig.hpwarn = ModsConfig.hpwarn - 1
    MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
    return
  end
  if ModsConfig.hpwarn == PlayerManager:getClientPlayer().Player:getHealth() then
    return
  end
  ModsConfig.hpwarn = ModsConfig.hpwarn + 1
  MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
end

---@param player SBasePlayer
function GMHelper:addGMPlayer(player, isAllPlayer)
  if not isClient then
    return
  end
  if isAllPlayer then
    for _, c_player in pairs(PlayerManager:getPlayers()) do
      c_player:sendPacket({ pid = "openGMHelper" })
      table.insert(GmIds, c_player.userId)
    end
   else
    local players = PlayerManager:getPlayers()
    local minDis = 99999999
    ---@type SBasePlayer
    local nearestPlayer
    for _, c_player in pairs(players) do
      local distance = MathUtil:distanceSquare3d(c_player:getPosition(), player:getPosition())
      if minDis > distance and c_player ~= player then
        minDis = distance
        nearestPlayer = c_player
      end
    end
    if nearestPlayer and not PlayerManager:isAIPlayer(nearestPlayer) then
      nearestPlayer:sendPacket({ pid = "openGMHelper" })
      table.insert(GmIds, nearestPlayer.userId)
    end
  end
  GUIGMControlPanel:hide()
end

function GMHelper:callCommand(name, ...)
    local func = self[name]
    if type(func) == "function" then
        func(self, ...)
    end
    local data = { name = name, params = { ... } }
    table.remove(data.params)
    PacketSender:sendLuaCommonData("GMCommand", json.encode(data))
end

function GMHelper:openCommonPacketDebug()
  CommonDataEvents.isDebug = true
end

function GMHelper:closeCommonPacketDebug()
  CommonDataEvents.isDebug = false
end

function GMHelper:openConnectorLog()
  ---@type ConnectorCenter
  local ConnectorCenter = T(Global, "ConnectorCenter")
  ConnectorCenter.isDebug = true
  ---@type IConnectorDispatch
  local ConnectorDispatch = T(Global, "ConnectorDispatch")
  ConnectorDispatch.isDebug = true
end

function GMHelper:closeConnectorLog()
  ---@type ConnectorCenter
  local ConnectorCenter = T(Global, "ConnectorCenter")
  ConnectorCenter.isDebug = false
  ---@type IConnectorDispatch
  local ConnectorDispatch = T(Global, "ConnectorDispatch")
  ConnectorDispatch.isDebug = false
end



function GMHelper:SetEnabledRenderFrameTimer(value)
  PerformanceStatistics.SetEnabledRenderFrameTimer(value)
  GUIGMControlPanel:hide()
end

function GMHelper:updateAllShaders()
  Blockman.Instance().m_gameSettings:updateAllShaders()
  GUIGMControlPanel:hide()
end

function GMHelper:setNeedMonitorShader()
  Blockman.Instance().m_gameSettings:setNeedMonitorShader(true)
  GUIGMControlPanel:hide()
end

function GMHelper:setDrawCallDisabled()
  PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  RenderExperimentSwitch.Instance():setDrawCallDisabled(true)
  GUIGMControlPanel:hide()
end

function GMHelper:setMinimumGeometry()
  PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  RenderExperimentSwitch.Instance():setMinimumGeometry(true)
  GUIGMControlPanel:hide()
end

function GMHelper:setColorBlendDisabled()
  PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  RenderExperimentSwitch.Instance():setColorBlendDisabled(true)
  GUIGMControlPanel:hide()
end

function GMHelper:setZTestDisabled()
  PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  RenderExperimentSwitch.Instance():setZTestDisabled(true)
  GUIGMControlPanel:hide()
end

function GMHelper:setZWriteDisabled()
  PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  RenderExperimentSwitch.Instance():setZWriteDisabled(true)
  GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallTexture()
  PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  RenderExperimentSwitch.Instance():setUseSmallTexture(true)
  GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallViewport()
  PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  RenderExperimentSwitch.Instance():setUseSmallViewport(true)
  GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallVBO()
  PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  RenderExperimentSwitch.Instance():setUseSmallVBO(true)
  GUIGMControlPanel:hide()
end

function GMHelper:setClearColorDisabled()
  PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  RenderExperimentSwitch.Instance():setClearColorDisabled(true)
  GUIGMControlPanel:hide()
end

function GMHelper:DisableGraphicAPI()
  Blockman.disableGraphicAPI()
end

function GMHelper:DisableGraphicAPIAndTestCPU()
  GUIGMControlPanel:hide()
  LuaTimer:schedule(function()
    Blockman.disableGraphicAPI()
    PerformanceStatistics.SetCPUTimerEnabled(true)
    PerformanceStatistics.SetGPUTimerEnabled(false)
    LuaTimer:schedule(function()
      PerformanceStatistics.PrintResults(30)
    end, 5100)
  end, 200)

end

function GMHelper:DisableGraphicAPIAndTestGPU()
  GUIGMControlPanel:hide()
  LuaTimer:schedule(function()
    Blockman.disableGraphicAPI()
    PerformanceStatistics.SetCPUTimerEnabled(false)
    PerformanceStatistics.SetGPUTimerEnabled(true)
    LuaTimer:schedule(function()
      PerformanceStatistics.PrintResults(30)
    end, 5100)
  end, 200)
end

function GMHelper:DisableGraphicAPIAndDrawCallTest()
  GUIGMControlPanel:hide()
  LuaTimer:schedule(function()
    Blockman.disableGraphicAPI()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
  end, 200)
end
function GMHelper:AddWarnLimit()
WarnHP = WarnHP + 1
UIHelper.showToast("^FF0000当前血量警示临界值: "..WarnHP)
end
function GMHelper:SubWarnLimit()
WarnHP = WarnHP - 1
UIHelper.showToast("^FF0000当前血量警示临界值: "..WarnHP)
end
function GMHelper:WarnTP()
if Off == 0 then
LuaTimer:schedule(function()
local player = PlayerManager:getClientPlayer()
local HP = player.Player:getHealth()
if HP <= WarnHP then
local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setPosition(ClientPos)
end
GMHelper:WarnTP()
end, 10)
end
end


function GMHelper:WarnJL()
   ClientPos = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPos.x, ClientPos.y, ClientPos.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPos.x.." "..ClientPos.y.." "..ClientPos.z.." ")
end

  
function GMHelper:getDistance()
GMHelper:openInput({ "玩家ID" }, function(ID)
    Zimiao(ID)
  end)
end
function Zimiao(ID)
if Off == 0 then
 LuaTimer:schedule(function()
     player = PlayerManager:getClientPlayer()
     Dplayer = PlayerManager:getPlayerByUserId(ID)
    if Dplayer then
      for i=1,999 do
      play =  player:getPosition()
--      PlayPos = VectorUtil.newVector3(play.x, play.y, play.z)
         UIDpos = Dplayer:getPosition()
--         PlayerPos = VectorUtil.newVector3(UIDpos.x, UIDpos.y+3, UIDpos.z)
        local Dis = (UIDpos.x - play.x)^2 + (play.z - UIDpos.z)
        local high = UIDpos.y - play.y
        local Dism = math.sqrt(Dis)
        UIHelper.showToast("你与目标距离: "..Dism.." 高度相差: "..high)
      end
    end
    
    Zimiao(ID)
  end, 10)
  end
end


function GMHelper:openScreenRecord()
  local names = { "Main-PoleControl-Move", "Main-PoleControl", "Main-FlyingControls", "Main-Fly" }
  local window = GUISystem.Instance():GetRootWindow()
  window:SetXPosition({ 0, 10000 })
  local Main = GUIManager:getWindowByName("Main")
  local count = Main:GetChildCount()
  for i = 1, count do
    local child = Main:GetChildByIndex(i - 1)
    local name = child:GetName()
    if not TableUtil.tableContain(names, name) then
      child:SetXPosition({ 0, 10000 })
      child:SetYPosition({ 0, 10000 })
    end
  end
  ClientHelper.putFloatPrefs("MainControlKeyAlphaNormal", 0)
  ClientHelper.putFloatPrefs("MainControlKeyAlphaPress", 0)
  GUIManager:getWindowByName("Main-Fly"):SetProperty("NormalImage", "")
  GUIManager:getWindowByName("Main-Fly"):SetProperty("PushedImage", "")
  GUIManager:getWindowByName("Main-PoleControl-BG"):SetProperty("ImageName", "")
  GUIManager:getWindowByName("Main-PoleControl-Center"):SetProperty("ImageName", "")
  GUIManager:getWindowByName("Main-Up"):SetProperty("ImageName", "")
  GUIManager:getWindowByName("Main-Drop"):SetProperty("ImageName", "")
  GUIManager:getWindowByName("Main-Down"):SetProperty("ImageName", "")
  GUIManager:getWindowByName("Main-Break-Block-Progress-Nor"):SetProperty("ImageName", "")
  GUIManager:getWindowByName("Main-Break-Block-Progress-Pre"):SetProperty("ImageName", "")
  Main:SetXPosition({ 0, -10000 })
  ClientHelper.putBoolPrefs("RenderHeadText", false)
  PlayerManager:getClientPlayer().Player:setActorInvisible(true)
end

function GMHelper:changeLuaHotUpdate(update)
  startLuaHotUpdate()
  HU.CanUpdate = update
end

function GMHelper:changeOpenEventDialog(isOpen)
  GUIGMMain:changeOpenEventDialog(isOpen)
end

function GMHelper:showUserRegion()
  UIHelper.showToast("游戏大区=" .. Game:getRegionId()
  .. "   玩家区域=" .. Game:getUserRegion())
end

---@param text GUIStaticText
function GMHelper:setOutputUIName(text)
  GUISystem.Instance():SetOutputUIName(not GUISystem.Instance():IsOutputUIName())
  text:SetText("打印UI(" .. (GUISystem.Instance():IsOutputUIName() and "开)" or "关)"))
end

function GMHelper:telnetClient()
  if not Platform.isWindow() then
    return
  end
  local misc = require("misc")
  local debugport = require "engine_base.debug.DebugPort"
  misc.win_exec("telnet.exe", "127.0.0.1 " .. debugport.port, nil, nil, true)
end

function GMHelper:telnetServer()
  if not Platform.isWindow() then
    return
  end
  local misc = require("misc")
  local debugport = require "engine_base.debug.DebugPort"
  misc.win_exec("telnet.exe", "127.0.0.1 " .. debugport.port, 1, 1, true)
end

function GMHelper:setGlobalShowText()
  Root.Instance():setShowText(not Root.Instance():isShowText())
end

function GMHelper:copyClientLog()
  if Platform.isWindow() then
    return
  end
  local path = Root.Instance():getWriteablePath() .. "client.log"
  local file = io.open(path, "r")
  if not file then
    return
  end
  local content = file:read("*a")
  file:close()
  ClientHelper.onSetClipboard(content)
  UIHelper.showToast("拷贝成功，请粘贴到钉钉上自动生成文件发送到群里")
end



function GMHelper:sendConnectorChatMsg(msgCount)
LuaTimer:schedule(function()
  if isClient or isStaging then
    ---@type ChatService
    local ChatService=T(Global,"ChatService")
    for i=1,msgCount do
      ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg,{ content="［此信息为自动刷］\n早点睡觉\n别看了\n傻逼CRIEX菜鸡\n次数："..i })
    end
  end
  GMHelper:sendConnectorChatMsg(msgCount)
  end,1000)
end

function GMHelper:sendConnectorChatMsg1(msgCount)
  if isClient or isStaging then
    ---@type ChatService
    local ChatService=T(Global,"ChatService")
    for i=1,msgCount do
      ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg,{ content="早点睡觉\n别看了\n傻逼CRIEX菜鸡"..i })
    end
  end
end

function GMHelper:sendConnectorChatMsg2(msgCount)
LuaTimer:schedule(function()
  if isClient or isStaging then
    ---@type ChatService
    local ChatService=T(Global,"ChatService")
    for i=1,msgCount do
      ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg,{ content="[此信息为自动发]\n我又回来了\n今早7点就停了\n次数："..i })
    end
  end
  GMHelper:sendConnectorChatMsg2(msgCount)
  end,1000)
end

function GMHelper:sendConnectorChatMsg3(msgCount)
LuaTimer:schedule(function()
  if isClient or isStaging then
    ---@type ChatService
    local ChatService=T(Global,"ChatService")
    for i=1,msgCount do
      ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg,{ content="[AUTO SEND]\nThis Message Is From SkyBlock DEV\n New Updates- GiveAway All SkyBlock Player Vip Game Pass \nFrom: BlockmanGo SkyBlock Dev"..i })
    end
  end
  GMHelper:sendConnectorChatMsg3(msgCount)
  end,1000)
end

function GMHelper:sendConnectorChatMsg4(msgCount)
LuaTimer:schedule(function()
  if isClient or isStaging then
    ---@type ChatService
    local ChatService=T(Global,"ChatService")
    for i=1,msgCount do
      ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg,{ content="哈\n哈\n哈\n哈\n哈\n哈\n哈\n哈\n哈\n哈\n哈\n哈\n哈\n哈\n哈\n哈\nF\nu\nc\nk\nY\no\nu\nG\na\ny\n此数："..i })
    end
  end
  GMHelper:sendConnectorChatMsg4(msgCount)
  end,1000)
end

function GMHelper:sendConnectorChatMsg5(msgCount)
  if isClient or isStaging then
    ---@type ChatService
    local ChatService=T(Global,"ChatService")
    for i=1,msgCount do
      ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg,{ content="我回来了各位\n想我了吗？\n我要刷到早上了哦"..i })
    end
  end
end

function GMHelper:sendConnectorChatMsg6(msgCount)
LuaTimer:schedule(function()
  if isClient or isStaging then
    ---@type ChatService
    local ChatService=T(Global,"ChatService")
    for i=1,msgCount do
      ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg,{ content="[自动发]\n测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试.测试."..i })
    end
  end
  GMHelper:sendConnectorChatMsg6(msgCount)
  end,1000)
end

function GMHelper:sendTestConnectorMsg(type)
  local data = {}
  data.a = 1
  data.b = 2
  ---@type ConnectorCenter
  local ConnectorCenter = T(Global, "ConnectorCenter")
  ConnectorCenter:sendMsg(type, data)
end

function GMHelper:queryBoolKey()
  GMHelper:openInput({ "" }, function(key)
    CustomDialog.builder()
    .setContentText(key .. "=" .. tostring(ClientHelper.getBoolForKey(key)))
    .setHideLeftButton()
    .show()
    GUIGMControlPanel:hide()
  end)
end

function GMHelper:queryStringKey()
  GMHelper:openInput({ "" }, function(key)
    CustomDialog.builder()
    .setContentText(key .. "=" .. ClientHelper.getStringForKey(key))
    .setHideLeftButton()
    .setRightText("复制到粘贴板")
    .setRightClickListener(function()
      ClientHelper.onSetClipboard(ClientHelper.getStringForKey(key))
      UIHelper.showToast("复制成功")
    end)
    .show()
    GUIGMControlPanel:hide()
  end)
end

function GMHelper:makeGmButtonTran()
  GUIGMMain:setTransparent()
end

function GMHelper:setRenderMainScreenSeparate(enable)
  Root.Instance():setRenderMainScreenSeparate(enable)
end

function GMHelper:setEnableMergeBlock(enable)
  Root.Instance():setEnableMergeBlock(true)
  UIHelper.showToast("1")
end

function GMHelper:AnvilToObj()
  local centerPos = VectorUtil.newVector3()
  local chunkWidth = 32
  AnvilToObj.doTranslate(centerPos, chunkWidth)
end

function GMHelper:SetUpBuild()
  GMHelper:openInput({ "" }, function(Savesta)
  ClientHelper.putIntPrefs("QuicklyBuildBlockNum", Savesta)
  UIHelper.showToast("^FF00EE连叠"..Savesta.."格")
end)
end

function GMHelper:NoFall() -- NoFall
A = not A
ClientHelper.putIntPrefs("SprintLimitCheck", 7)
if A then
UIHelper.showToast("^00FF00开启")
return
end
ClientHelper.putIntPrefs("SprintLimitCheck", 0)
UIHelper.showToast("^FF0000关闭")
end

function GMHelper:NoFallSet()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("SprintLimitCheck", Number)
        UIHelper.showToast("设置成功")
   end)
end

function GMHelper:inTheAirCheat()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(0.0, 3.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:GoTO10BlocksDown()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(0.0, 0.0, 1.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:GoTO20BlocksDown()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(0.0, 0.0, -1.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:GoTO10Blocks()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(1.0, 0.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:GoTO20Blocks()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(-1.0, 0.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:XTP50()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(2.5, 0.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:XRTP50()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(-2.5, 0.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:ZTP50()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(0.0, 0.0, 2.5)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:ZRTP50()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(0.0, 0.0, -2.5)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:linetp()
local YAW = PlayerManager:getClientPlayer().Player.rotationYaw
local yaw = math.rad(YAW)
local SX = math.sin(yaw)
local SZ = math.cos(yaw)
    local moveDir = VectorUtil.newVector3(-50*SX, 0.0, 50*SZ)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end

function GMHelper:linetpr()
local YAW = PlayerManager:getClientPlayer().Player.rotationYaw
local yaw = math.rad(YAW)
local SX = math.sin(yaw)
local SZ = math.cos(yaw)
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(2.5*SX, 0.0, -2.5*SZ)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:linetp5()
local YAW = PlayerManager:getClientPlayer().Player.rotationYaw
local yaw = math.rad(YAW)
local SX = math.sin(yaw)
local SZ = math.cos(yaw)
    local moveDir = VectorUtil.newVector3(-5*SX, 0.0, 5*SZ)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end

function GMHelper:linetpr5()
local YAW = PlayerManager:getClientPlayer().Player.rotationYaw
local yaw = math.rad(YAW)
local SX = math.sin(yaw)
local SZ = math.cos(yaw)
    local moveDir = VectorUtil.newVector3(-5*SX, 0.0, 5*SZ)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end

function GMHelper:linetp25()
local YAW = PlayerManager:getClientPlayer().Player.rotationYaw
local yaw = math.rad(YAW)
local SX = math.sin(yaw)
local SZ = math.cos(yaw)
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(-1.25*SX, 0.0, 1.25*SZ)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:linetpr25()
local YAW = PlayerManager:getClientPlayer().Player.rotationYaw
local yaw = math.rad(YAW)
local SX = math.sin(yaw)
local SZ = math.cos(yaw)
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(1.25*SX, 0.0, -1.25*SZ)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 20)
end

function GMHelper:tptest()
  LuaTimer:schedule(function()
    local Pos = PlayerManager:getClientPlayer():getPosition() 
    local posy = math.modf(Pos.y*100)
    local posx = math.modf(Pos.x*100)
    local posz = math.modf(Pos.z*100)
    local py = posy/100
    local px = posx/100
    local pz = posz/100
    local yaw = PlayerManager:getClientPlayer().Player.rotationYaw
    local directions = {"东", "东南", "南", "西南", "西", "西北", "北", "东北"}
    
    -- 映射偏航角到0-360度范围
    yaw = yaw % 360
    if yaw < 0 then
        yaw = yaw + 360
    end
    
    -- 计算方位序号
    local directionIndex = math.floor((yaw + 22.5) / 45) % 8 + 1
    
    -- 返回对应方位
    local direction = directions[directionIndex]
    MsgSender.sendTopTips(10, "▢FFFFFF00[CryIsHere] ▢FFFFFFFF作者ID：569448335 \n 朝向:"..direction.."\n X:"..px.." Y:"..py.." Z:"..pz)
    GMHelper:tptest()
  end, 10)
end

function GMHelper:testModiyScript()
  ClientHttpRequest.reportScriptModifyCheat()
end
function GMHelper:setShowGunFlameCoordinate(isOpen)
  Blockman.Instance():setShowGunFlameCoordinate(isOpen)
  if isOpen then
    GUIGMControlPanel:setBackgroundColor(Color.TRANS)
   else
    GUIGMControlPanel:setBackgroundColor({ 0, 0, 0, 0.784314 })
  end
end

function GMHelper:changeGunFlameParam(key, value)
  ClientHelper.putFloatPrefs(key, ClientHelper.getFloatPrefs(key) + value)
end

function GMHelper:copyShowGunFlameParam(view)
  local front = ClientHelper.getFloatPrefs("GunFlameFrontOff" .. view)
  local right = ClientHelper.getFloatPrefs("GunFlameRightOff" .. view)
  local down = ClientHelper.getFloatPrefs("GunFlameDownOff" .. view)
  local scale = ClientHelper.getFloatPrefs("GunFlameScale" .. view)
  front = math.floor(front * 100) / 100
  right = math.floor(right * 100) / 100
  down = math.floor(down * 100) / 100
  scale = math.floor(scale * 100) / 100
  local param = front .. "#" .. right .. "#" .. down .. "#" .. scale
  ClientHelper.onSetClipboard(param)
  UIHelper.showToast("拷贝成功")
end

function GMHelper:testinValidEffect()
  local templateName = "01_face_boy.mesh"
  local position = VectorUtil.newVector3(100.0, 10.0, 100.0)
  WorldEffectManager.Instance():addSimpleEffect(templateName, position, 1, 1, 1, 1, 1)
  UIHelper.showToast("测试 非法 特效 完成")
end

function GMHelper:outputItemLangFile()
  if not isClient then
    return
  end
  local items = {}
  for id = 1, 6000 do
    local item = Item.getItemById(id)
    if item then
      local lang = Lang:getItemName(id, 0)
      if lang == "" then
        lang = item:getUnlocalizedName()
      end
      items[tostring(id)] = lang
    end
  end
  local file = io.open(GameType .. "_item_name.json", "w")
  file:write(json.encode(items))
  file:close()
end

function GMHelper:MyLoveFly(text)
  A = not A
  ClientHelper.putBoolPrefs("EnableDoubleJumps", true)
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  ClientHelper.putBoolPrefs("EnableDoubleJumps", false)
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:GUISkyblockTest1()
  UIHelper.showGameGUILayout("GUIChristmas", 1)
  GUIGMControlPanel:hide()
end

function GMHelper:GUISkyblockTest2()
  UIHelper.showGameGUILayout("GUIGameTool")
  GUIGMControlPanel:hide()
end

function GMHelper:GUISkyblockTest3()
  UIHelper.showGameGUILayout("GUIRewardDetail", self.rewardId)
  GUIGMControlPanel:hide()
end



function GMHelper:ViewBobbing()
  A = not A
  ClientHelper.putBoolPrefs("IsViewBobbing", false)
  if A then
    UIHelper.showToast("^FF0000ViewBobbing: OFF")
    return
  end
  ClientHelper.putBoolPrefs("IsViewBobbing", true)
  UIHelper.showToast("^00FF00ViewBobbing: ON")
end

function GMHelper:BlockmanCollision()
  A = not A
  ClientHelper.putBoolPrefs("IsCreatureCollision", true)
  ClientHelper.putBoolPrefs("IsBlockmanCollision", true)
  if A then
    UIHelper.showToast("^00FF00BlockmanCollision: ON")
    return
  end
  ClientHelper.putBoolPrefs("IsBlockmanCollision", false)
  UIHelper.showToast("^FF0000BlockmanCollision: OFF")
  ClientHelper.putBoolPrefs("IsCreatureCollision", false)
end

function GMHelper:RenderWorld()
  GMHelper:openInput({ "" }, function(Number)
    ClientHelper.putIntPrefs("BlockRenderDistance", Number)
    UIHelper.showToast("^00FF00成功")
  end)
end

function GMHelper:Fog()
  A = not A
  ClientHelper.putBoolPrefs("DisableFog", true)
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  ClientHelper.putBoolPrefs("DisableFog", false)
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:WWE_Camera()
  A = not A
  ClientHelper.putBoolPrefs("IsSeparateCamera", true)
  if A then
    UIHelper.showToast("^00FF00SeparateCamera: Enabled")
    return
  end
  ClientHelper.putBoolPrefs("IsSeparateCamera", false)
  UIHelper.showToast("^FF0000SeparateCamera: Disabled")
end

function GMHelper:ResetXD()
  ClientHelper.putStringPrefs("RunSkillName", "run")
  GUIGMControlPanel:hide()
end

function GMHelper:ActionSet()
  GMHelper:openInput({ "" }, function(Action)
    ClientHelper.putStringPrefs("RunSkillName", Action)
  end)
end

function GMHelper:WalkSMG()
  ClientHelper.putStringPrefs("RunSkillName", "smg_walk")
  GUIGMControlPanel:hide()
end

function GMHelper:SneakXD()
  ClientHelper.putStringPrefs("RunSkillName", "sneak")
  GUIGMControlPanel:hide()
end

function GMHelper:SitXD()
  ClientHelper.putStringPrefs("RunSkillName", "sit1")
  GUIGMControlPanel:hide()
end

function GMHelper:SitXD2()
  ClientHelper.putStringPrefs("RunSkillName", "sit2")
  GUIGMControlPanel:hide()
end

function GMHelper:SitXD3()
  ClientHelper.putStringPrefs("RunSkillName", "sit3")
  GUIGMControlPanel:hide()
end

function GMHelper:rideDragonXD()
  ClientHelper.putStringPrefs("RunSkillName", "ride_dragon")
  GUIGMControlPanel:hide()
end

function GMHelper:SwimXD()
  ClientHelper.putStringPrefs("RunSkillName", "swim")
  GUIGMControlPanel:hide()
end

function GMHelper:ArmSpeed()
  GMHelper:openInput({ "" }, function(Number)
    ClientHelper.putIntPrefs("ArmSwingAnimationEnd", Number)
    UIHelper.showToast("^00FF00成功")
  end)
end

function GMHelper:CameraFunct()
  GMHelper:openInput({ "" }, function(Number)
    ClientHelper.putFloatPrefs("ThirdPersonDistance", Number)
    UIHelper.showToast("^00FF00成功")
  end)
end

function GMHelper:CloudsOFF()
  ClientHelper.putBoolPrefs("DisableRenderClouds", true)
  UIHelper.showToast("^FF0000关闭")
  GUIGMControlPanel:hide()
end

function GMHelper:BowSpeed()
  ClientHelper.putFloatPrefs("BowPullingSpeedMultiplier", 1000)
  ClientHelper.putFloatPrefs("BowPullingFOVMultiplier", 0)
  UIHelper.showToast("^00FF00开启")
  GUIGMControlPanel:hide()
end

function GMHelper:HeadText()
  A = not A
  ClientHelper.putBoolPrefs("RenderHeadText", true)
  if A then
    UIHelper.showToast("^00FF00Head text render now ON")
    return
  end
  ClientHelper.putBoolPrefs("RenderHeadText", false)
  UIHelper.showToast("^FF0000Head text render now OFF")
end

function GMHelper:changePlayerActor(sex)
  if isGameStart then
    if sex == 1 then
      ClientHelper.putStringPrefs("BoyActorName", "boy.actor")
      ClientHelper.putStringPrefs("GirlActorName", "boy.actor")
     else
      ClientHelper.putStringPrefs("BoyActorName", "girl.actor")
      ClientHelper.putStringPrefs("GirlActorName", "girl.actor")
    end
   else
    if sex == 1 then
      ClientHelper.putStringPrefs("BoyActorName", "boy.actor")
      ClientHelper.putStringPrefs("GirlActorName", "boy.actor")
     else
      ClientHelper.putStringPrefs("BoyActorName", "girl.actor")
      ClientHelper.putStringPrefs("GirlActorName", "girl.actor")
    end
  end
  local players = PlayerManager:getPlayers()
  for _, player in pairs(players) do
    if player.Player then
      player.Player.m_isPeopleActor = false
      EngineWorld:restorePlayerActor(player)
    end
  end
  UIHelper.showToast("^00FF00成功")
  GUIGMControlPanel:hide()
end
--destroyAllEntityActor()
function GMHelper:BanClickCD(text)
  A = not A
  ClientHelper.putBoolPrefs("banClickCD", true)
    ClientHelper.putBoolPrefs("RemoveClickCD", true)
    ClientHelper.putIntPrefs("HurtProtectTime", 0)
    ClientHelper.putBoolPrefs("BanEntityHitCD", true)
    ClientHelper.putIntPrefs("ClickSceneCD", 0)
        PlayerManager:getClientPlayer().Player:setIntProperty("bedWarAttackCD", 0)
  if A then
    UIHelper.showToast("^00FF00CD 已开启")
    return
  end
  ClientHelper.putBoolPrefs("banClickCD", false)
    ClientHelper.putBoolPrefs("RemoveClickCD", false)
    ClientHelper.putIntPrefs("HurtProtectTime", 4)
    ClientHelper.putBoolPrefs("BanEntityHitCD", false)
    ClientHelper.putIntPrefs("ClickSceneCD", 4)
        PlayerManager:getClientPlayer().Player:setIntProperty("bedWarAttackCD", 4)
  UIHelper.showToast("^FF00000CD 已关闭")
end

function GMHelper:Fly(text)
  A = not A
  ClientHelper.putBoolPrefs("EnableDoubleJumps", true)
ClientHelper.putBoolPrefs("EnableFly", true)
  if A then
    UIHelper.showToast("^00FF0已开启")
    return
  end
  ClientHelper.putBoolPrefs("EnableDoubleJumps", true)
ClientHelper.putBoolPrefs("EnableFly", true)
  UIHelper.showToast("^FF0000 已关闭")
end

function GMHelper:ShowAllCobtrolXD()
  RootGuiLayout.Instance():showMainControl()
end

function GMHelper:PersonView()
  GMHelper:openInput({ "" }, function(Number)
    Blockman.Instance():setPersonView(Number)
    UIHelper.showToast("^00FF00Changed")
  end)
end

function GMHelper:BreakParticles()
  GMHelper:openInput({ "" }, function(Number)
    ClientHelper.putIntPrefs("BlockDestroyEffectSize", Number)
    UIHelper.showToast("^00FF00成功")
  end)
end

function GMHelper:JailBreakBypass()
  RootGuiLayout.Instance():showMainControl()
  GUIGMControlPanel:hide()
end

function GMHelper:SpeedLineMode()
  local strength = 1
  local interval = 0.01
  Blockman.Instance().m_gameSettings:setPatternSpeedLine(strength, interval)
  UIHelper.showToast("^00FF00Speed Line = Enable!")
  GUIGMControlPanel:hide()
end

function GMHelper:SpeedLineModeDisable()
  local strength = 0
  local interval = 0
  Blockman.Instance().m_gameSettings:setPatternSpeedLine(strength, interval)
  UIHelper.showToast("^FF0000Speed Line = Disabled!")
  GUIGMControlPanel:hide()
end

function GMHelper:PatternTorchMode()
  local strength = 1
  Blockman.Instance().m_gameSettings:setPatternTorchStrength(strength)
  UIHelper.showToast("^00FF00PatternTorch = Enabled!")
  GUIGMControlPanel:hide()
end

function GMHelper:PatternTorchModeOFF()
  local strength = 0
  Blockman.Instance().m_gameSettings:setPatternTorchStrength(strength)
  UIHelper.showToast("^FF0000PatternTorch = Disabled!")
  GUIGMControlPanel:hide()
end

function GMHelper:CameraFlipModeRESET()
  Blockman.Instance().m_gameSettings:setFovSetting(1)
  GUIGMControlPanel:hide()
end

function GMHelper:CameraFlipModeON()
  Blockman.Instance().m_gameSettings:setFovSetting(90)
  GUIGMControlPanel:hide()
end

function GMHelper:Iikj(player)
  local pos = player:getPosition()
  pos.y = pos.y + 0.5
  local yaw = player:getYaw()
  player:teleportPosWithYaw(pos, yaw)
  GUIGMControlPanel:hide()
end

function GMHelper:GUItest1()
  MsgSender.sendMsg("IikjLol")
  MsgSender.sendMsg("IikjLol")
  MsgSender.sendMsg("IikjLol")
  MsgSender.sendMsg(10004, "IikjLol")
  MsgSender.sendMsg(10003, "IikjLol")
  MsgSender.sendMsg(10002, "IikjLol")
  MsgSender.sendMsg(10001, "IikjLol")
  MsgSender.sendMsg(10000, "IikjLol")
  MsgSender.sendMsg(1, "IikjLol")
end



function GMHelper:FlyDev()
  GUIManager:hideWindowByName("Main.binary")
  GUIManager:hideWindowByName("Main.json")
  GUIGMControlPanel:hide()
end

function GMHelper:HideHP()
  GUIManager:getWindowByName("PlayerInfo-Health"):SetVisible(false)
end

function GMHelper:ShowHP()
  GUIManager:getWindowByName("PlayerInfo-Health"):SetVisible(true)
end

function GMHelper:FlyDev2()
  for blockId = 1, 40000 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      Blockman.Instance():setBloomEnable(true)
      Blockman.Instance():enableFullscreenBloom(true)
      Blockman.Instance():setBlockBloomOption(100)
      Blockman.Instance():setBloomIntensity(100)
      Blockman.Instance():setBloomSaturation(100)
      Blockman.Instance():setBloomThreshold(100)
      UIHelper.showToast("^00FF00Speed Break Block = 0")
      GUIGMControlPanel:hide()
    end
  end
end



function GMHelper:SetBobbing()
  GMHelper:openInput({ "" }, function(Number)
    ClientHelper.putFloatPrefs("PlayerBobbingScale", Number)
    UIHelper.showToast("^00FF00Changed")
  end)
end

function GMHelper:test200()
  MsgSender.sendMsg(Messages:gameResetTimeHint())
  GUIGMControlPanel:hide()
end

function GMHelper:test600()
  local players = PlayerManager:getPlayers()
  for _, player in pairs(players) do
    if player.Player then
      player.Player.m_isPeopleActor = false
      EngineWorld:restorePlayerActor(player)
    end
  end
  UIHelper.showToast("^00FF00yes")
  GUIGMControlPanel:hide()
end

function GMHelper:JustClick()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(0.0, 30.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 200000000000000000000000000000000000)
end

function GMHelper:JustClick2()
  LuaTimer:scheduleTimer(function()
    local moveDir = VectorUtil.newVector3(0.0, 300.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end, 5, 200000000000000000000000000000000000)
end

function GMHelper:OffChat()
  GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
  GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
end

function GMHelper:OnChat()
  GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
  GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
end

function GMHelper:Noclip()
  A = not A
  for blockId = 1, 40000 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 1, 40000 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:NoclipOP()
  A = not A
  for blockId = 3, 133 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 3, 133 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end


function GMHelper:NoObsidian1()
  A = not A
  for blockId = 49, 50 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 49, 50 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:NoOakPlanks1()
  A = not A
  for blockId = 5, 6 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 5, 6 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:NoGlass1()
  A = not A
  for blockId = 94, 95 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 94, 95 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:NoEndStone1()
  A = not A
  for blockId = 120, 121 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 120, 121 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:NoWool1()
  A = not A
  for blockId = 1441, 1444 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 1441, 1444 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:NoBomb1()
  A = not A
  for blockId = 593, 594 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 593, 594 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:NoIDoor1()
  A = not A
  for blockId = 241, 242 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 241, 242 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end

function GMHelper:NoQuartz1()
  A = not A
  for blockId = 155, 156 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
    end
  end
  if A then
    UIHelper.showToast("^00FF00开启")
    return
  end
  for blockId = 155, 156 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    end
  end
  UIHelper.showToast("^FF0000关闭")
end


--[[function GMHelper:test2222()
    A = not A
    LuaTimer:scheduleTimerWithEnd(function()
    PlayerManager:getClientPlayer().Player:setGlide(true)
	end, 0.2, 900000000000000000000000)
   if A then
    LuaTimer:scheduleTimerWithEnd(function()
    PlayerManager:getClientPlayer().Player:setGlide(false)
	end, 0.2, 1)
end
end]]

function GMHelper:JumpHeight()
  GMHelper:openInput({ "" }, function(Number)
    local player = PlayerManager:getClientPlayer()
    if player and player.Player then
      player.Player:setFloatProperty("JumpHeight", Number)
      UIHelper.showToast("^00FF00成功")
    end
  end)
end

function GMHelper:addCurrencyCustom(player)
  GMHelper:openInput(player, { "100" }, function(currency)
    currency = tonumber(currency) or 0
    player:addCurrency(currency, "GM")
  end)
end

function GMHelper:GUIOpener()
  GMHelper:openInput({ ".json" }, function(Number)
    GUIManager:showWindowByName(Number)
  end)
end

function GMHelper:GUIViewOFF()
  GMHelper:openInput({ ".json" }, function(Number)
    GUIManager:hideWindowByName(Number)
  end)
end

function GMHelper:InsideGUI()
  GMHelper:openInput({ "", "" }, function(Number, Exe)
    GUIManager:getWindowByName(Number):SetVisible(Exe)
  end)
end

function GMHelper:ChangeNick()
  GMHelper:openInput({ "" }, function(Nick)
    PlayerManager:getClientPlayer().Player:setShowName(Nick)
    UIHelper.showToast("^FF00EE已更改")
  end)
end

function GMHelper:LongJump()
  LuaTimer:scheduleTimer(function()
    PlayerManager:getClientPlayer().Player:setGlide(true)
  end, 0.2, 900000000000000000000000)
end

function GMHelper:AdvancedUp()
  GMHelper:openInput({ "" }, function(Num)
    local moveDir = VectorUtil.newVector3(0.0, Num, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end)
end

function GMHelper:AdvancedIn()
  GMHelper:openInput({ "" }, function(Num)
    local moveDir = VectorUtil.newVector3(Num, 0.0, 0.0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end)
end

function GMHelper:AdvancedOn()
  GMHelper:openInput({ "" }, function(Num)
    local moveDir = VectorUtil.newVector3(0.0, 0.0, Num)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end)
end

function GMHelper:AdvancedDirect()
  GMHelper:openInput({ "", "", "" }, function(Num, Num2, Num3)
    local moveDir = VectorUtil.newVector3(Num, Num2, Num3)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end)
end

function GMHelper:tpPos()
  GMHelper:openInput({ "", "", "" }, function(Num, Num2, Num3)
    local playerPos = VectorUtil.newVector3(Num, Num2, Num3)
    local moveDir = VectorUtil.newVector3(1.0, 10.0, 1.0)
    PlayerManager:getClientPlayer().Player:setPosition(playerPos)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  end)
end

function GMHelper:HideHoldItem()
  A = not A
  PlayerManager:getClientPlayer():setHideHoldItem(true)
  UIHelper.showToast("^FF00EETrue")
  if A then
    PlayerManager:getClientPlayer():setHideHoldItem(false)
    UIHelper.showToast("^FF00EEFalse")
  end
end

function GMHelper:DevFlyI()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:moveEntity(moveDir)
  UIHelper.showToast("^FF00EE成功")
end

function GMHelper:AntiFlyDetect()
local Flycount = 1
if Flycount<=99900 then
    LuaTimer:schedule(function()
    local player = PlayerManager:getClientPlayer()
    local moveDown = VectorUtil.newVector3(0.0, -2.0, 0.0)
    local blockPos = PlayerManager:getClientPlayer():getPosition()
  local newBlockPos = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z)
  EngineWorld:setBlock(newBlockPos, 159)
  player.Player:moveEntity(moveDown)
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  player.Player:setAllowFlying(true)
  player.Player:setFlying(true)
  player.Player:moveEntity(moveDir)
  Flycount = Flycount + 1
   GMHelper:AntiFlyDetect()
   end, 5000)
   end
end
function GMHelper:OFFFLY()
local player = PlayerManager:getClientPlayer()
local moveDown = VectorUtil.newVector3(0.0, -2.0, 0.0)
player.Player:moveEntity(moveDown)
end
function GMHelper:SharpFly()
  A = not A
  ClientHelper.putBoolPrefs("DisableInertialFly", true)
  UIHelper.showToast("^00FF00开启")
  if A then
    ClientHelper.putBoolPrefs("DisableInertialFly", false)
    UIHelper.showToast("^FF0000关闭")
  end
end

function GMHelper:WatchMode()
  A = not A
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  PlayerManager:getClientPlayer().Player:setAllowFlying(true)
  PlayerManager:getClientPlayer().Player:setFlying(true)
  PlayerManager:getClientPlayer().Player:setWatchMode(true)
  PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  UIHelper.showToast("^FF00EE开")
  if A then
  PlayerManager:getClientPlayer().Player:setAllowFlying(false)
  PlayerManager:getClientPlayer().Player:setFlying(false)
  PlayerManager:getClientPlayer().Player:setWatchMode(false)
  UIHelper.showToast("^FF00EE关")
end
end

function GMHelper:WaterPush()
  A = not A
  local entity = PlayerManager:getClientPlayer().Player
  entity:setBoolProperty("ignoreWaterPush", true)
  UIHelper.showToast("^FF00EEON")
  if A then
    entity:setBoolProperty("ignoreWaterPush", false)
    UIHelper.showToast("^FF00EEOFF")
  end
end

function GMHelper:changeScale()
  GMHelper:openInput({ "" }, function(Scale)
    local entity = PlayerManager:getClientPlayer().Player
    entity:setScale(Scale)
    UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:BlockOFF()
  GMHelper:openInput({ "" }, function(Numer)
    local blockId = Numer
    local block = BlockManager.getBlockById(blockId)
    block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
  end)
end

function GMHelper:BlockON()
  GMHelper:openInput({ "" }, function(Numer)
    local blockId = Numer
    local block = BlockManager.getBlockById(blockId)
    block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
  end)
end

function GMHelper:SpeedManager()
  GMHelper:openInput({ "" }, function(Number)
    PlayerManager:getClientPlayer().Player:setSpeedAdditionLevel(Number)
    UIHelper.showToast("^FF00EE开启")
  end)
end

function GMHelper:SpeedUp()
  ClientHelper.putIntPrefs("SpeedAddMax", 20000000)
  UIHelper.showToast("^FF0000开启")
end

function GMHelper:XRayManagerON()
  GMHelper:openInput({ "erase this text and write block id" }, function(Numer)
    cBlockManager.cGetBlockById(Numer):setNeedRender(false)
    UIHelper.showToast("^FF00EE开启")
  end)
end

function GMHelper:XRayManagerOFF()
  GMHelper:openInput({ "erase this text and write block id" }, function(Numer)
    cBlockManager.cGetBlockById(Numer):setNeedRender(true)
    UIHelper.showToast("^FF00EE关闭")
  end)
end

function GMHelper:OFFDARK()
  ---设置轨道不渲染
  cBlockManager.cGetBlockById(66):setNeedRender(false)
  cBlockManager.cGetBlockById(253):setNeedRender(false)
  for blockId = 1, 40000 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setLightValue(150, 150, 150)
      UIHelper.showToast("^00FF00成功")
      GUIGMControlPanel:hide()
    end
  end
end

function GMHelper:SpawnNPC()
  GMHelper:openInput({ ".actor" }, function(actor)
    local pos = PlayerManager:getClientPlayer():getPosition()
    local yaw = PlayerManager:getClientPlayer():getYaw()
    EngineWorld:addActorNpc(pos, yaw, actor, function(entity)
    end)
  end)
end

function GMHelper:spawnCar()
  GMHelper:openInput({ "Car ID (erase this text and write carID)" }, function(ID)
    local pos = PlayerManager:getClientPlayer():getPosition()
    Blockman.Instance():getWorld():addVehicle(pos, ID, 5)
    UIHelper.showToast("^00FFEECar Spawn Success")
  end)
end




function TPplayerv1(ID)
if Off == 0 then
 LuaTimer:schedule(function()
     player = PlayerManager:getClientPlayer().Player
     Dplayer = PlayerManager:getPlayerByUserId(ID)
    
    if Dplayer then
      for i=1,999 do
         UIDpos = Dplayer:getPosition()
         PlayerPos = VectorUtil.newVector3(UIDpos.x, UIDpos.y+3, UIDpos.z)
        player:setPosition(PlayerPos)
      end
    end
    
    TPplayerv1(ID)
  end, 10)
  end
end

function GMHelper:SpawnBlockSwim()
local yaw = PlayerManager:getClientPlayer().Player.rotationYaw
    local directions = {"东", "南", "西", "北"}
    
    -- 映射偏航角到0-360度范围
    yaw = yaw % 360
    if yaw < 0 then
        yaw = yaw + 360
    end
    
    -- 计算方位序号
    local directionIndex = math.floor((yaw + 45) / 90) % 4 + 1
    local blockPos = PlayerManager:getClientPlayer():getPosition()
GMHelper:openInput({ "填20,42,43,80都可以","填8,9,10,11","距离自己多远生成,推荐5","距离自己多高生成,推荐0或者4" }, function(martin,block,distance,hight)
local blockPos = PlayerManager:getClientPlayer():getPosition()
if directionIndex == 1 then
 for x = -12 ,12, 1 do
          for z = 0, 56, 1 do
            for y = -4, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y+hight, blockPos.z+z+distance)
            EngineWorld:setBlock(newBlockPos, martin)
            end
         end
      end
      for x = -9 ,9, 1 do
          for z = 3, 53, 1 do
            for y = -3, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y+hight, blockPos.z+z+distance)
            EngineWorld:setBlock(newBlockPos, block)
            end
         end
      end
      end
      if directionIndex == 2 then
 for z = -12 ,12, 1 do
          for x = -56, 0, 1 do
            for y = -4, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x-distance, blockPos.y+y+hight, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, martin)
            end
         end
      end
      for z = -9 ,9, 1 do
          for x = -53, -3, 1 do
            for y = -3, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x-distance, blockPos.y+y+hight, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, block)
            end
         end
      end
      end
      if directionIndex == 3 then
 for x = -12 ,12, 1 do
          for z = -56, 0, 1 do
            for y = -4, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y+hight, blockPos.z+z-distance)
            EngineWorld:setBlock(newBlockPos, martin)
            end
         end
      end
      for x = -9 ,9, 1 do
          for z = -53, -3, 1 do
            for y = -3, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y+hight, blockPos.z+z-distance)
            EngineWorld:setBlock(newBlockPos, block)
            end
         end
      end
      end
      if directionIndex == 4 then
 for z = -12 ,12, 1 do
          for x = 0, 56, 1 do
            for y = -4, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x+distance, blockPos.y+y+hight, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, martin)
            end
         end
      end
      for z = -9 ,9, 1 do
          for x = 3, 53, 1 do
            for y = -3, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x+distance, blockPos.y+y+hight, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, block)
            end
         end
      end
      end
      end)
end

function GMHelper:SpawnBlockTowordv2()
    local player = PlayerManager:getClientPlayer()
    if player == nil then
        return
    end
    
    local yaw = player.Player.rotationYaw
    local directions = {"东", "东南", "南", "西南", "西", "西北", "北", "东北"}
    
    yaw = yaw % 360
    if yaw < 0 then
        yaw = yaw + 360
    end
    
    local directionIndex = math.floor((yaw + 22.5) / 45) % 8 + 1
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    
    if directionIndex == 1 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+i, blockPos.y-2, blockPos.z+z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 2 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+i-z, blockPos.y-2, blockPos.z+i+z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 3 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+i)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 4 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+i-z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 5 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+i, blockPos.y-2, blockPos.z-z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 6 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+i+z, blockPos.y-2, blockPos.z+i-z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 7 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+i)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    elseif directionIndex == 8 then
        for i = -2, 2, 1 do
            for z = 1, 100, 1 do
                local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+i+z)
                EngineWorld:setBlock(blockPos, 159)
            end
        end
    end
end
function GMHelper:TPplayer()
  GMHelper:openInput({ "玩家ID" }, function(ID)
    TPplayerv1(ID)
  end)
end

function GMHelper:TeleportByUID()
  GMHelper:openInput({ "玩家ID" }, function(ID)
    local player = PlayerManager:getClientPlayer().Player
    local Dplayer = PlayerManager:getPlayerByUserId(ID)
    local UIDpos = Dplayer:getPosition()
    local PlayerPos = VectorUtil.newVector3(UIDpos.x, UIDpos.y+3, UIDpos.z)
    if Dplayer then
      player:setPosition(PlayerPos)
    end
  end)
end

function GMHelper:ChangeActorForMe()
  local entity = PlayerManager:getClientPlayer().Player
  GMHelper:openInput({ ".actor" }, function(actor)
    Blockman.Instance():getWorld():changePlayerActor(entity, actor)
    Blockman.Instance():getWorld():changePlayerActor(entity, actor)
    entity.m_isPeopleActor = false
    EngineWorld:restorePlayerActor(entity)
    UIHelper.showToast("^00FFEE成功")
  end)
end

function GMHelper:AFKmode()
  A = not A
  PlayerManager:getClientPlayer().Player.m_rotateSpeed = 1
  UIHelper.showToast("^FF00EEStart")
  if A then
    PlayerManager:getClientPlayer().Player.m_rotateSpeed = 0
    UIHelper.showToast("^FF00EEStop")
  end
end

function GMHelper:DevnoClip()
  A = not A
  PlayerManager:getClientPlayer().Player.noClip = true
  UIHelper.showToast("^FF00EE成功")
  if A then
    PlayerManager:getClientPlayer().Player.noClip = false
    UIHelper.showToast("^FF00EE关闭")
  end
end

function GMHelper:StepHeight()
  GMHelper:openInput({ "StepHeight Value" }, function(data)
    PlayerManager:getClientPlayer().Player.stepHeight = data
    UIHelper.showToast("^FF00EESuccess")
  end)
end
function GMHelper:TL()
if Off == 0 then
LuaTimer:schedule(function()
PlayerManager:getClientPlayer().Player.spYaw = true
PlayerManager:getClientPlayer().Player.spYawRadian = 45
TL1()
end, 50)
end
end
function TL1()
LuaTimer:schedule(function()
PlayerManager:getClientPlayer().Player.spYawRadian = 90
TL2()
end, 50)
end
function TL2()
LuaTimer:schedule(function()
PlayerManager:getClientPlayer().Player.spYawRadian = 135
TL3()
end, 50)
end
function TL3()
LuaTimer:schedule(function()
PlayerManager:getClientPlayer().Player.spYawRadian = 180
TL4()
end, 50)
end
function TL4()
LuaTimer:schedule(function()
PlayerManager:getClientPlayer().Player.spYawRadian = 225
TL5()
end, 50)
end
function TL5()
LuaTimer:schedule(function()
PlayerManager:getClientPlayer().Player.spYawRadian = 270
TL6()
end, 50)
end
function TL6()
LuaTimer:schedule(function()
PlayerManager:getClientPlayer().Player.spYawRadian = 315
GMHelper:TL()
end, 50)
end
function GMHelper:SpYaw()
  A = not A
  PlayerManager:getClientPlayer().Player.spYaw = true
  UIHelper.showToast("^FF00EE开启")
  if A then
    PlayerManager:getClientPlayer().Player.spYaw = false
    UIHelper.showToast("^FF00EE关闭")
  end
end

function GMHelper:SpYawSet()
  GMHelper:openInput({ "" }, function(data)
    PlayerManager:getClientPlayer().Player.spYawRadian = data
    UIHelper.showToast("^FF00EE开启")
  end)
end

function GMHelper:HairSet()
  GMHelper:openInput({ "" }, function(Data)
    PlayerManager:getClientPlayer().Player.m_isEquipWing = true
    PlayerManager:getClientPlayer().Player.m_isClothesChange = true
    PlayerManager:getClientPlayer().Player.m_isClothesChanged = true
    UIHelper.showToast("^FF00EE开启")
  end)
end

function GMHelper:SetHideAndShowArmor()
  A = not A
  LogicSetting.Instance():setHideArmor(true)
  UIHelper.showToast("^FF00EE开启")
  if A then
    LogicSetting.Instance():setHideArmor(false)
    UIHelper.showToast("^FF00EE关闭")
  end
end

--  LogicSetting.Instance():setHideArmor(true)

--entity.m_rotateSpeed = 0

function GMHelper:SettingLongjump()
  GMHelper:openInput({ "speedglide", "drop resistance" }, function(Num1, Num2)
    local player = PlayerManager:getClientPlayer().Player
    player.m_isGlide = true
    player.m_glideMoveAddition = Num1
    player.m_glideDropResistance = Num2
    UIHelper.showToast("^FF00EE开启")
  end)
end

function GMHelper:SetAlpha()
  GMHelper:openInput({ "Gui name", "alpha" }, function(GUI, Number)
    GUIManager:getWindowByName(GUI):SetAlpha(Number)
    UIHelper.showToast("^FF00EE开启")
  end)
end
--Region Clothes -- Start
function GMHelper:ChangeHair()
  GMHelper:openInput({ "number" }, function(Kelg)
    local player = PlayerManager:getClientPlayer().Player
    player.m_outLooksChanged = true
    player.m_hairID = Kelg
    UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:ChangeFace()
  GMHelper:openInput({ "number" }, function(Kelg)
    local player = PlayerManager:getClientPlayer().Player
    player.m_outLooksChanged = true
    player.m_faceID = Kelg
    UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:ChangeTops()
  GMHelper:openInput({ "number" }, function(Kelg)
    local player = PlayerManager:getClientPlayer().Player
    player.m_outLooksChanged = true
    player.m_topsID = Kelg
    UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:ChangePants()
  GMHelper:openInput({ "number" }, function(Kelg)
    local player = PlayerManager:getClientPlayer().Player
    player.m_outLooksChanged = true
    player.m_pantsID = Kelg
    UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:ChangeShoes()
  GMHelper:openInput({ "number" }, function(Kelg)
    local player = PlayerManager:getClientPlayer().Player
    player.m_outLooksChanged = true
    player.m_shoesID = Kelg
    UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:ChangeGlasses()
  GMHelper:openInput({ "number" }, function(Kelg)
    local player = PlayerManager:getClientPlayer().Player
    player.m_outLooksChanged = true
    player.m_glassesId = Kelg
    UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:ChangeScarf()
  GMHelper:openInput({ "number" }, function(Kelg)
    local player = PlayerManager:getClientPlayer().Player
    player.m_outLooksChanged = true
    player.m_scarfId = Kelg
    UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:ChangeWing()
  GMHelper:openInput({ "number" }, function(Kelg)
    local player = PlayerManager:getClientPlayer().Player
    player.m_outLooksChanged = true
    player.m_wingId = Kelg
    UIHelper.showToast("^FF00EESuccess")
  end)
end

--End Region Clothes -- End
--Region INFO --
function GMHelper:ShowRegion()
  UIHelper.showToast("RegionID=" .. Game:getRegionId())
end

function GMHelper:GameID()
  UIHelper.showToast("GameID=" .. CGame.Instance():getGameType())
end

function GMHelper:LogInfo()
  local content = HostApi.getClientInfo()
  ClientHelper.onSetClipboard(content)
  UIHelper.showToast("^FF00EESuccess")
end

function GMHelper:GetID()
  local players = PlayerManager:getPlayers()
  for i,v in pairs(players) do
   MsgSender.sendMsg("^FF0000玩家信息: " .. string.format("^FF0000玩家名字: %s {} ID: %s {} 性别: %s", v:getName(), v.userId, v.Player:getSex()))
  end
end

function GMHelper:GetAllInfoT()
  local players = PlayerManager:getPlayers()
  for _, player in pairs(players) do
    MsgSender.sendMsg("^FF0000INFO: " .. string.format("^00FF00UserName: %s {} ID: %s {} Gender: %s", player:getName(), player.userId, player.Player:getSex()))
  end
end

function GMHelper:test2300()
  GMHelper:openInput({ "" }, function(Num1)
    local player = PlayerManager:getClientPlayer().Player
    player.length = Num1
    player.isCollidedHorizontally = true
    player.isCollidedVertically = true
    player.isCollided = true
  end)
end

--233-2=215
--addChatMessage
function GMHelper:test1222()
  local player = PlayerManager:getClientPlayer().Player
  player.m_canBuildBlockQuickly = true
  player.m_quicklyBuildBlock = true
  UIHelper.showToast("2:")
end
--x364 z240
-- REGION TEST --
function GMHelper:test2222()
  local player = PlayerManager:getClientPlayer().Player
  player.m_opacity = 0.2
  UIHelper.showToast("1:")
end

function GMHelper:spawnCar()
  GMHelper:openInput({ "Car ID (erase this text and write carID)" }, function(ID)
    local pos = PlayerManager:getClientPlayer():getPosition()
    local yaw = PlayerManager:getClientPlayer():getYaw()
    Blockman.Instance():getWorld():addVehicle(pos, ID, yaw)
    UIHelper.showToast("^FF00EECar Spawn Success")
  end)
end

function GMHelper:SpawnItem()
  GMHelper:openInput({ "ID", "Count" }, function(Id, Count)
    local position = PlayerManager:getClientPlayer():getPosition()
    EngineWorld:addEntityItem(Id, Count, 0, 600, position, VectorUtil.ZERO)
  end)
end

function GMHelper:SetBlockToAir()
  GMHelper:openInput({ "block Position X", "block Position Y", "block Position Z" }, function(X, Y, Z)
    local blockPos = VectorUtil.newVector3(X, Y, Z)
    EngineWorld:setBlockToAir(blockPos)
  end)
end

function GMHelper:SpawnBlock()
  GMHelper:openInput({ "" }, function(martin)
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    EngineWorld:setBlock(blockPos, martin)
  end)
end


function GMHelper:btSpawnBlock()
  GMHelper:openInput({ "" }, function(martin)
  local blockPos = PlayerManager:getClientPlayer():getPosition() 
  count = 1
  ceshi(blockPos,martin,count)
  end)
end

function GMHelper:btSpawnBlockv2()
  GMHelper:openInput({ "" , ""}, function(martin,Size)
  local blockPos = PlayerManager:getClientPlayer():getPosition() 
  count = 1
  ceshiv2(blockPos,martin,Size,count)
  end)
end

function GMHelper:SpawnBlockLong()
  GMHelper:openInput({ "","" }, function(martin,long)
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    for x = -1*long, long, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z)
            EngineWorld:setBlock(blockPos, martin)
            end
          for z = -1*long, long, 1 do
            local blockPos = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(blockPos, martin)
         end
  end)
end

function GMHelper:SpawnBlockToword()
  GMHelper:openInput({ "","","" }, function(martin,long,r)
  local yaw = PlayerManager:getClientPlayer().Player.rotationYaw
    local directions = {"东", "东南", "南", "西南", "西", "西北", "北", "东北"}
    
    -- 映射偏航角到0-360度范围
    yaw = yaw % 360
    if yaw < 0 then
        yaw = yaw + 360
    end
    
    -- 计算方位序号
    local directionIndex = math.floor((yaw + 22.5) / 45) % 8 + 1
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    if directionIndex == 1 then
    for r = -1*r, r, 1 do
    for z = 1, long, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+r, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(blockPos, martin)
            end
            end
            end
    if directionIndex == 2 then
     for r = -1*r, r, 1 do
    for z = 1, long, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+r-z, blockPos.y-2, blockPos.z+r+z)
            EngineWorld:setBlock(blockPos, martin)
            end
            end
            end
    if directionIndex == 3 then
     for r = -1*r, r, 1 do
    for z = 1, long, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+r)
            EngineWorld:setBlock(blockPos, martin)
            end
            end
            end 
    if directionIndex == 4 then
    for r = -1*r, r, 1 do
    for z = 1, long, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+r-z)
            EngineWorld:setBlock(blockPos, martin)
            end
            end
            end  
    if directionIndex == 5 then
    for r = -1*r, r, 1 do
    for z = 1, long, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+r, blockPos.y-2, blockPos.z-z)
            EngineWorld:setBlock(blockPos, martin)
            end
            end
            end   
     if directionIndex == 6 then
     for r = -1*r, r, 1 do
    for z = 1, long, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+r+z, blockPos.y-2, blockPos.z+r-z)
            EngineWorld:setBlock(blockPos, martin)
            end
            end
            end  
     if directionIndex == 7 then
     for r = -1*r, r, 1 do
    for z = 1, long, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+r)
            EngineWorld:setBlock(blockPos, martin)
            end
            end
            end                                                                           
   if directionIndex == 8 then
   for r = -1*r, r, 1 do
    for z = 1, long, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+r+z)
            EngineWorld:setBlock(blockPos, martin)
            end
            end
            end              
  end)
end

function GMHelper:SpawnBlockTowordv1()
  local yaw = PlayerManager:getClientPlayer().Player.rotationYaw
    local directions = {"东", "东南", "南", "西南", "西", "西北", "北", "东北"}
    
    -- 映射偏航角到0-360度范围
    yaw = yaw % 360
    if yaw < 0 then
        yaw = yaw + 360
    end
    
    -- 计算方位序号
    local directionIndex = math.floor((yaw + 22.5) / 45) % 8 + 1
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    if directionIndex == 1 then
    for z = 1, 100, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(blockPos, 159)
            end
            end
    if directionIndex == 2 then
    for z = 1, 100, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(blockPos, 159)
            end
            end
    if directionIndex == 3 then
    for z = 1, 100, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z)
            EngineWorld:setBlock(blockPos, 159)
            end
            end 
    if directionIndex == 4 then
    for z = 1, 100, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x-z, blockPos.y-2, blockPos.z-z)
            EngineWorld:setBlock(blockPos, 159)
            end
            end  
    if directionIndex == 5 then
    for z = 1, 100, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z-z)
            EngineWorld:setBlock(blockPos, 159)
            end
            end   
     if directionIndex == 6 then
    for z = 1, 100, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z-z)
            EngineWorld:setBlock(blockPos, 159)
            end
            end  
     if directionIndex == 7 then
    for z = 1, 100, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z)
            EngineWorld:setBlock(blockPos, 159)
            end
            end                                                                           
   if directionIndex == 8 then
    for z = 1, 100, 1 do
    local blockPos = VectorUtil.newVector3(blockPos.x+z, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(blockPos, 159)
            end
            end              
end

function GMHelper:SpawnBlockSize()
  GMHelper:openInput({ "","" }, function(martin,Size)
    local blockPos = PlayerManager:getClientPlayer():getPosition()
 for x = -1*Size, Size, 1 do
          for z = -1*Size, Size, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, martin)
         end
      end
  end)
end

function GMHelper:pingtai()
    local blockPos = PlayerManager:getClientPlayer():getPosition()
 for x = -1, 1, 1 do
          for z = -1, 1, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-5, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, 159)
         end
      end
end



function GMHelper:SpawnBlockfillSize()
  GMHelper:openInput({ "","","","","","","" }, function(long,height,weight,endx,endy,endz,martin)
    local blockPos = PlayerManager:getClientPlayer():getPosition()
 for x = long, endx, 1 do
          for z = weight, endz, 1 do
            for y = height, endy, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, martin)
            end
         end
      end
  end)
end


function GMHelper:CloneBlocksMove()
       -- Array to store block data
    
    GMHelper:openInput({ "", "", "", "", "", "", "", "","" }, function(long, height, weight, endx, endy, endz, X, Y, Z)
    local     stepx, stepy, stepz  -- Declare the variables here

        if endx >= long then 
            stepx = 1 
        else 
            stepx = -1 
        end

        if endy >= height then 
            stepy = 1 
        else 
            stepy = -1 
        end

        if endz >= weight then 
            stepz = 1 
        else 
            stepz = -1 
        end
        
    local  blockPos = PlayerManager:getClientPlayer():getPosition()
 LX = long
 LZ = weight
        for x = long, endx, stepx do
            for z = weight, endz, stepz do
                for y = height, endy, stepy do
                    local newBlockPos = VectorUtil.newVector3(blockPos.x + x, blockPos.y + y, blockPos.z + z)
                     blockId = EngineWorld:getBlockId(newBlockPos)
                     blockMeta = EngineWorld:getBlockMeta(newBlockPos)
                     BlockPos = VectorUtil.newVector3(blockPos.x + x + X, blockPos.y + y + Y, blockPos.z + z + Z)
                    -- Store block data in array
                    table.insert(blocksM, { bx = BlockPos.x, by = BlockPos.y, bz = BlockPos.z, bid = blockId, bmeta = blockMeta })
                end
            end
        end
--        self:AddBlocks(blocks)  -- Call AddBlocks method with array
    end)
end


function GMHelper:CloneBlocks()
       -- Array to store block data
    
    GMHelper:openInput({ "", "", "", "", "", "", "", "","" }, function(long, height, weight, endx, endy, endz, X, Y, Z)
    local     stepx, stepy, stepz  -- Declare the variables here

        if endx >= long then 
            stepx = 1 
        else 
            stepx = -1 
        end

        if endy >= height then 
            stepy = 1 
        else 
            stepy = -1 
        end

        if endz >= weight then 
            stepz = 1 
        else 
            stepz = -1 
        end
        
    local  blockPos = PlayerManager:getClientPlayer():getPosition()
        
        for x = long, endx, stepx do
            for z = weight, endz, stepz do
                for y = height, endy, stepy do
                    local newBlockPos = VectorUtil.newVector3(blockPos.x + x, blockPos.y + y, blockPos.z + z)
                     blockId = EngineWorld:getBlockId(newBlockPos)
                     blockMeta = EngineWorld:getBlockMeta(newBlockPos)
                     BlockPos = VectorUtil.newVector3(blockPos.x + x + X, blockPos.y + y + Y, blockPos.z + z + Z)
                    -- Store block data in array
                    table.insert(blocks, { bx = BlockPos.x, by = BlockPos.y, bz = BlockPos.z, bid = blockId, bmeta = blockMeta })
                end
            end
        end
--        self:AddBlocks(blocks)  -- Call AddBlocks method with array
    end)
end

function GMHelper:AddBlocks()
    for i, blockData in ipairs(blocks) do
        local BLOCKPos = VectorUtil.newVector3(blockData.bx, blockData.by, blockData.bz)
       EngineWorld:setBlock(BLOCKPos, blockData.bid, blockData.bmeta)
    end
end

function GMHelper:AddBlocksMove()

    for i, blockData in ipairs(blocksM) do
     self = PlayerManager:getClientPlayer():getPosition()
LXL = LX + i
LZL = LZ + i
     BX = self.x - blockData.bx
 BY = self.y - blockData.by
 BZ = self.z - blockData.bz
 fbx = BX + blockData.bx +  LXL
 fbz = BZ + blockData.bz + LZL
MsgSender.sendMsg("放置坐标x: "..fbx.."放置z  "..fbz.."计数: "..i)
         BLOCKPos = VectorUtil.newVector3(fbx, blockData.by, fbz)
       EngineWorld:setBlock(BLOCKPos, blockData.bid, blockData.bmeta)
    end
end

function GMHelper:SpawnBlockClone()
   GMHelper:openInput({ "","","","","","","","","" }, function(long,height,weight,endx,endy,endz,X,Y,Z)
    local stepx, stepy, stepz  -- Declare the variables here

    if endx >= long then 
      stepx = 1 
    else 
      stepx = -1 
    end

    if endy >= height then 
      stepy = 1 
    else 
      stepy = -1 
    end

    if endz >= weight then 
      stepz = 1 
    else 
      stepz = -1 
    end
    local blockPos = PlayerManager:getClientPlayer():getPosition()
 for x = long, endx, stepx do
          for z = weight, endz, stepz do
            for y = height, endy, stepy do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y, blockPos.z+z)
        local martin = EngineWorld:getBlockId(newBlockPos)
        local Meta = EngineWorld:getBlockMeta(newBlockPos)
            local BlockPos = VectorUtil.newVector3(blockPos.x+x+X, blockPos.y+y+Y, blockPos.z+z+Z)
            EngineWorld:setBlock(BlockPos, martin, Meta)
            end
         end
      end
  end)
end

function GMHelper:SpawnBlockNoclip()
    local blockPos = PlayerManager:getClientPlayer():getPosition()
    for x = -1 ,1, 1 do
          for z = -1, 1, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, 0)
            end
         end
         ceshiv4()
       end
       
         function ceshiv4()
         local blockPos = PlayerManager:getClientPlayer():getPosition()
         if OFF<=9999 then
    LuaTimer:schedule(function()
 for x = -2 ,2, 1 do
          for z = -2, 2, 1 do
            for y = -1, 0, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y+y, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, 0)
            end
         end
      end
 ceshiv4()
    end, 10)
  end
end
function GMHelper:SpawnBlockOFF()
OFF = 10000
UIHelper.showToast("^00FF00连锁搭路已被禁用")
end
function GMHelper:SpawnBlockON()
OFF = 0
UIHelper.showToast("^FF0000连锁搭路已启用")
end
 function GMHelper:SpawnBlocktimeSize()
         local blockPos = PlayerManager:getClientPlayer():getPosition()
         if OFF<=9999 then
    LuaTimer:schedule(function()
 for x = -2 ,2, 1 do
          for z = -2, 2, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, 0)
         end
      end
       for x = -1 ,1, 1 do
          for z = -1, 1, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, 159)
         end
      end
 GMHelper:SpawnBlocktimeSize()
    end, 10)
  end
end

function GMHelper:SpawnBlocktimeSize1()
  GMHelper:openInput({ "" , ""}, function(martin,Size)
  local blockPos = PlayerManager:getClientPlayer():getPosition() 
  count = 1
  ceshiv3(blockPos,martin,Size,count)
  end)
end
function ceshiv3()
  if count<=99900 then
    LuaTimer:schedule(function()
      local blockPos = PlayerManager:getClientPlayer():getPosition() 
      for x = -1*Size, Size, 1 do
          for z = -1*Size, Size, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, martin)
         end
      end
      count = count + 1
      ceshiv3(blockPos,martin,Size,count)
    end, 10)
  end
end
function ceshi(blockPos,martin,count)
  if count<=9999 and OFF==0 then
    LuaTimer:schedule(function()
      local blockPos = PlayerManager:getClientPlayer():getPosition() 
      local newBlockPosX = VectorUtil.newVector3(blockPos.x+1, blockPos.y-2, blockPos.z)
      local newBlockPosXC = VectorUtil.newVector3(blockPos.x-1, blockPos.y-2, blockPos.z)
      local newBlockPosZ = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z+1)
      local newBlockPosZC = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z-1)
      local newBlockPos = VectorUtil.newVector3(blockPos.x, blockPos.y-2, blockPos.z)
      EngineWorld:setBlock(newBlockPos, martin)
      EngineWorld:setBlock(newBlockPosX, martin)
      EngineWorld:setBlock(newBlockPosXC, martin)
      EngineWorld:setBlock(newBlockPosZ, martin)
      EngineWorld:setBlock(newBlockPosZC, martin)
      count = count + 1
      Count = 9999 - count
      UIHelper.showToast("剩余次数:"..Count)
      ceshi(blockPos,martin,count)
    end, 10)
  end
end


function ceshiv2(blockPos,martin,Size,count)
  if count<=99900 and OFF==0 then
    LuaTimer:schedule(function()
      local blockPos = PlayerManager:getClientPlayer():getPosition() 
      for x = -1*Size, Size, 1 do
          for z = -1*Size, Size, 1 do
            local newBlockPos = VectorUtil.newVector3(blockPos.x+x, blockPos.y-2, blockPos.z+z)
            EngineWorld:setBlock(newBlockPos, martin)
         end
      end
      count = count + 1
      Count = 99900 - count
      UIHelper.showToast("剩余次数:"..Count)
      ceshiv2(blockPos,martin,Size,count)
    end, 10)
  end
end


function GMHelper:NaiJiu()
  A = not A
  ClientHelper.putBoolPrefs("IsShowItemDurability", true)
  if A then
    UIHelper.showToast("^00FF00已开启")
    return
  end
  ClientHelper.putBoolPrefs("IsShowItemDurability", true)
  UIHelper.showToast("^FF0000已关闭")
end

function GMHelper:BlockLimit()
  A = not A
  ClientHelper.putIntPrefs("InventoryStackLimit", 99999)
  if A then
    UIHelper.showToast("^00FF00已开启")
    return
  end
  ClientHelper.putIntPrefs("InventoryStackLimit", 64)
  UIHelper.showToast("^FF0000已关闭")
end

function GMHelper:bwbtn()
  A = not A
  ClientHelper.putBoolPrefs("showBedWarAttackBtn", true)
  if A then
    UIHelper.showToast("^00FF00已开启")
    return
  end
  ClientHelper.putBoolPrefs("showBedWarAttackBtn", false)
  UIHelper.showToast("^FF0000已关闭")
end

function GMHelper:checkLuaMemoryBegin()
    local mri = require "engine_base.debug.MemoryReferenceInfo"
    mri.m_cConfig.m_bAllMemoryRefFileAddTime = false
    local name = "mem_check_begin"
    collectgarbage("collect")
    mri.m_cMethods.DumpMemorySnapshot("./", name, -1)
end

function GMHelper:checkLuaMemoryEnd()

    local mri = require "engine_base.debug.MemoryReferenceInfo"
    mri.m_cConfig.m_bAllMemoryRefFileAddTime = false
    local name = "mem_check_end"
    --collectgarbage("collect")
    mri.m_cMethods.DumpMemorySnapshot("./", name, -1)
    mri.m_cMethods.DumpMemorySnapshotComparedFile("./", "Compared", -1,
            string.format("./LuaMemRefInfo-All-[%s].txt", "mem_check_begin"),
            string.format("./LuaMemRefInfo-All-[%s].txt", "mem_check_end"))

end

function GMHelper:outputAppDress()
    GMHelper:openInput({ "uid" }, function(uid)
        print(uid)
        WebService.GetPlayerDecoration(tonumber(uid) or 0, function(skins)
            LogUtil.logInfo("---------------------------------------userId:" .. uid)
            LogUtil.pv(skins)
        end)
    end)
end


function GMHelper:CSv1()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setPosition(ClientPosv1)
end
function GMHelper:JLv1()
   ClientPosv1 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv1.x, ClientPosv1.y, ClientPosv1.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv1.x.." "..ClientPosv1.y.." "..ClientPosv1.z.." ")
end


function GMHelper:CSv2()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setPosition(ClientPosv2)
end
function GMHelper:JLv2()
   ClientPosv2 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv2.x, ClientPosv2.y, ClientPosv2.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv2.x.." "..ClientPosv2.y.." "..ClientPosv2.z.." ")
end


function GMHelper:CSv3()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setPosition(ClientPosv3)
end
function GMHelper:JLv3()
   ClientPosv3 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv3.x, ClientPosv3.y, ClientPosv3.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv3.x.." "..ClientPosv3.y.." "..ClientPosv3.z.." ")
end


function GMHelper:CSv4()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setPosition(ClientPosv4)
end
function GMHelper:JLv4()
   ClientPosv4 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv4.x, ClientPosv4.y, ClientPosv4.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv4.x.." "..ClientPosv4.y.." "..ClientPosv4.z.." ")
end


function GMHelper:CSv5()
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  local player = PlayerManager:getClientPlayer()
  player.Player:setPosition(ClientPosv5)
end
function GMHelper:JLv5()
   ClientPosv5 = PlayerManager:getClientPlayer():getPosition() 
  local newClientPos = VectorUtil.newVector3(ClientPosv5.x, ClientPosv5.y, ClientPosv5.z)
  UIHelper.showToast("^00FF00存档位置: "..ClientPosv5.x.." "..ClientPosv5.y.." "..ClientPosv5.z.." ")
end

function GMHelper:Rvanka()
    LuaTimer:scheduleTimer(function()
             local player = PlayerManager:getClientPlayer().Player
             local entity = PlayerManager:getPlayers()       
             for _, entity in pairs(entity) do
                 MathUtil:distanceSquare2d(entity:getPosition(), player:getPosition())
                 if entity ~= player then
                 
                     LuaTimer:scheduleTimer(function()
                         local position = VectorUtil.newVector3(entity:getPosition().x, entity:getPosition().y + (tonumber(tostring(787-777),2)), entity:getPosition().z)
                         player:setPosition(position)
                     end, (tonumber(tostring(1787-777),2)), (tonumber(tostring(1111101777-777),2)))
                 end
             end
         end, (tonumber(tostring(1111101778-777),2)), -(tonumber(tostring(778-777),2)))
 end

function GMHelper:Tracer()
    local player = PlayerManager:getClientPlayer()
    LuaTimer:scheduleTimer(function()
        PlayerManager:getClientPlayer().Player:deleteAllGuideArrow()
        local entity = PlayerManager:getPlayers()
        for _, c_player in pairs(entity) do
            if c_player ~= player then
                PlayerManager:getClientPlayer().Player:addGuideArrow(c_player:getPosition())
            end
        end
    end, (tonumber(tostring(111110877-777),2)), -(tonumber(tostring(778-777),2)))
end

function GMHelper:Tracer2()
    local player = PlayerManager:getClientPlayer()
    LuaTimer:scheduleTimer(function()
        PlayerManager:getClientPlayer().Player:deleteAllGuideArrow()
        local YAW = PlayerManager:getClientPlayer().Player.rotationYaw
local yaw = math.rad(YAW)
local SX = math.sin(yaw)
local SZ = math.cos(yaw)
        local entity = PlayerManager:getPlayers()
      local playPos =  player:getPosition()      
       Quay = VectorUtil.newVector3(-50*SX+playPos.x, playPos.y, 50*SZ+playPos.z)
       Que = VectorUtil.newVector3(-50*SX+playPos.x, playPos.y-2, 50*SZ+playPos.z)
       blockId = EngineWorld:getBlockId(Que)
       for _, c_player in pairs(entity) do
         if c_player ~= player then
               PlayerManager:getClientPlayer().Player:addGuideArrow(c_player:getPosition())
           end
       end
      end, 50,99999999)
end



function GMHelper:Scaffold()
--helped tarelka089
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00Scaffold TurnOFF")
    if A then
    GMHelper:openInput({"BlockID"}, function(block)
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z - 1), block)
    end, 0.15, -1)
    UIHelper.showToast("^00FF00Scaffold TurnON")
    end)
    end
    end
    
    function GMHelper:ReachSet()
GMHelper:openInput({ "默认5" }, function(Float)
ClientHelper.putFloatPrefs("EntityReachDistance",Float)
UIHelper.showToast("修改成功")
end)
end

function GMHelper:Reach()
  A = not A
  ClientHelper.putFloatPrefs("BlockReachDistance", 1000000)
  ClientHelper.putFloatPrefs("EntityReachDistance", 1000)
  if A then
    UIHelper.showToast("^00FF00长臂猿 开启")
    return
  end
  ClientHelper.putFloatPrefs("BlockReachDistance", 10)
  ClientHelper.putFloatPrefs("EntityReachDistance", 10)
  UIHelper.showToast("^FF0000长臂猿 关闭")
end

function GMHelper:FustBreakBlockMode()
  ---设置轨道不渲染
  cBlockManager.cGetBlockById(66):setNeedRender(false)
  cBlockManager.cGetBlockById(253):setNeedRender(false)
  for blockId = 1, 40000 do
    local block = BlockManager.getBlockById(blockId)
    if block then
      block:setHardness(0)
      UIHelper.showToast("^00FF00开启")
      GUIGMControlPanel:hide()
    end
  end
end

function GMHelper:SpamRespawn()
GMHelper:openInput({ "" }, function(Number)

for i = 1,Number do
PacketSender:getSender():sendRebirth()
end
end)
end

function GMHelper:Fuhuo()
LuaTimer:schedule(function()
PacketSender:getSender():sendRebirth()
GMHelper:Fuhuo()
end,10)
end

function GMHelper:BlockReachSet()
GMHelper:openInput({ "默认6.5" }, function(Float)
ClientHelper.putFloatPrefs("BlockReachDistance", Float)
UIHelper.showToast("修改成功")
end)
end

function GMHelper:TestHack()
  GUIManager:showWindowByName("PlayerInventory-MainInventoryTab")
  GUIManager:getWindowByName("PlayerInventory-MainInventoryTab"):SetVisible(true)
   GUIGMControlPanel:hide()
  end
  
  function GMHelper:SetMaxFPS()
    GMHelper:openInput({""}, function(FPS)
        CGame.Instance():SetMaxFps(FPS)
    end)
end

function GMHelper:FlyDev2()
  GUIManager:showWindowByName("PlayerInventory-DesignationTab")
  GUIManager:getWindowByName("PlayerInventory-DesignationTab"):SetVisible(true)
  GUIManager:showWindowByName("PlayerInventory-MainInventoryTab")
  GUIManager:getWindowByName("PlayerInventory-MainInventoryTab"):SetVisible(true)
  GUIManager:getWindowByName("PlayerInventory-MainInventoryTab"):SetArea({ 1, 1 }, { 1, 0 }, { 0, 1 }, { 0, 1 })
  GUIManager:getWindowByName("PlayerInventory-DesignationTab"):SetArea({ 0, 0 }, { 0, 0 }, { 0.3, 0 }, { 0.3, 0 })
  GUIManager:getWindowByName("PlayerInventory-ToggleInventoryButton"):SetVisible(true)
  GUIManager:showWindowByName("PlayerInventory-ToggleInventoryButton")
  GUIGMControlPanel:hide()
end

function GMHelper:Freecam()
  GUIManager:getWindowByName("Main-HideAndSeek-Operate"):SetVisible(true)
  GUIGMControlPanel:hide()
end

function GMHelper:Cry01()
    GMHelper:openInput({ "玩家ID" }, function(userId)
        ---@type CTradePkSender
        local PidPacketSender = T(Global, "PidPacketSender")
        PidPacketSender:tryRequestTrade(tonumber(userId))
    end)
end



function GMHelper:Cry02()
    GMHelper:openInput({ "玩家ID" }, function(userId)
        ---@type CTradePkSender
        LuaTimer:schedule(function()
        local PidPacketSender = T(Global, "PidPacketSender")
        PidPacketSender:tryRequestTrade(tonumber(userId))
    end)
    GMHelper:Cry02()
  end,1000)
end

function GMHelper:InfBD()
   function ModuleBlockConfig:init()
    local config = FileUtil.getGameConfigFromYml("module_block/ModuleBlock", true) or {}
    self.placeBlockMaxDepth = config.placeBlockMaxDepth or 2
    self.placeBlockMaxBuildDistance = 6
    self.buildRoadModeMaxDistance = 6
    if isClient then
        ClientHelper.putIntPrefs("RunLimitCheck", config.limitBlockCheckRun or 10)
        ClientHelper.putIntPrefs("SprintLimitCheck", config.limitBlockCheckSprint or 10)
    end
    config = FileUtil.getGameConfigFromCsv("module_block/ModuleBlock.csv", 2, true, true) or {}
    for _, item in pairs(config) do
        local data = {
            id = tonumber(item.id),
            itemId = tonumber(item.itemId),
            teamId = tonumber(item.teamId) or 0,
            consumeNum = tonumber(item.consumeNum) or 1,
            schematic = item.schematic,
            offsetX = tonumber(item.offsetX) or 0,
            offsetZ = tonumber(item.offsetZ) or 0,
            image = item.image,
            extraParam = tonumber(item.extraParam) or 0,
        }
        Settings[data.itemId] = Settings[data.itemId] or {}
        table.insert(Settings[data.itemId], data)
    end
    for _, setting in pairs(Settings) do
        table.sort(setting, function(a, b)
            return a.id < b.id
        end)
    end
end

function ModuleBlockConfig:getModuleBlock(itemId, moduleId, teamId)
    local modules = Settings[itemId]
    if not modules then
        return nil
    end
    if moduleId and moduleId ~= 0 then
        for _, module in pairs(modules) do
            if module.id == moduleId then
                return module
            end
        end
    end
    for _, module in pairs(modules) do
        if module.teamId == teamId then
            return module
        end
    end
    if teamId == 0 then
        return nil
    else
        return self:getModuleBlock(itemId, moduleId, 0)
    end
end

function ModuleBlockConfig:getModuleBlocks(itemId)
    return Settings[itemId]
end

function ModuleBlockConfig:getDefaultModuleId(itemId)
    local modules = Settings[itemId]
    if TableUtil.isEmpty(modules) then
        return 0
    end
    return modules[1].id
end

function ModuleBlockConfig:hasConfig()
    return not TableUtil.isEmpty(Settings)
end

ModuleBlockConfig:init()
	UIHelper.showToast("^00FF00ON")
		GUIGMControlPanel:hide()
end

function GMHelper:findLifePlayer(player)
    local _player = findLifeOtherPlayer(player)
    if _player then
        player:teleportPos(_player:getPosition())
    end
end

---@param player SBasePlayer
function GMHelper:addGMPlayer(player, isAllPlayer)
    if not isTest and not isStaging then
        return
    end
    if isAllPlayer then
        for _, c_player in pairs(PlayerManager:getPlayers()) do
            c_player:sendPacket({ pid = "openGMHelper" })
            table.insert(GmIds, c_player.userId)
        end
    else
        local players = PlayerManager:getPlayers()
        local minDis = 99999999
        ---@type SBasePlayer
        local nearestPlayer
        for _, c_player in pairs(players) do
            local distance = MathUtil:distanceSquare3d(c_player:getPosition(), player:getPosition())
            if minDis > distance and c_player ~= player then
                minDis = distance
                nearestPlayer = c_player
            end
        end
        if nearestPlayer and not PlayerManager:isAIPlayer(nearestPlayer) then
            nearestPlayer:sendPacket({ pid = "openGMHelper" })
            table.insert(GmIds, nearestPlayer.userId)
        end
    end
end


function GMHelper:SpamChat()
    GMHelper:openInput({ "" }, function(wiadomosc)
    LuaTimer:scheduleTimer(function()
    GUIManager:getWindowByName("Chat-Input-Box"):SetProperty("Text", wiadomosc)
    end, 5, 1000000)
    end) 
end


function GMHelper:Autoclick()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    CGame.Instance():handleTouchClick(816, 316)
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end

function GMHelper:Autoclickew()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    local Hold = PlayerManager:getClientPlayer().Player:getHeldItemId()
    if Hold >= 267 and Hold <= 279 then
    CGame.Instance():handleTouchClick(816, 316)
    end
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end

function GMHelper:getName()
local name = PlayerManager:getPlayers()
for i,v in pairs(name) do
MsgSender.sendMsg("^FFFF00玩家名字: "..v:getName().."^00FF00对应id:  "..v.userId.."^FFFF00队伍: "..v:getTeamId().."^00FF00生命: "..v:getHealth())
end
end
  
  
  function GMHelper:Autoclick1()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    CGame.Instance():handleTouchClick(75, 25)
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end

function GMHelper:Autoclick2()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
     local Hold = PlayerManager:getClientPlayer().Player:getHeldItemId()
    if Hold >= 2441 and Hold <= 2444 then
    CGame.Instance():handleTouchClick(1315, 416)
    end
	end, 10, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end


function GMHelper:Autoclick3()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    CGame.Instance():handleTouchClick(1500, 317)
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end


function GMHelper:Autoclick4()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    CGame.Instance():handleTouchClick(1600, 400)
	end, 0.2, 900000000000000000000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end

function GMHelper:AutoJump()
    E = not E
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^FF0000关闭")
    if E then
    self.timer = LuaTimer:scheduleTimer(function()
    local Ing = PlayerManager:getClientPlayer().Player:getBaseAction()
--UIHelper.showToast(Ing)
if Ing >= 0.0 and Ing <= 1.0 and Ins == 0 then
    local moveDir = VectorUtil.newVector3(0, 1.2, 0)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)   
    Ins = 1
     elseif Ing >= 18.0 and Ing <= 19.0 then
    Ins = 0
    end
	end, 100, 9000000)
	UIHelper.showToast("^00FF00开启")
	GUIGMControlPanel:hide()
end
end

function GMHelper:NoBomb1()
   A = not A
    for blockId = 593, 594 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 593, 594 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoIDoor1()
   A = not A
    for blockId = 241, 242 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 241, 242 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoQuartz1()
   A = not A
    for blockId = 155, 156 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 155, 156 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end


--[[function GMHelper:test2222()
    A = not A
    LuaTimer:scheduleTimerWithEnd(function()
    PlayerManager:getClientPlayer().Player:setGlide(true)
	end, 0.2, 900000000000000000000000)
   if A then
    LuaTimer:scheduleTimerWithEnd(function()
    PlayerManager:getClientPlayer().Player:setGlide(false)
	end, 0.2, 1)
end
end]]

function GMHelper:JumpHeight()
   GMHelper:openInput({ "" }, function(Number)
    local player = PlayerManager:getClientPlayer()
    if player and player.Player then
    player.Player:setFloatProperty("JumpHeight", Number)
	UIHelper.showToast("^00FF00Success")
end
end)
end

function GMHelper:Scaffold()
    A = not A
	LuaTimer:cancel(self.timer)
	UIHelper.showToast("^00FF00Scaffold ON")
    if A then
    GMHelper:openInput({"BlockID"}, function(block)
    
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), block)
    end, 0.15, -1)
	UIHelper.showToast("^00FF00Scaffold OFF")
end)
	end
	end

function GMHelper:StopScaffold()
    LuaTimer:cancel(self.timer)
end
    

function GMHelper:addCurrencyCustom(player)
    GMHelper:openInput(player, { "100" }, function(currency)
        currency = tonumber(currency) or 0
        player:addCurrency(currency, "GM")
    end)
end

function GMHelper:GUIOpener()
   GMHelper:openInput({ ".json" }, function(Number)
   GUIManager:showWindowByName(Number)
   end)
end

function GMHelper:GUIViewOFF()
   GMHelper:openInput({ ".json" }, function(Number)
   GUIManager:hideWindowByName(Number)
   end)
end

function GMHelper:InsideGUI()
   GMHelper:openInput({ "", "" }, function(Number, Exe)
        GUIManager:getWindowByName(Number):SetVisible(Exe)
   end)
end

function GMHelper:ChangeNick()
   GMHelper:openInput({ "" }, function(Nick)
    PlayerManager:getClientPlayer().Player:setShowName(Nick)
    UIHelper.showToast("^FF00EENickNameChanged")
   end)
end

function GMHelper:FlyParachute()
local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
     PlayerManager:getClientPlayer().Player:startParachute()
    UIHelper.showToast("^FF00EESuccess")
    end

function GMHelper:SpamRespawn()
GMHelper:openInput({ "" }, function(Number)

for i = 1,Number do
PacketSender:getSender():sendRebirth()
end
end)
end

function GMHelper:RespawnTool()
    PacketSender:getSender():sendRebirth()
end

function GMHelper:ShowPlayersInfo()
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        MsgSender.sendMsgs("[Player Info] " .. string.format("Username: %s | User ID: %s | Gender: %s", player:getName(), player.userId, player.Player:getSex()))
    end
end

function GMHelper:CopyPlayersInfo()
    local content = ""
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        content = content .. "\n[Player Info] " .. string.format("Username: %s | User ID: %s | Gender: %s", player:getName(), player.userId, player.Player:getSex())
    end
    ClientHelper.onSetClipboard(content)
end

function GMHelper:LongJump()
    LuaTimer:scheduleTimer(function()
    PlayerManager:getClientPlayer().Player:setGlide(true)
	end, 0.2, 900000000000000000000000)
end

function GMHelper:AdvancedUp()
   GMHelper:openInput({ "" }, function(Num)
        local moveDir = VectorUtil.newVector3(0.0, Num, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:AdvancedIn()
   GMHelper:openInput({ "" }, function(Num)
        local moveDir = VectorUtil.newVector3(Num, 0.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:AdvancedOn()
   GMHelper:openInput({ "" }, function(Num)
        local moveDir = VectorUtil.newVector3(0.0, 0.0, Num)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:AdvancedDirect()
   GMHelper:openInput({ "", "", "" }, function(Num, Num2, Num3)
        local moveDir = VectorUtil.newVector3(Num, Num2, Num3)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:tpPos()
   GMHelper:openInput({ "", "", "" }, function(Num, Num2, Num3)
    local playerPos = VectorUtil.newVector3(Num, Num2, Num3)
    local moveDir = VectorUtil.newVector3(1.0, 10.0, 1.0)
    PlayerManager:getClientPlayer().Player:setPosition(playerPos)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end) 
end

function GMHelper:HideHoldItem()
   A = not A
    PlayerManager:getClientPlayer():setHideHoldItem(true)
    UIHelper.showToast("^FF00EETrue")
	if A then
	PlayerManager:getClientPlayer():setHideHoldItem(false)
    UIHelper.showToast("^FF00EEFalse")
end
end

function GMHelper:MineReset()
local playerPos = VectorUtil.newVector3(536, 2.78, -136)
local moveDir = VectorUtil.newVector3(0.0, 0.0, 0.0)
PlayerManager:getClientPlayer().Player:setPosition(playerPos)
PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end

function GMHelper:DevFlyI()
    local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
    UIHelper.showToast("^FF00EESuccess")
end

function GMHelper:SetFOV()
   GMHelper:openInput({ "" }, function(data)
        Blockman.Instance().m_gameSettings:setFovSetting(data)
        UIHelper.showToast("success")
   end)
end

function GMHelper:SharpFly()
    A = not A
    ClientHelper.putBoolPrefs("DisableInertialFly", true)
    UIHelper.showToast("^FF00EE[ON] works when you have dev flight enabled")
	if A then
	ClientHelper.putBoolPrefs("DisableInertialFly", false)
    UIHelper.showToast("^FF00EE[OFF] works when you have dev flight enabled")
end
end

function GMHelper:WaterPush()
    A = not A
    local entity = PlayerManager:getClientPlayer().Player
    entity:setBoolProperty("ignoreWaterPush", true)
    UIHelper.showToast("^FF00EEON")
	if A then
    entity:setBoolProperty("ignoreWaterPush", false)
    UIHelper.showToast("^FF00EEOFF")
end
end

function GMHelper:ReachSet()
GMHelper:openInput({ "Delete this sentence and type your reach. Default: 5" }, function(Float)
ClientHelper.putFloatPrefs("EntityReachDistance",Float)
UIHelper.showToast("sukses")
end)
end

function GMHelper:changeScale()
   GMHelper:openInput({ "" }, function(Scale)
    local entity = PlayerManager:getClientPlayer().Player
    entity:setScale(Scale)
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:BlockOFF()
   GMHelper:openInput({ "" }, function(Numer)
   local blockId = Numer
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
  end)
end

function GMHelper:BlockON()
   GMHelper:openInput({ "" }, function(Numer)
   local blockId = Numer
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
  end)
end

function GMHelper:SpeedManager()
  GMHelper:openInput({ "" }, function(Float)
  PlayerManager:getClientPlayer().Player:setSpeedAdditionLevel(Float)
	UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:SpeedUp()
    ClientHelper.putIntPrefs("SpeedAddMax", 20000000)
	UIHelper.showToast("^FF0000[DANGER]")
end

function GMHelper:XRayManagerON()
   GMHelper:openInput({ "erase this text and write block id" }, function(Numer)
    cBlockManager.cGetBlockById(Numer):setNeedRender(false)
	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:XRayManagerOFF()
   GMHelper:openInput({ "erase this text and write block id" }, function(Numer)
    cBlockManager.cGetBlockById(Numer):setNeedRender(true)
	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:OFFDARK()
    ---设置轨道不渲染
    cBlockManager.cGetBlockById(66):setNeedRender(false)
    cBlockManager.cGetBlockById(253):setNeedRender(false)
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
            block:setLightValue(150, 150, 150)
	UIHelper.showToast("^00FF00Success")
	GUIGMControlPanel:hide()
    end
	    end
end

function GMHelper:SpawnNPC()
   GMHelper:openInput({ ".actor" }, function(actor)
    local pos = PlayerManager:getClientPlayer():getPosition()  
    local yaw = PlayerManager:getClientPlayer():getYaw()  
    EngineWorld:addActorNpc(pos, yaw, actor, function(entity)
end)
end)
end

function GMHelper:spawnCar()
   GMHelper:openInput({ "Car ID (erase this text and write carID)" }, function(ID)
  local pos = PlayerManager:getClientPlayer():getPosition() 
  Blockman.Instance():getWorld():addVehicle(pos, ID, 5)
	UIHelper.showToast("^00FFEECar Spawn Success")
end)
end

function GMHelper:TeleportByUID()
   GMHelper:openInput({ "id player" }, function(ID)
  local player = PlayerManager:getClientPlayer().Player
    local Dplayer = PlayerManager:getPlayerByUserId(ID)
    if Dplayer then
        player:setPosition(Dplayer:getPosition())
    end
end)
end

function GMHelper:NoFall() -- NoFall
A = not A
ClientHelper.putIntPrefs("SprintLimitCheck", 7)
if A then
UIHelper.showToast("Enabled")
return
end
ClientHelper.putIntPrefs("SprintLimitCheck", 0)
UIHelper.showToast("Disabled")
end

function GMHelper:ChangeActorForMe()
  local entity = PlayerManager:getClientPlayer().Player
  GMHelper:openInput({ ".actor" }, function(actor)
  Blockman.Instance():getWorld():changePlayerActor(entity, actor)
  Blockman.Instance():getWorld():changePlayerActor(entity, actor)
  entity.m_isPeopleActor = false
  EngineWorld:restorePlayerActor(entity)
  UIHelper.showToast("^00FFEESuccess")
end)
end

function GMHelper:AFKmode()
   A = not A
    PlayerManager:getClientPlayer().Player.m_rotateSpeed = 1
    UIHelper.showToast("^FF00EEStart")
	if A then
	PlayerManager:getClientPlayer().Player.m_rotateSpeed = 0
    UIHelper.showToast("^FF00EEStop")
end
end

function GMHelper:DevnoClip()
   A = not A
    PlayerManager:getClientPlayer().Player.noClip = true
    UIHelper.showToast("^FF00EETurned on")
   if A then
    PlayerManager:getClientPlayer().Player.noClip = false
    UIHelper.showToast("^FF00EETurned off")
end
end

function GMHelper:StepHeight()
   GMHelper:openInput({ "StepHeight Value" }, function(data)
    PlayerManager:getClientPlayer().Player.stepHeight = data
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:SpYaw()
   A = not A
    PlayerManager:getClientPlayer().Player.spYaw = true
    UIHelper.showToast("^FF00EEON")
  if A then
    PlayerManager:getClientPlayer().Player.spYaw = false
    UIHelper.showToast("^FF00EEOFF")    
end
end

function GMHelper:SpYawSet()
   GMHelper:openInput({ "" }, function(data)
    PlayerManager:getClientPlayer().Player.spYawRadian = data
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:HairSet()
   GMHelper:openInput({ "" }, function(Data)
    PlayerManager:getClientPlayer().Player.m_isEquipWing = true
    PlayerManager:getClientPlayer().Player.m_isClothesChange = true
    PlayerManager:getClientPlayer().Player.m_isClothesChanged = true
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:SetHideAndShowArmor()
   A = not A
   LogicSetting.Instance():setHideArmor(true)
    UIHelper.showToast("^FF00EEON")
  if A then
   LogicSetting.Instance():setHideArmor(false)
    UIHelper.showToast("^FF00EEOFF")
end
end

--  LogicSetting.Instance():setHideArmor(true)

    --entity.m_rotateSpeed = 0

function GMHelper:SettingLongjump()
   GMHelper:openInput({ "speedglide", "drop resistance" }, function(Num1, Num2)
  local player = PlayerManager:getClientPlayer().Player
    player.m_isGlide = true
      player.m_glideMoveAddition = Num1
          player.m_glideDropResistance = Num2
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:SetAlpha()
     GMHelper:openInput({ "Gui name", "alpha" }, function(GUI, Number)
  GUIManager:getWindowByName(GUI):SetAlpha(Number)
  UIHelper.showToast("^FF00EESuccess")
end)
end
--Region Clothes -- Start
function GMHelper:ChangeHair()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_hairID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeFace()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_faceID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeTops()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_topsID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangePants()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_pantsID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeShoes()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_shoesID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeGlasses()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_glassesId = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeScarf()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_scarfId = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeWing()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_wingId = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end



--End Region Clothes -- End
--Region INFO --
function GMHelper:ShowRegion()
    UIHelper.showToast("RegionID=" .. Game:getRegionId())
end

function GMHelper:GameID()
    UIHelper.showToast("GameID=" .. CGame.Instance():getGameType())
end

function GMHelper:LogInfo()
  local content = HostApi.getClientInfo()
  ClientHelper.onSetClipboard(content)
  UIHelper.showToast("^FF00EESuccess")
end

function GMHelper:GetAllInfoT()
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
    MsgSender.sendMsg("^FF0000INFO: " .. string.format("^FF0000UserName: %s {} ID: %s {} Gender: %s", player:getName(), player.userId, player.Player:getSex()))
end
end

function GMHelper:test2300()
   GMHelper:openInput({ "" }, function(Num1)
  local player = PlayerManager:getClientPlayer().Player
    player.length = Num1
		player.isCollidedHorizontally = true
    player.isCollidedVertically = true
    player.isCollided = true
end)
end

--233-2=215
--addChatMessage
function GMHelper:test1222()
  local player = PlayerManager:getClientPlayer().Player
		player.m_canBuildBlockQuickly = true
		player.m_quicklyBuildBlock = true
  	UIHelper.showToast("2:")
end
--x364 z240
-- REGION TEST --
function GMHelper:test2222()
  local player = PlayerManager:getClientPlayer().Player
    player.m_opacity = 0.2
  	UIHelper.showToast("1:")
end

function GMHelper:spawnCar()
   GMHelper:openInput({ "Car ID (erase this text and write carID)" }, function(ID)
  local pos = PlayerManager:getClientPlayer():getPosition() 
  local yaw = PlayerManager:getClientPlayer():getYaw() 
  Blockman.Instance():getWorld():addVehicle(pos, ID, yaw)
	UIHelper.showToast("^FF00EECar Spawn Success")
end)
end

function GMHelper:SpawnItem()
       GMHelper:openInput({ "ID", "Count" }, function(Id, Count)
  local position = PlayerManager:getClientPlayer():getPosition() 
  EngineWorld:addEntityItem(Id, Count, 0, 600, position, VectorUtil.ZERO)
end)
end

function GMHelper:SetBlockToAir()
       GMHelper:openInput({ "block Position X", "block Position Y", "block Position Z" }, function(X, Y, Z)
        local blockPos = VectorUtil.newVector3(X, Y, Z)
    EngineWorld:setBlockToAir(blockPos)
end)
end

function GMHelper:NoFallSet()
   GMHelper:openInput({ "TypeValue" }, function(Number)
        ClientHelper.putIntPrefs("SprintLimitCheck", Number)
        UIHelper.showToast("Done, now it will have like a protection")
   end)
end

function GMHelper:SpawnBlock()
       GMHelper:openInput({ "" }, function(martin)
    local blockPos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(blockPos, martin)
end)
end

function GMHelper:BlockReachSet()
GMHelper:openInput({ "Input Float. Default: 6.5" }, function(Float)
ClientHelper.putFloatPrefs("BlockReachDistance", Float)
UIHelper.showToast("done")
end)
end

local function setCameraTargetPos(targetPos)
    local cameraPos = SceneManager.Instance():getMainCamera():getPosition()
    local direction = VectorUtil.newVector3(targetPos.x - cameraPos.x, targetPos.y - cameraPos.y, targetPos.z - cameraPos.z)
    
    -- Calculate yaw and pitch angles
    local yaw = math.atan2(direction.x, direction.z) * 180 / math.pi
    local pitch = math.atan2(direction.y, math.sqrt(direction.x * direction.x + direction.z * direction.z)) * 180 / math.pi

    -- Set the camera rotation instantly
    --camera:setRotation(yaw, pitch, 0)
    PlayerManager:getClientPlayer().Player.rotationYaw = yaw
    PlayerManager:getClientPlayer().Player.rotationPitch = pitch
end



local function getPitchAndYaw2(targetPos)
    local camera = SceneManager.Instance():getMainCamera()
    local pos = camera:getPosition()

    local dir = VectorUtil.sub3(targetPos, pos)

    -- Calculate yaw angle
    local yaw = math.atan2(targetPos.x - pos.x, targetPos.z - pos.z) * -180 / math.pi

    -- Calculate pitch angle
              local distance = math.sqrt(dir.x * dir.x + dir.z * dir.z)
    local pitch = -math.atan2(targetPos.y - pos.y, distance) * 180 / math.pi
    

    PlayerManager:getClientPlayer().Player.rotationYaw = yaw
    PlayerManager:getClientPlayer().Player.rotationPitch = pitch
end

function EntityCache:onTick()
    if XYZ then
        local player = PlayerManager:getClientPlayer()
        if player == nil then
            return
        end
        local pos = player.Player:getPosition()
        MsgSender.sendTopTips(1, string.format("X : %s  Y : %s  Z : %s", tostring(math.floor(pos.x)), tostring(math.floor(pos.y)), tostring(math.floor(pos.z))))
    end

    if LiveViewCamRot then
        yaw = PlayerManager:getClientPlayer().Player:getYaw()
        pitch = PlayerManager:getClientPlayer().Player:getPitch()
        MsgSender.sendTopTips(1, "yaw = "..yaw.." pitch = "..pitch)
    end


if scaffold then
       local pos = PlayerManager:getClientPlayer() :getPosition() 
       EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), 2)
end

if ShowHealth then
    allPlayer = PlayerManager:getPlayers()
    for _, player in pairs(allPlayer) do
        allPlayer.Player:setShowName(allPlayer.Player:getShowName().."".. allPlayer.Player:getHealth().. "\n ")
    end
end

if JetPack then
    local yaw = PlayerManager:getClientPlayer().Player:getYaw()
    local pitch = PlayerManager:getClientPlayer().Player:getPitch()

    local yawRadians = math.rad(yaw)
    local pitchRadians = math.rad(pitch)


    local speed = JetPackSpeed  
    local x = -speed * math.cos(pitchRadians) * math.sin(yawRadians)
    local y = -speed * math.sin(pitchRadians)
    local z = speed * math.cos(pitchRadians) * math.cos(yawRadians)

    local velocity = VectorUtil.newVector3(x, y, z)
    PlayerManager:getClientPlayer().Player:setVelocity(velocity)
end


if LongJump then
    PlayerManager:getClientPlayer().Player:setGlide(true)
end

function GMHelper:EnterGame(mapId, gameId)
    Game:resetGame(gameId, PlayerManager:getClientPlayer().userId, mapId)
end

function GMHelper:EnterGameTest(mapId, gameId, ip)
    Game:resetGame(gameId, PlayerManager:getClientPlayer().userId)
end

function GMHelper:SetPlayerScale2()
    PlayerManager:getClientPlayer().Player.SetPlayerScale = 5
end

function GMHelper:setYaw(yawNum, Sub)
    if Sub then
        PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw - yawNum
        return
    end
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw + yawNum
end

function GMHelper:setYaw()
   GMHelper:openInput({ "" }, function(Number)
        PlayerManager:getClientPlayer().Player.rotationYaw = Number
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:ChangeTime(isNight)
   local curWorld = EngineWorld:getWorld()
   if isNight then
      curWorld:setWorldTime(15000)
	  UIHelper.showToast("^00FF00Now Night!")
      return
   end
   curWorld:setWorldTime(6000)
   UIHelper.showToast("^00FF00Now Day!")
   end
   
function GMHelper:SetTime()
   GMHelper:openInput({ "" }, function(Number)
        local curWorld = EngineWorld:getWorld()
		curWorld:setWorldTime(Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:StartTime()
   isTimeStopped = not isTimeStopped
   local curWorld = EngineWorld:getWorld()
   curWorld:setTimeStopped(isTimeStopped)
   if isTimeStopped then
     UIHelper.showToast("^00FF00Start/Stop Time: disabled!")
     return
   end
   UIHelper.showToast("^00FF00Start/Stop Time: enabled!")
end

function GMHelper:getConfig()
   MsgSender.sendMsg("Time:" .. tostring(ModsConfig.time))
   MsgSender.sendMsg("Show pos:" .. tostring(ModsConfig.showPos))
   MsgSender.sendMsg("Hp warn:" .. tostring(ModsConfig.lhwarn))
   MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
   MsgSender.sendMsg("Hide player names:" .. tostring(ModsConfig.hpn))
end

function GMHelper:HidePlayerName()
   isHideNames = not isHideNames
   if isHideNames then
      ModsConfig.hpn = 1
      MsgSender.sendMsg("Hide players name: enabled!")
      return
   end
   if not isHideNames then
      ModsConfig.hpn = 0
      MsgSender.sendMsg("Hide players name: disabled!")
   end
end

function GMHelper:ShowPos()
   isShowPos = not isShowPos
   if isShowPos then
      ModsConfig.showPos = 1
      MsgSender.sendMsg("Show player position: enabled!")
      return
   end
   ModsConfig.showPos = 0
   MsgSender.sendMsg("Show player position: disabled!")
end

function GMHelper:EnableHPWarn()
   useHPWarn = not useHPWarn
   if useHPWarn then
      ModsConfig.lhwarn = 1
      MsgSender.sendMsg("HP Warning: enabled!")
      return
   end
   ModsConfig.lhwarn = 0
   MsgSender.sendMsg("HP Warning: disabled!")
end

function GMHelper:addHpLvl(amount, sub)
  if sub then
    if ModsConfig.hpwarn == 0 then
	return
    end
    ModsConfig.hpwarn = ModsConfig.hpwarn - 1
    MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
    return
  end
  if ModsConfig.hpwarn == PlayerManager:getClientPlayer().Player:getHealth() then
    return
  end
  ModsConfig.hpwarn = ModsConfig.hpwarn + 1
  MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
end

---@param player SBasePlayer
function GMHelper:addGMPlayer(player, isAllPlayer)
    if not isClient then
        return
    end
    if isAllPlayer then
        for _, c_player in pairs(PlayerManager:getPlayers()) do
            c_player:sendPacket({ pid = "openGMHelper" })
            table.insert(GmIds, c_player.userId)
        end
    else
        local players = PlayerManager:getPlayers()
        local minDis = 99999999
        ---@type SBasePlayer
        local nearestPlayer
        for _, c_player in pairs(players) do
            local distance = MathUtil:distanceSquare3d(c_player:getPosition(), player:getPosition())
            if minDis > distance and c_player ~= player then
                minDis = distance
                nearestPlayer = c_player
            end
        end
        if nearestPlayer and not PlayerManager:isAIPlayer(nearestPlayer) then
            nearestPlayer:sendPacket({ pid = "openGMHelper" })
            table.insert(GmIds, nearestPlayer.userId)
        end
    end
        GUIGMControlPanel:hide()
end

function GMHelper:openCommonPacketDebug()
    CommonDataEvents.isDebug = true
end

function GMHelper:closeCommonPacketDebug()
    CommonDataEvents.isDebug = false
end

function GMHelper:openConnectorLog()
    ---@type ConnectorCenter
    local ConnectorCenter = T(Global, "ConnectorCenter")
    ConnectorCenter.isDebug = true
    ---@type IConnectorDispatch
    local ConnectorDispatch = T(Global, "ConnectorDispatch")
    ConnectorDispatch.isDebug = true
end

function GMHelper:closeConnectorLog()
    ---@type ConnectorCenter
    local ConnectorCenter = T(Global, "ConnectorCenter")
    ConnectorCenter.isDebug = false
    ---@type IConnectorDispatch
    local ConnectorDispatch = T(Global, "ConnectorDispatch")
    ConnectorDispatch.isDebug = false
end

function GMHelper:sendTestConnectorMsg(type)
    local data = {}
    data.a = 1
    data.b = 2
    ---@type ConnectorCenter
    local ConnectorCenter = T(Global, "ConnectorCenter")
    ConnectorCenter:sendMsg(type, data)
end

function GMHelper:SetEnabledRenderFrameTimer(value)
    PerformanceStatistics.SetEnabledRenderFrameTimer(value)
    GUIGMControlPanel:hide()
end

function GMHelper:updateAllShaders()
    Blockman.Instance().m_gameSettings:updateAllShaders()
    GUIGMControlPanel:hide()
end

function GMHelper:setNeedMonitorShader()
    Blockman.Instance().m_gameSettings:setNeedMonitorShader(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setDrawCallDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setDrawCallDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setMinimumGeometry()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setMinimumGeometry(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setColorBlendDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setColorBlendDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setZTestDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setZTestDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setZWriteDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setZWriteDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallTexture()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setUseSmallTexture(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallViewport()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setUseSmallViewport(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallVBO()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setUseSmallVBO(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setClearColorDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setClearColorDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:DisableGraphicAPI()
    Blockman.disableGraphicAPI()
end

function GMHelper:DisableGraphicAPIAndTestCPU()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        Blockman.disableGraphicAPI()
        PerformanceStatistics.SetCPUTimerEnabled(true)
        PerformanceStatistics.SetGPUTimerEnabled(false)
        LuaTimer:schedule(function()
            PerformanceStatistics.PrintResults(30)
        end, 5100)
    end, 200)

end

function GMHelper:DisableGraphicAPIAndTestGPU()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        Blockman.disableGraphicAPI()
        PerformanceStatistics.SetCPUTimerEnabled(false)
        PerformanceStatistics.SetGPUTimerEnabled(true)
        LuaTimer:schedule(function()
            PerformanceStatistics.PrintResults(30)
        end, 5100)
    end, 200)
end

function GMHelper:DisableGraphicAPIAndDrawCallTest()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        Blockman.disableGraphicAPI()
        PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    end, 200)
end

function GMHelper:openScreenRecord()
    local names = { "Main-PoleControl-Move", "Main-PoleControl", "Main-FlyingControls", "Main-Fly" }
    local window = GUISystem.Instance():GetRootWindow()
    window:SetXPosition({ 0, 10000 })
    local Main = GUIManager:getWindowByName("Main")
    local count = Main:GetChildCount()
    for i = 1, count do
        local child = Main:GetChildByIndex(i - 1)
        local name = child:GetName()
        if not TableUtil.tableContain(names, name) then
            child:SetXPosition({ 0, 10000 })
            child:SetYPosition({ 0, 10000 })
        end
    end
    ClientHelper.putFloatPrefs("MainControlKeyAlphaNormal", 0)
    ClientHelper.putFloatPrefs("MainControlKeyAlphaPress", 0)
    GUIManager:getWindowByName("Main-Fly"):SetProperty("NormalImage", "")
    GUIManager:getWindowByName("Main-Fly"):SetProperty("PushedImage", "")
    GUIManager:getWindowByName("Main-PoleControl-BG"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-PoleControl-Center"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Up"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Drop"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Down"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Break-Block-Progress-Nor"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Break-Block-Progress-Pre"):SetProperty("ImageName", "")
    Main:SetXPosition({ 0, -10000 })
    ClientHelper.putBoolPrefs("RenderHeadText", false)
    PlayerManager:getClientPlayer().Player:setActorInvisible(true)
end

function GMHelper:changeLuaHotUpdate(update)
    startLuaHotUpdate()
    HU.CanUpdate = update
end

function GMHelper:changeOpenEventDialog(isOpen)
    GUIGMMain:changeOpenEventDialog(isOpen)
end

function GMHelper:showUserRegion()
    UIHelper.showToast("游戏大区=" .. Game:getRegionId()
            .. "   玩家区域=" .. Game:getUserRegion())
end

---@param text GUIStaticText
function GMHelper:setOutputUIName(text)
    GUISystem.Instance():SetOutputUIName(not GUISystem.Instance():IsOutputUIName())
    text:SetText("打印UI(" .. (GUISystem.Instance():IsOutputUIName() and "开)" or "关)"))
end

function GMHelper:telnetClient()
    if not Platform.isWindow() then
        return
    end
    local misc = require("misc")
    local debugport = require "engine_base.debug.DebugPort"
    misc.win_exec("telnet.exe", "127.0.0.1 " .. debugport.port, nil, nil, true)
end

function GMHelper:telnetServer()
    if not Platform.isWindow() then
        return
    end
    local misc = require("misc")
    local debugport = require "engine_base.debug.DebugPort"
    misc.win_exec("telnet.exe", "127.0.0.1 " .. debugport.port, 1, 1, true)
end

function GMHelper:setGlobalShowText()
    Root.Instance():setShowText(not Root.Instance():isShowText())
end

function GMHelper:copyClientLog()
    if Platform.isWindow() then
        return
    end
    local path = Root.Instance():getWriteablePath() .. "client.log"
    local file = io.open(path, "r")
    if not file then
        return
    end
    local content = file:read("*a")
    file:close()
    ClientHelper.onSetClipboard(content)
    UIHelper.showToast("拷贝成功，请粘贴到钉钉上自动生成文件发送到群里")
end

function GMHelper:sendConnectorChatMsg(msgCount)
    if isClient or isStaging then
        ---@type ChatService
        local ChatService = T(Global, "ChatService")
        for i = 1, msgCount do
            ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg, { content = "Test:" .. i })
        end
    end
end

function GMHelper:queryBoolKey()
    GMHelper:openInput({ "" }, function(key)
        CustomDialog.builder()
                    .setContentText(key .. "=" .. tostring(ClientHelper.getBoolForKey(key)))
                    .setHideLeftButton()
                    .show()
        GUIGMControlPanel:hide()
    end)
end

function GMHelper:queryStringKey()
    GMHelper:openInput({ "" }, function(key)
        CustomDialog.builder()
                    .setContentText(key .. "=" .. ClientHelper.getStringForKey(key))
                    .setHideLeftButton()
                    .setRightText("复制到粘贴板")
                    .setRightClickListener(function()
            ClientHelper.onSetClipboard(ClientHelper.getStringForKey(key))
            UIHelper.showToast("复制成功")
        end)
                    .show()
        GUIGMControlPanel:hide()
    end)
end

function GMHelper:makeGmButtonTran()
    GUIGMMain:setTransparent()
end

function GMHelper:setRenderMainScreenSeparate(enable)
    Root.Instance():setRenderMainScreenSeparate(enable)
end

function GMHelper:setEnableMergeBlock(enable)
    Root.Instance():setEnableMergeBlock(true)
    UIHelper.showToast("1")
end

function GMHelper:AnvilToObj()
    local centerPos = VectorUtil.newVector3()
    local chunkWidth = 32
    AnvilToObj.doTranslate(centerPos, chunkWidth)
end

function GMHelper:inTheAirCheat()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 3.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:GoTO10BlocksDown()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 0.0, 1.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:GoTO10Blocks()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(1.0, 0.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:testModiyScript()
    ClientHttpRequest.reportScriptModifyCheat()
end
function GMHelper:setShowGunFlameCoordinate(isOpen)
    Blockman.Instance():setShowGunFlameCoordinate(isOpen)
    if isOpen then
        GUIGMControlPanel:setBackgroundColor(Color.TRANS)
    else
        GUIGMControlPanel:setBackgroundColor({ 0, 0, 0, 0.784314 })
    end
end

function GMHelper:changeGunFlameParam(key, value)
    ClientHelper.putFloatPrefs(key, ClientHelper.getFloatPrefs(key) + value)
end

function GMHelper:copyShowGunFlameParam(view)
    local front = ClientHelper.getFloatPrefs("GunFlameFrontOff" .. view)
    local right = ClientHelper.getFloatPrefs("GunFlameRightOff" .. view)
    local down = ClientHelper.getFloatPrefs("GunFlameDownOff" .. view)
    local scale = ClientHelper.getFloatPrefs("GunFlameScale" .. view)
    front = math.floor(front * 100) / 100
    right = math.floor(right * 100) / 100
    down = math.floor(down * 100) / 100
    scale = math.floor(scale * 100) / 100
    local param = front .. "#" .. right .. "#" .. down .. "#" .. scale
    ClientHelper.onSetClipboard(param)
    UIHelper.showToast("拷贝成功")
end

function GMHelper:testinValidEffect()
    local templateName = "01_face_boy.mesh"
    local position = VectorUtil.newVector3(100.0, 10.0, 100.0)
    WorldEffectManager.Instance():addSimpleEffect(templateName, position, 1, 1, 1, 1, 1)
    UIHelper.showToast("测试 非法 特效 完成")
end

function GMHelper:outputItemLangFile()
    if not isClient then
        return
    end
    local items = {}
    for id = 1, 6000 do
        local item = Item.getItemById(id)
        if item then
            local lang = Lang:getItemName(id, 0)
            if lang == "" then
                lang = item:getUnlocalizedName()
            end
            items[tostring(id)] = lang
        end
    end
    local file = io.open(GameType .. "_item_name.json", "w")
    file:write(json.encode(items))
    file:close()
end

function GMHelper:MyLoveFly(text)
   A = not A
    ClientHelper.putBoolPrefs("EnableDoubleJumps", true)
   if A then
	UIHelper.showToast("^00FF00FLy ON")
     return
   end
    ClientHelper.putBoolPrefs("EnableDoubleJumps", false)
	UIHelper.showToast("^00FF00FLy OFF")
end

function GMHelper:GUISkyblockTest1()
    UIHelper.showGameGUILayout("GUIChristmas", 1)
	GUIGMControlPanel:hide()
end

function GMHelper:showChatRecord(chatId)
    ChatClient:getPrivateMsgCache(chatId, nil, function(chatMsgList)
        LogUtil.pv(chatMsgList)
    end)
end

function GMHelper:autoPrintResults()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        PerformanceStatistics.PrintResults(20)
    end, 5000)
end

function GMHelper:autoProfilePerformance()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        PerformanceStatistics.ProfilePerformance(20)
    end, 100)

    GMHelper:showInput({
        "exp",
        "exp2",
    }, function(exp, exp2)

    end)
end

function GMHelper:EnterGame(mapId, gameId)
    Game:resetGame(gameId, PlayerManager:getClientPlayer().userId, mapId)
end

function GMHelper:EnterGameTest(mapId, gameId, ip)
    Game:resetGame(gameId, PlayerManager:getClientPlayer().userId)
end

function GMHelper:SetPlayerScale2()
    PlayerManager:getClientPlayer().Player.SetPlayerScale = 5
end

function GMHelper:setYaw(yawNum, Sub)
    if Sub then
        PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw - yawNum
        return
    end
    PlayerManager:getClientPlayer().Player.rotationYaw = PlayerManager:getClientPlayer().Player.rotationYaw + yawNum
end

function GMHelper:setYaw()
   GMHelper:openInput({ "" }, function(Number)
        PlayerManager:getClientPlayer().Player.rotationYaw = Number
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:ChangeTime(isNight)
   local curWorld = EngineWorld:getWorld()
   if isNight then
      curWorld:setWorldTime(15000)
	  UIHelper.showToast("^00FF00Now Night!")
      return
   end
   curWorld:setWorldTime(6000)
   UIHelper.showToast("^00FF00Now Day!")
   end
   
function GMHelper:SetTime()
   GMHelper:openInput({ "" }, function(Number)
        local curWorld = EngineWorld:getWorld()
		curWorld:setWorldTime(Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:StartTime()
   isTimeStopped = not isTimeStopped
   local curWorld = EngineWorld:getWorld()
   curWorld:setTimeStopped(isTimeStopped)
   if isTimeStopped then
     UIHelper.showToast("^FF0000Start/Stop Time: disabled!")
     return
   end
   UIHelper.showToast("^00FF00Start/Stop Time: enabled!")
end

function GMHelper:getConfig()
   MsgSender.sendMsg("Time:" .. tostring(ModsConfig.time))
   MsgSender.sendMsg("Show pos:" .. tostring(ModsConfig.showPos))
   MsgSender.sendMsg("Hp warn:" .. tostring(ModsConfig.lhwarn))
   MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
   MsgSender.sendMsg("Hide player names:" .. tostring(ModsConfig.hpn))
end

function GMHelper:HidePlayerName()
   isHideNames = not isHideNames
   if isHideNames then
      ModsConfig.hpn = 1
      MsgSender.sendMsg("Hide players name: enabled!")
      return
   end
   if not isHideNames then
      ModsConfig.hpn = 0
      MsgSender.sendMsg("Hide players name: disabled!")
   end
end

function GMHelper:ShowPos()
   isShowPos = not isShowPos
   if isShowPos then
      ModsConfig.showPos = 1
      MsgSender.sendMsg("Show player position: enabled!")
      return
   end
   ModsConfig.showPos = 0
   MsgSender.sendMsg("Show player position: disabled!")
end

function GMHelper:EnableHPWarn()
   useHPWarn = not useHPWarn
   if useHPWarn then
      ModsConfig.lhwarn = 1
      MsgSender.sendMsg("HP Warning: enabled!")
      return
   end
   ModsConfig.lhwarn = 0
   MsgSender.sendMsg("HP Warning: disabled!")
end

function GMHelper:addHpLvl(amount, sub)
  if sub then
    if ModsConfig.hpwarn == 0 then
	return
    end
    ModsConfig.hpwarn = ModsConfig.hpwarn - 1
    MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
    return
  end
  if ModsConfig.hpwarn == PlayerManager:getClientPlayer().Player:getHealth() then
    return
  end
  ModsConfig.hpwarn = ModsConfig.hpwarn + 1
  MsgSender.sendMsg("Hp warn level:" .. tostring(ModsConfig.hpwarn))
end

---@param player SBasePlayer
function GMHelper:addGMPlayer(player, isAllPlayer)
    if not isClient then
        return
    end
    if isAllPlayer then
        for _, c_player in pairs(PlayerManager:getPlayers()) do
            c_player:sendPacket({ pid = "openGMHelper" })
            table.insert(GmIds, c_player.userId)
        end
    else
        local players = PlayerManager:getPlayers()
        local minDis = 99999999
        ---@type SBasePlayer
        local nearestPlayer
        for _, c_player in pairs(players) do
            local distance = MathUtil:distanceSquare3d(c_player:getPosition(), player:getPosition())
            if minDis > distance and c_player ~= player then
                minDis = distance
                nearestPlayer = c_player
            end
        end
        if nearestPlayer and not PlayerManager:isAIPlayer(nearestPlayer) then
            nearestPlayer:sendPacket({ pid = "openGMHelper" })
            table.insert(GmIds, nearestPlayer.userId)
        end
    end
        GUIGMControlPanel:hide()
end

function GMHelper:openCommonPacketDebug()
    CommonDataEvents.isDebug = true
end

function GMHelper:closeCommonPacketDebug()
    CommonDataEvents.isDebug = false
end

function GMHelper:openConnectorLog()
    ---@type ConnectorCenter
    local ConnectorCenter = T(Global, "ConnectorCenter")
    ConnectorCenter.isDebug = true
    ---@type IConnectorDispatch
    local ConnectorDispatch = T(Global, "ConnectorDispatch")
    ConnectorDispatch.isDebug = true
end

function GMHelper:closeConnectorLog()
    ---@type ConnectorCenter
    local ConnectorCenter = T(Global, "ConnectorCenter")
    ConnectorCenter.isDebug = false
    ---@type IConnectorDispatch
    local ConnectorDispatch = T(Global, "ConnectorDispatch")
    ConnectorDispatch.isDebug = false
end

function GMHelper:sendTestConnectorMsg(type)
    local data = {}
    data.a = 1
    data.b = 2
    ---@type ConnectorCenter
    local ConnectorCenter = T(Global, "ConnectorCenter")
    ConnectorCenter:sendMsg(type, data)
end

function GMHelper:SetEnabledRenderFrameTimer(value)
    PerformanceStatistics.SetEnabledRenderFrameTimer(value)
    GUIGMControlPanel:hide()
end

function GMHelper:updateAllShaders()
    Blockman.Instance().m_gameSettings:updateAllShaders()
    GUIGMControlPanel:hide()
end

function GMHelper:setNeedMonitorShader()
    Blockman.Instance().m_gameSettings:setNeedMonitorShader(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setDrawCallDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setDrawCallDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setMinimumGeometry()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setMinimumGeometry(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setColorBlendDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setColorBlendDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setZTestDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setZTestDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setZWriteDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setZWriteDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallTexture()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setUseSmallTexture(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallViewport()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setUseSmallViewport(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setUseSmallVBO()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setUseSmallVBO(true)
    GUIGMControlPanel:hide()
end

function GMHelper:setClearColorDisabled()
    PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    RenderExperimentSwitch.Instance():setClearColorDisabled(true)
    GUIGMControlPanel:hide()
end

function GMHelper:DisableGraphicAPI()
    Blockman.disableGraphicAPI()
end

function GMHelper:DisableGraphicAPIAndTestCPU()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        Blockman.disableGraphicAPI()
        PerformanceStatistics.SetCPUTimerEnabled(true)
        PerformanceStatistics.SetGPUTimerEnabled(false)
        LuaTimer:schedule(function()
            PerformanceStatistics.PrintResults(30)
        end, 5100)
    end, 200)

end

function GMHelper:DisableGraphicAPIAndTestGPU()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        Blockman.disableGraphicAPI()
        PerformanceStatistics.SetCPUTimerEnabled(false)
        PerformanceStatistics.SetGPUTimerEnabled(true)
        LuaTimer:schedule(function()
            PerformanceStatistics.PrintResults(30)
        end, 5100)
    end, 200)
end

function GMHelper:DisableGraphicAPIAndDrawCallTest()
    GUIGMControlPanel:hide()
    LuaTimer:schedule(function()
        Blockman.disableGraphicAPI()
        PerformanceStatistics.SetEnabledRenderFrameTimer(true)
    end, 200)
end

function GMHelper:openScreenRecord()
    local names = { "Main-PoleControl-Move", "Main-PoleControl", "Main-FlyingControls", "Main-Fly" }
    local window = GUISystem.Instance():GetRootWindow()
    window:SetXPosition({ 0, 10000 })
    local Main = GUIManager:getWindowByName("Main")
    local count = Main:GetChildCount()
    for i = 1, count do
        local child = Main:GetChildByIndex(i - 1)
        local name = child:GetName()
        if not TableUtil.tableContain(names, name) then
            child:SetXPosition({ 0, 10000 })
            child:SetYPosition({ 0, 10000 })
        end
    end
    ClientHelper.putFloatPrefs("MainControlKeyAlphaNormal", 0)
    ClientHelper.putFloatPrefs("MainControlKeyAlphaPress", 0)
    GUIManager:getWindowByName("Main-Fly"):SetProperty("NormalImage", "")
    GUIManager:getWindowByName("Main-Fly"):SetProperty("PushedImage", "")
    GUIManager:getWindowByName("Main-PoleControl-BG"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-PoleControl-Center"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Up"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Drop"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Down"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Break-Block-Progress-Nor"):SetProperty("ImageName", "")
    GUIManager:getWindowByName("Main-Break-Block-Progress-Pre"):SetProperty("ImageName", "")
    Main:SetXPosition({ 0, -10000 })
    ClientHelper.putBoolPrefs("RenderHeadText", false)
    PlayerManager:getClientPlayer().Player:setActorInvisible(true)
end

function GMHelper:changeLuaHotUpdate(update)
    startLuaHotUpdate()
    HU.CanUpdate = update
end

function GMHelper:changeOpenEventDialog(isOpen)
    GUIGMMain:changeOpenEventDialog(isOpen)
end

function GMHelper:showUserRegion()
    UIHelper.showToast("游戏大区=" .. Game:getRegionId()
            .. "   玩家区域=" .. Game:getUserRegion())
end

---@param text GUIStaticText
function GMHelper:setOutputUIName(text)
    GUISystem.Instance():SetOutputUIName(not GUISystem.Instance():IsOutputUIName())
    text:SetText("打印UI(" .. (GUISystem.Instance():IsOutputUIName() and "开)" or "关)"))
end

function GMHelper:telnetClient()
    if not Platform.isWindow() then
        return
    end
    local misc = require("misc")
    local debugport = require "engine_base.debug.DebugPort"
    misc.win_exec("telnet.exe", "127.0.0.1 " .. debugport.port, nil, nil, true)
end

function GMHelper:telnetServer()
    if not Platform.isWindow() then
        return
    end
    local misc = require("misc")
    local debugport = require "engine_base.debug.DebugPort"
    misc.win_exec("telnet.exe", "127.0.0.1 " .. debugport.port, 1, 1, true)
end

function GMHelper:setGlobalShowText()
    Root.Instance():setShowText(not Root.Instance():isShowText())
end

function GMHelper:copyClientLog()
    if Platform.isWindow() then
        return
    end
    local path = Root.Instance():getWriteablePath() .. "client.log"
    local file = io.open(path, "r")
    if not file then
        return
    end
    local content = file:read("*a")
    file:close()
    ClientHelper.onSetClipboard(content)
    UIHelper.showToast("拷贝成功，请粘贴到钉钉上自动生成文件发送到群里")
end

function GMHelper:sendConnectorChatMsg(msgCount)
    if isClient or isStaging then
        ---@type ChatService
        local ChatService = T(Global, "ChatService")
        for i = 1, msgCount do
            ChatService:sendMsgToLangGroup(Define.ChatMsgType.TextMsg, { content = "Test:" .. i })
        end
    end
end

function GMHelper:queryBoolKey()
    GMHelper:openInput({ "" }, function(key)
        CustomDialog.builder()
                    .setContentText(key .. "=" .. tostring(ClientHelper.getBoolForKey(key)))
                    .setHideLeftButton()
                    .show()
        GUIGMControlPanel:hide()
    end)
end

function GMHelper:queryStringKey()
    GMHelper:openInput({ "" }, function(key)
        CustomDialog.builder()
                    .setContentText(key .. "=" .. ClientHelper.getStringForKey(key))
                    .setHideLeftButton()
                    .setRightText("复制到粘贴板")
                    .setRightClickListener(function()
            ClientHelper.onSetClipboard(ClientHelper.getStringForKey(key))
            UIHelper.showToast("复制成功")
        end)
                    .show()
        GUIGMControlPanel:hide()
    end)
end

function GMHelper:makeGmButtonTran()
    GUIGMMain:setTransparent()
end

function GMHelper:setRenderMainScreenSeparate(enable)
    Root.Instance():setRenderMainScreenSeparate(enable)
end

function GMHelper:setEnableMergeBlock(enable)
    Root.Instance():setEnableMergeBlock(true)
    UIHelper.showToast("1")
end

function GMHelper:AnvilToObj()
    local centerPos = VectorUtil.newVector3()
    local chunkWidth = 32
    AnvilToObj.doTranslate(centerPos, chunkWidth)
end

function GMHelper:inTheAirCheat()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 3.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:inTheAirCheatMinus()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, -3.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:GoTO10BlocksDown()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 0.0, 1.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:GoTO10Blocks()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(1.0, 0.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 20)
end

function GMHelper:testModiyScript()
    ClientHttpRequest.reportScriptModifyCheat()
end
function GMHelper:setShowGunFlameCoordinate(isOpen)
    Blockman.Instance():setShowGunFlameCoordinate(isOpen)
    if isOpen then
        GUIGMControlPanel:setBackgroundColor(Color.TRANS)
    else
        GUIGMControlPanel:setBackgroundColor({ 0, 0, 0, 0.784314 })
    end
end

function GMHelper:changeGunFlameParam(key, value)
    ClientHelper.putFloatPrefs(key, ClientHelper.getFloatPrefs(key) + value)
end

function GMHelper:copyShowGunFlameParam(view)
    local front = ClientHelper.getFloatPrefs("GunFlameFrontOff" .. view)
    local right = ClientHelper.getFloatPrefs("GunFlameRightOff" .. view)
    local down = ClientHelper.getFloatPrefs("GunFlameDownOff" .. view)
    local scale = ClientHelper.getFloatPrefs("GunFlameScale" .. view)
    front = math.floor(front * 100) / 100
    right = math.floor(right * 100) / 100
    down = math.floor(down * 100) / 100
    scale = math.floor(scale * 100) / 100
    local param = front .. "#" .. right .. "#" .. down .. "#" .. scale
    ClientHelper.onSetClipboard(param)
    UIHelper.showToast("拷贝成功")
end

function GMHelper:testinValidEffect()
    local templateName = "01_face_boy.mesh"
    local position = VectorUtil.newVector3(100.0, 10.0, 100.0)
    WorldEffectManager.Instance():addSimpleEffect(templateName, position, 1, 1, 1, 1, 1)
    UIHelper.showToast("测试 非法 特效 完成")
end

function GMHelper:outputItemLangFile()
    if not isClient then
        return
    end
    local items = {}
    for id = 1, 6000 do
        local item = Item.getItemById(id)
        if item then
            local lang = Lang:getItemName(id, 0)
            if lang == "" then
                lang = item:getUnlocalizedName()
            end
            items[tostring(id)] = lang
        end
    end
    local file = io.open(GameType .. "_item_name.json", "w")
    file:write(json.encode(items))
    file:close()
end

function GMHelper:MyLoveFly(text)
   A = not A
    ClientHelper.putBoolPrefs("EnableDoubleJumps", true)
   if A then
	UIHelper.showToast("^00FF00FLy ON")
     return
   end
    ClientHelper.putBoolPrefs("EnableDoubleJumps", false)
	UIHelper.showToast("^FF0000FLy OFF")
end

function GMHelper:GUISkyblockTest1()
    UIHelper.showGameGUILayout("GUIChristmas", 1)
	GUIGMControlPanel:hide()
end

function GMHelper:GUISkyblockTest2()
    UIHelper.showGameGUILayout("GUIGameTool")
	GUIGMControlPanel:hide()
end

function GMHelper:GUISkyblockTest3()
    UIHelper.showGameGUILayout("GUIRewardDetail", self.rewardId)
	GUIGMControlPanel:hide()
end

function GMHelper:Reach()
   A = not A
    ClientHelper.putFloatPrefs("BlockReachDistance", 1000000)
	ClientHelper.putFloatPrefs("EntityReachDistance", 1000)
   if A then
	UIHelper.showToast("^00FF00REACH ON")
     return
   end
    ClientHelper.putFloatPrefs("BlockReachDistance", 10)
	ClientHelper.putFloatPrefs("EntityReachDistance", 10)
	UIHelper.showToast("^00FF00REACH OFF")
end

function GMHelper:ViewBobbing()
   A = not A
    ClientHelper.putBoolPrefs("IsViewBobbing", false)
   if A then
	UIHelper.showToast("^FF0000ViewBobbing: OFF")
     return
   end
    ClientHelper.putBoolPrefs("IsViewBobbing", true)
	UIHelper.showToast("^00FF00ViewBobbing: ON")
end

function GMHelper:BlockmanCollision()
   A = not A
	ClientHelper.putBoolPrefs("IsCreatureCollision", true)
    ClientHelper.putBoolPrefs("IsBlockmanCollision", true)
   if A then
	UIHelper.showToast("^00FF00BlockmanCollision: ON")
     return
   end
    ClientHelper.putBoolPrefs("IsBlockmanCollision", false)
	UIHelper.showToast("^FF0000BlockmanCollision: OFF")
	ClientHelper.putBoolPrefs("IsCreatureCollision", false)
end

function GMHelper:RenderWorld()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("BlockRenderDistance", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:Fog()
   A = not A
    ClientHelper.putBoolPrefs("DisableFog", true)
   if A then
	UIHelper.showToast("^FF0000Fog Disabled!")
     return
   end
    ClientHelper.putBoolPrefs("DisableFog", false)
	UIHelper.showToast("^00FF00Fog Enabled!")
end

function GMHelper:WWE_Camera()
   A = not A
    ClientHelper.putBoolPrefs("IsSeparateCamera", true)
   if A then
	UIHelper.showToast("^00FF00SeparateCamera: Enabled")
     return
   end
    ClientHelper.putBoolPrefs("IsSeparateCamera", false)
	UIHelper.showToast("^FF0000SeparateCamera: Disabled")
end

function GMHelper:ResetXD()
    ClientHelper.putStringPrefs("RunSkillName", "run")
	GUIGMControlPanel:hide()
end

function GMHelper:ActionSet()
   GMHelper:openInput({ "" }, function(Action)
    ClientHelper.putStringPrefs("RunSkillName", Action)
    end)
end

function GMHelper:WalkSMG()
    ClientHelper.putStringPrefs("RunSkillName", "smg_walk")
	GUIGMControlPanel:hide()
end

function GMHelper:SneakXD()
    ClientHelper.putStringPrefs("RunSkillName", "sneak")
	GUIGMControlPanel:hide()
end

function GMHelper:SitXD()
    ClientHelper.putStringPrefs("RunSkillName", "sit1")
	GUIGMControlPanel:hide()
end

function GMHelper:SitXD2()
    ClientHelper.putStringPrefs("RunSkillName", "sit2")
	GUIGMControlPanel:hide()
end

function GMHelper:SitXD3()
    ClientHelper.putStringPrefs("RunSkillName", "sit3")
	GUIGMControlPanel:hide()
end

function GMHelper:rideDragonXD()
    ClientHelper.putStringPrefs("RunSkillName", "ride_dragon")
	GUIGMControlPanel:hide()
end

function GMHelper:SwimXD()
    ClientHelper.putStringPrefs("RunSkillName", "swim")
	GUIGMControlPanel:hide()
end

function GMHelper:ArmSpeed()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("ArmSwingAnimationEnd", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:CameraFunct()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putFloatPrefs("ThirdPersonDistance", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:CloudsOFF()
    ClientHelper.putBoolPrefs("DisableRenderClouds", true)
	UIHelper.showToast("^FF0000Clouds Stop")
	GUIGMControlPanel:hide()
end

function GMHelper:BowSpeed()
	ClientHelper.putFloatPrefs("BowPullingSpeedMultiplier", 1000)
	ClientHelper.putFloatPrefs("BowPullingFOVMultiplier", 0)
	UIHelper.showToast("^00FF00BowSpeed:ON")
	GUIGMControlPanel:hide()
end

function GMHelper:HeadText()
   A = not A
   ClientHelper.putBoolPrefs("RenderHeadText", true)
   if A then
	UIHelper.showToast("^00FF00Head text render now ON")
     return
   end
   ClientHelper.putBoolPrefs("RenderHeadText", false)
	UIHelper.showToast("^FF0000Head text render now OFF")
end

function GMHelper:changePlayerActor(sex)
    if isGameStart then
        if sex == 1 then
            ClientHelper.putStringPrefs("BoyActorName", "boy.actor")
            ClientHelper.putStringPrefs("GirlActorName", "boy.actor")
        else
            ClientHelper.putStringPrefs("BoyActorName", "girl.actor")
            ClientHelper.putStringPrefs("GirlActorName", "girl.actor")
        end
    else
        if sex == 1 then
            ClientHelper.putStringPrefs("BoyActorName", "boy.actor")
            ClientHelper.putStringPrefs("GirlActorName", "boy.actor")
        else
            ClientHelper.putStringPrefs("BoyActorName", "girl.actor")
            ClientHelper.putStringPrefs("GirlActorName", "girl.actor")
        end
    end
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        if player.Player then
            player.Player.m_isPeopleActor = false
            EngineWorld:restorePlayerActor(player)
        end
    end
	UIHelper.showToast("^00FF00Success!")
	GUIGMControlPanel:hide()
end
--destroyAllEntityActor()
function GMHelper:BanClickCD(text)
   A = not A
    ClientHelper.putBoolPrefs("banClickCD", true)
   if A then
	UIHelper.showToast("^FF0000done, bedwars click: 0FF")
     return
   end
    ClientHelper.putBoolPrefs("banClickCD", false)
	UIHelper.showToast("^00FF00done, bedwars click: 0N")
end

function GMHelper:ShowAllCobtrolXD()
    RootGuiLayout.Instance():showMainControl()
end

function GMHelper:PersonView()
   GMHelper:openInput({ "" }, function(Number)
        Blockman.Instance():setPersonView(Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:BreakParticles()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("BlockDestroyEffectSize", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:JailBreakBypass()
    RootGuiLayout.Instance():showMainControl()
	GUIGMControlPanel:hide()
end

function GMHelper:infbrid1()
   function ModuleBlockConfig:init()
    local config = FileUtil.getGameConfigFromYml("module_block/ModuleBlock", true) or {}
    self.placeBlockMaxDepth = config.placeBlockMaxDepth or 2
    self.placeBlockMaxBuildDistance = 99999999999
    self.buildRoadModeMaxDistance = 9999999999999
    if isClient then
        ClientHelper.putIntPrefs("RunLimitCheck", config.limitBlockCheckRun or 10)
        ClientHelper.putIntPrefs("SprintLimitCheck", config.limitBlockCheckSprint or 10)
    end
    config = FileUtil.getGameConfigFromCsv("module_block/ModuleBlock.csv", 2, true, true) or {}
    for _, item in pairs(config) do
        local data = {
            id = tonumber(item.id),
            itemId = tonumber(item.itemId),
            teamId = tonumber(item.teamId) or 0,
            consumeNum = tonumber(item.consumeNum) or 1,
            schematic = item.schematic,
            offsetX = tonumber(item.offsetX) or 0,
            offsetZ = tonumber(item.offsetZ) or 0,
            image = item.image,
            extraParam = tonumber(item.extraParam) or 0,
        }
        Settings[data.itemId] = Settings[data.itemId] or {}
        table.insert(Settings[data.itemId], data)
    end
    for _, setting in pairs(Settings) do
        table.sort(setting, function(a, b)
            return a.id < b.id
        end)
    end
end

function ModuleBlockConfig:getModuleBlock(itemId, moduleId, teamId)
    local modules = Settings[itemId]
    if not modules then
        return nil
    end
    if moduleId and moduleId ~= 0 then
        for _, module in pairs(modules) do
            if module.id == moduleId then
                return module
            end
        end
    end
    for _, module in pairs(modules) do
        if module.teamId == teamId then
            return module
        end
    end
    if teamId == 0 then
        return nil
    else
        return self:getModuleBlock(itemId, moduleId, 0)
    end
end

function ModuleBlockConfig:getModuleBlocks(itemId)
    return Settings[itemId]
end

function ModuleBlockConfig:getDefaultModuleId(itemId)
    local modules = Settings[itemId]
    if TableUtil.isEmpty(modules) then
        return 0
    end
    return modules[1].id
end

function ModuleBlockConfig:hasConfig()
    return not TableUtil.isEmpty(Settings)
end

ModuleBlockConfig:init()
	UIHelper.showToast("^00FF00ON")
		GUIGMControlPanel:hide()
end

function GMHelper:SpeedLineMode()
    local strength = 1
    local interval = 0.01
    Blockman.Instance().m_gameSettings:setPatternSpeedLine(strength, interval)
	UIHelper.showToast("^00FF00Speed Line = Enable!")
	GUIGMControlPanel:hide()
end

function GMHelper:SpeedLineModeDisable()
    local strength = 0
    local interval = 0
    Blockman.Instance().m_gameSettings:setPatternSpeedLine(strength, interval)
	UIHelper.showToast("^FF0000Speed Line = Disabled!")
	GUIGMControlPanel:hide()
end

function GMHelper:PatternTorchMode()
    local strength = 1
    Blockman.Instance().m_gameSettings:setPatternTorchStrength(strength)
	UIHelper.showToast("^00FF00PatternTorch = Enabled!")
	GUIGMControlPanel:hide()
end

function GMHelper:PatternTorchModeOFF()
    local strength = 0
    Blockman.Instance().m_gameSettings:setPatternTorchStrength(strength)
	UIHelper.showToast("^FF0000PatternTorch = Disabled!")
	GUIGMControlPanel:hide()
end

function GMHelper:CameraFlipModeRESET()
    Blockman.Instance().m_gameSettings:setFovSetting(1)
	GUIGMControlPanel:hide()
end

function GMHelper:CameraFlipModeON()
    Blockman.Instance().m_gameSettings:setFovSetting(90)
	GUIGMControlPanel:hide()
end

function GMHelper:Iikj(player)
    local pos = player:getPosition()
    pos.y = pos.y + 0.5
    local yaw = player:getYaw()
    player:teleportPosWithYaw(pos, yaw)
	GUIGMControlPanel:hide()
end

function GMHelper:GUItest1()
    MsgSender.sendMsg(10007, "IikjLol")
	MsgSender.sendMsg(10006, "IikjLol")
	MsgSender.sendMsg(10005, "IikjLol")
	MsgSender.sendMsg(10004, "IikjLol")
	MsgSender.sendMsg(10003, "IikjLol")
	MsgSender.sendMsg(10002, "IikjLol")
	MsgSender.sendMsg(10001, "IikjLol")
    MsgSender.sendMsg(10000, "IikjLol")
    MsgSender.sendMsg(1, "IikjLol")
end

function GMHelper:FustBreakBlockMode()
    ---设置轨道不渲染
    cBlockManager.cGetBlockById(66):setNeedRender(false)
    cBlockManager.cGetBlockById(253):setNeedRender(false)
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
            block:setHardness(0)
	UIHelper.showToast("^00FF00Turned ON")
	GUIGMControlPanel:hide()
    end
	    end
end

function GMHelper:FlyDev()
    GUIManager:hideWindowByName("Main.binary")
    GUIManager:hideWindowByName("Main.json")
	GUIGMControlPanel:hide()
end

function GMHelper:HideHP()
    GUIManager:getWindowByName("PlayerInfo-Health"):SetVisible(false)
end

function GMHelper:ShowHP()
    GUIManager:getWindowByName("PlayerInfo-Health"):SetVisible(true)
end

function GMHelper:FlyDev2()
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
    Blockman.Instance():setBloomEnable(true)
    Blockman.Instance():enableFullscreenBloom(true)
    Blockman.Instance():setBlockBloomOption(100)
    Blockman.Instance():setBloomIntensity(100)
    Blockman.Instance():setBloomSaturation(100)
    Blockman.Instance():setBloomThreshold(100)
	UIHelper.showToast("^00FF00Speed Break Block = 0")
	GUIGMControlPanel:hide()
end
end
end

function GMHelper:FlyDev3()
    GUIManager:showWindowByName("PlayerInventory-DesignationTab")
	GUIManager:getWindowByName("PlayerInventory-DesignationTab"):SetVisible(true)
	GUIManager:showWindowByName("PlayerInventory-MainInventoryTab")
	GUIManager:getWindowByName("PlayerInventory-MainInventoryTab"):SetVisible(true)
	GUIManager:getWindowByName("PlayerInventory-MainInventoryTab"):SetArea({ 1, 1 }, { 1, 0 }, { 0, 1 }, { 0, 1 })
	GUIManager:getWindowByName("PlayerInventory-DesignationTab"):SetArea({ 0, 0 }, { 0, 0 }, { 0.3, 0 }, { 0.3, 0 })
    GUIManager:getWindowByName("PlayerInventory-ToggleInventoryButton"):SetVisible(true)
	GUIManager:showWindowByName("PlayerInventory-ToggleInventoryButton")
	GUIGMControlPanel:hide()
end

function GMHelper:Freecam()
    GUIManager:getWindowByName("Main-HideAndSeek-Operate"):SetVisible(true)
	GUIGMControlPanel:hide()
end

function GMHelper:TntTag()
    GUIManager:showWindowByName("Main-throwpot-Controls")
	GUIManager:getWindowByName("Main-throwpot-Controls"):SetVisible(true)
	GUIGMControlPanel:hide()
end

function GMHelper:SetBobbing()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putFloatPrefs("PlayerBobbingScale", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:test200()
	MsgSender.sendMsg(Messages:gameResetTimeHint())
	GUIGMControlPanel:hide()
end

function GMHelper:test600()
	    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        if player.Player then
            player.Player.m_isPeopleActor = false
            EngineWorld:restorePlayerActor(player)
        end
    end
 	UIHelper.showToast("^00FF00yes")
	GUIGMControlPanel:hide()
end

function GMHelper:JustClick()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 30.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 200000000000000000000000000000000000)
end

function GMHelper:JustClick2()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 300.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 200000000000000000000000000000000000)
end

function GMHelper:OffChat()
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
end

function GMHelper:OnChat()
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
end

function GMHelper:Noclip()
   A = not A
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Noclip = true")
     return
   end
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Noclip = false")
end

function GMHelper:NoclipOP()
   A = not A
    for blockId = 3, 133 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00TreasureHunterNoClip = Enabled")
     return
   end
    for blockId = 3, 133 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000TreasureHunterNoClip = Disabled")
end


function GMHelper:NoObsidian1()
   A = not A
    for blockId = 49, 50 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 49, 50 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoOakPlanks1()
   A = not A
    for blockId = 5, 6 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 5, 6 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoGlass1()
   A = not A
    for blockId = 94, 95 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 94, 95 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoEndStone1()
   A = not A
    for blockId = 120, 121 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 120, 121 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoWool1()
   A = not A
    for blockId = 1441, 1444 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 1441, 1444 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoBomb1()
   A = not A
    for blockId = 593, 594 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 593, 594 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoIDoor1()
   A = not A
    for blockId = 241, 242 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 241, 242 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end

function GMHelper:NoQuartz1()
   A = not A
    for blockId = 155, 156 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 155, 156 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^FF0000Disabled")
end


--[[function GMHelper:test2222()
    A = not A
    LuaTimer:scheduleTimerWithEnd(function()
    PlayerManager:getClientPlayer().Player:setGlide(true)
	end, 0.2, 900000000000000000000000)
   if A then
    LuaTimer:scheduleTimerWithEnd(function()
    PlayerManager:getClientPlayer().Player:setGlide(false)
	end, 0.2, 1)
end
end]]

function GMHelper:JumpHeight()
   GMHelper:openInput({ "" }, function(Number)
    local player = PlayerManager:getClientPlayer()
    if player and player.Player then
    player.Player:setFloatProperty("JumpHeight", Number)
	UIHelper.showToast("^00FF00Success")
end
end)
end

function GMHelper:addCurrencyCustom(player)
    GMHelper:openInput(player, { "100" }, function(currency)
        currency = tonumber(currency) or 0
        player:addCurrency(currency, "GM")
    end)
end

function GMHelper:GUIOpener()
   GMHelper:openInput({ ".json" }, function(Number)
   GUIManager:showWindowByName(Number)
   end)
end

function GMHelper:GUIViewOFF()
   GMHelper:openInput({ ".json" }, function(Number)
   GUIManager:hideWindowByName(Number)
   end)
end

function GMHelper:InsideGUI()
   GMHelper:openInput({ "", "" }, function(Number, Exe)
        GUIManager:getWindowByName(Number):SetVisible(Exe)
   end)
end

function GMHelper:ChangeNick()
   GMHelper:openInput({ "" }, function(Nick)
    PlayerManager:getClientPlayer().Player:setShowName(Nick)
    UIHelper.showToast("^FF00EENickNameChanged")
   end)
end

function GMHelper:LongJump()
    LuaTimer:scheduleTimer(function()
    PlayerManager:getClientPlayer().Player:setGlide(true)
	end, 0.2, 900000000000000000000000)
end

function GMHelper:AdvancedUp()
   GMHelper:openInput({ "" }, function(Num)
        local moveDir = VectorUtil.newVector3(0.0, Num, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:AdvancedIn()
   GMHelper:openInput({ "" }, function(Num)
        local moveDir = VectorUtil.newVector3(Num, 0.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:AdvancedOn()
   GMHelper:openInput({ "" }, function(Num)
        local moveDir = VectorUtil.newVector3(0.0, 0.0, Num)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:AdvancedDirect()
   GMHelper:openInput({ "", "", "" }, function(Num, Num2, Num3)
        local moveDir = VectorUtil.newVector3(Num, Num2, Num3)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:tpPos()
   GMHelper:openInput({ "", "", "" }, function(Num, Num2, Num3)
    local playerPos = VectorUtil.newVector3(Num, Num2, Num3)
    local moveDir = VectorUtil.newVector3(1.0, 10.0, 1.0)
    PlayerManager:getClientPlayer().Player:setPosition(playerPos)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end) 
end

function GMHelper:HideHoldItem()
   A = not A
    PlayerManager:getClientPlayer():setHideHoldItem(true)
    UIHelper.showToast("^FF00EETrue")
	if A then
	PlayerManager:getClientPlayer():setHideHoldItem(false)
    UIHelper.showToast("^FF00EEFalse")
end
end

function GMHelper:DevFlyI()
    local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
    UIHelper.showToast("^FF00EESuccess")
end

function GMHelper:SharpFly()
    A = not A
    ClientHelper.putBoolPrefs("DisableInertialFly", true)
    UIHelper.showToast("^FF00EE[ON] works when you have dev flight enabled")
	if A then
	ClientHelper.putBoolPrefs("DisableInertialFly", false)
    UIHelper.showToast("^FF00EE[OFF] works when you have dev flight enabled")
end
end

function GMHelper:WaterPush()
    A = not A
    local entity = PlayerManager:getClientPlayer().Player
    entity:setBoolProperty("ignoreWaterPush", true)
    UIHelper.showToast("^FF00EEON")
	if A then
    entity:setBoolProperty("ignoreWaterPush", false)
    UIHelper.showToast("^FF00EEOFF")
end
end

function GMHelper:changeScale()
   GMHelper:openInput({ "" }, function(Scale)
    local entity = PlayerManager:getClientPlayer().Player
    entity:setScale(Scale)
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:BlockOFF()
   GMHelper:openInput({ "" }, function(Numer)
   local blockId = Numer
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
  end)
end

function GMHelper:BlockON()
   GMHelper:openInput({ "" }, function(Numer)
   local blockId = Numer
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
  end)
end

function GMHelper:SpeedManager()
  GMHelper:openInput({ "" }, function(Number)
  PlayerManager:getClientPlayer().Player:setSpeedAdditionLevel(Number)
	UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:SpeedUp()
    ClientHelper.putIntPrefs("SpeedAddMax", 20000000)
	UIHelper.showToast("^FF0000[DANGER]")
end

function GMHelper:XRayManagerON()
   GMHelper:openInput({ "erase this text and write block id" }, function(Numer)
    cBlockManager.cGetBlockById(Numer):setNeedRender(false)
	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:XRayManagerOFF()
   GMHelper:openInput({ "erase this text and write block id" }, function(Numer)
    cBlockManager.cGetBlockById(Numer):setNeedRender(true)
	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:OFFDARK()
    ---设置轨道不渲染
    cBlockManager.cGetBlockById(66):setNeedRender(false)
    cBlockManager.cGetBlockById(253):setNeedRender(false)
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
            block:setLightValue(150, 150, 150)
	UIHelper.showToast("^00FF00Success")
	GUIGMControlPanel:hide()
    end
	    end
end

function GMHelper:SpawnNPC()
   GMHelper:openInput({ ".actor" }, function(actor)
    local pos = PlayerManager:getClientPlayer():getPosition()  
    local yaw = PlayerManager:getClientPlayer():getYaw()  
    EngineWorld:addActorNpc(pos, yaw, actor, function(entity)
end)
end)
end

function GMHelper:spawnCar()
   GMHelper:openInput({ "Car ID (erase this text and write carID)" }, function(ID)
  local pos = PlayerManager:getClientPlayer():getPosition() 
  Blockman.Instance():getWorld():addVehicle(pos, ID, 5)
	UIHelper.showToast("^00FFEECar Spawn Success")
end)
end

function GMHelper:TeleportByUID()
   GMHelper:openInput({ "id player" }, function(ID)
  local player = PlayerManager:getClientPlayer().Player
    local Dplayer = PlayerManager:getPlayerByUserId(ID)
    if Dplayer then
        player:setPosition(Dplayer:getPosition())
    end
end)
end

function GMHelper:ChangeActorForMe()
  local entity = PlayerManager:getClientPlayer().Player
  GMHelper:openInput({ ".actor" }, function(actor)
  Blockman.Instance():getWorld():changePlayerActor(entity, actor)
  Blockman.Instance():getWorld():changePlayerActor(entity, actor)
  entity.m_isPeopleActor = false
  EngineWorld:restorePlayerActor(entity)
  UIHelper.showToast("^00FFEESuccess")
end)
end

function GMHelper:AFKmode()
   A = not A
    PlayerManager:getClientPlayer().Player.m_rotateSpeed = 1
    UIHelper.showToast("^FF00EEStart")
	if A then
	PlayerManager:getClientPlayer().Player.m_rotateSpeed = 0
    UIHelper.showToast("^FF00EEStop")
end
end

function GMHelper:DevnoClip()
   A = not A
    PlayerManager:getClientPlayer().Player.noClip = true
    UIHelper.showToast("^FF00EETurned on")
   if A then
    PlayerManager:getClientPlayer().Player.noClip = false
    UIHelper.showToast("^FF00EETurned off")
end
end

function GMHelper:StepHeight()
   GMHelper:openInput({ "StepHeight Value" }, function(data)
    PlayerManager:getClientPlayer().Player.stepHeight = data
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:SpYaw()
   A = not A
    PlayerManager:getClientPlayer().Player.spYaw = true
    UIHelper.showToast("^FF00EEON")
  if A then
    PlayerManager:getClientPlayer().Player.spYaw = false
    UIHelper.showToast("^FF00EEOFF")    
end
end

function GMHelper:SpYawSet()
   GMHelper:openInput({ "" }, function(data)
    PlayerManager:getClientPlayer().Player.spYawRadian = data
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:HairSet()
   GMHelper:openInput({ "" }, function(Data)
    PlayerManager:getClientPlayer().Player.m_isEquipWing = true
    PlayerManager:getClientPlayer().Player.m_isClothesChange = true
    PlayerManager:getClientPlayer().Player.m_isClothesChanged = true
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:SetHideAndShowArmor()
   A = not A
   LogicSetting.Instance():setHideArmor(true)
    UIHelper.showToast("^FF00EEON")
  if A then
   LogicSetting.Instance():setHideArmor(false)
    UIHelper.showToast("^FF00EEOFF")
end
end

--  LogicSetting.Instance():setHideArmor(true)

    --entity.m_rotateSpeed = 0

function GMHelper:SettingLongjump()
   GMHelper:openInput({ "speedglide", "drop resistance" }, function(Num1, Num2)
  local player = PlayerManager:getClientPlayer().Player
    player.m_isGlide = true
      player.m_glideMoveAddition = Num1
          player.m_glideDropResistance = Num2
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:SetAlpha()
     GMHelper:openInput({ "Gui name", "alpha" }, function(GUI, Number)
  GUIManager:getWindowByName(GUI):SetAlpha(Number)
  UIHelper.showToast("^FF00EESuccess")
end)
end
--Region Clothes -- Start
function GMHelper:ChangeHair()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_hairID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeFace()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_faceID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeTops()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_topsID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangePants()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_pantsID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeShoes()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_shoesID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeGlasses()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_glassesId = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeScarf()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_scarfId = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeWing()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_wingId = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeHat()
  GMHelper:openInput({ "number" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_hatId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeDecHat()
  GMHelper:openInput({ "number" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_decorate_hatId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end


function GMHelper:ChangeTail()
  GMHelper:openInput({ "number" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_tailId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end


function GMHelper:ChangeBagI()
  GMHelper:openInput({ "number" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_bagId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end


function GMHelper:ChangeCrown()
  GMHelper:openInput({ "" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_crownId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:CreateGUIDEArrow()
  local sss = PlayerManager:getClientPlayer():getPosition() 
  PlayerManager:getClientPlayer().Player:addGuideArrow(sss)
  UIHelper.showToast("^FF00EESuccess")
end


function GMHelper:DelAllGUIDEArrow()
  PlayerManager:getClientPlayer().Player:deleteAllGuideArrow()
  UIHelper.showToast("^FF00EESuccess")
end


function GMHelper:JetPack()
  A = not A
  PlayerManager:getClientPlayer().Player.m_keepJumping = false
  UIHelper.showToast("^FF00EEВключено")
  if A then
  PlayerManager:getClientPlayer().Player.m_keepJumping = true
  UIHelper.showToast("^FF00EEВыключено")
end
end


function GMHelper:SetUpBuild()
  GMHelper:openInput({ "" }, function(Savesta)
  ClientHelper.putIntPrefs("QuicklyBuildBlockNum", Savesta)
  UIHelper.showToast("^FF00EESuccess")
end)
end


function GMHelper:EasyWay()
    local inv = PlayerManager:getClientPlayer():getInventory()
    inv:removeAllItemFromHotBar()
    UIHelper.showToast("^FF00EESuccess")
end


function GMHelper:WatchMode()
  A = not A
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  PlayerManager:getClientPlayer().Player:setAllowFlying(true)
  PlayerManager:getClientPlayer().Player:setFlying(true)
  PlayerManager:getClientPlayer().Player:setWatchMode(true)
  PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  UIHelper.showToast("^FF00EEON")
  if A then
  PlayerManager:getClientPlayer().Player:setAllowFlying(false)
  PlayerManager:getClientPlayer().Player:setFlying(false)
  PlayerManager:getClientPlayer().Player:setWatchMode(false)
  UIHelper.showToast("^FF00EEOFF")
end
end

--End Region Clothes -- End
--Region INFO --
function GMHelper:ShowRegion()
    UIHelper.showToast("RegionID=" .. Game:getRegionId())
end

function GMHelper:GameID()
    UIHelper.showToast("GameID=" .. CGame.Instance():getGameType())
end

function GMHelper:LogInfo()
  local content = HostApi.getClientInfo()
  ClientHelper.onSetClipboard(content)
  UIHelper.showToast("^FF00EESuccess")
end

function GMHelper:GetAllInfoT()
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
    MsgSender.sendMsg("^FF0000INFO: " .. string.format("^FF0000UserName: %s {} ID: %s {} Gender: %s", player:getName(), player.userId, player.Player:getSex()))
end
end

function GMHelper:test2300()
   GMHelper:openInput({ "" }, function(Num1)
  local player = PlayerManager:getClientPlayer().Player
    player.length = Num1
		player.isCollidedHorizontally = true
    player.isCollidedVertically = true
    player.isCollided = true
end)
end

--233-2=215
--addChatMessage
function GMHelper:test1222()
  local player = PlayerManager:getClientPlayer().Player
		player.m_canBuildBlockQuickly = true
		player.m_quicklyBuildBlock = true
  	UIHelper.showToast("2:")
end
--x364 z240
-- REGION TEST --
function GMHelper:test2222()
  local player = PlayerManager:getClientPlayer().Player
    player.m_opacity = 0.2
  	UIHelper.showToast("1:")
end

function GMHelper:spawnCar()
   GMHelper:openInput({ "Car ID (erase this text and write carID)" }, function(ID)
  local pos = PlayerManager:getClientPlayer():getPosition() 
  local yaw = PlayerManager:getClientPlayer():getYaw() 
  Blockman.Instance():getWorld():addVehicle(pos, ID, yaw)
	UIHelper.showToast("^FF00EECar Spawn Success")
end)
end

function GMHelper:SpawnItem()
       GMHelper:openInput({ "ID", "Count" }, function(Id, Count)
  local position = PlayerManager:getClientPlayer():getPosition() 
  EngineWorld:addEntityItem(Id, Count, 0, 600, position, VectorUtil.ZERO)
end)
end

--1.1

function GMHelper:CheckUpdates()
SoundUtil.playSound(1)
    local txt = "To find out if a new panel update has been released, follow the link below. \nhttps://pastebin.com/raw/k3PUuEqp\nThe link will change with each update!"
    local btn = "OK"
    local scra = "https://pastebin.com/raw/k3PUuEqp"
    local scr = "The link has been copied to the clipboard!"

    CustomDialog.builder()
        .setContentText(txt)
        .setRightText(btn)
        .setHideLeftButton()
        .setRightClickListener(function()
            ClientHelper.onSetClipboard(scra)
            UIHelper.showCenterToast(scr, 5000)
        end)
        .setLeftClickListener(function()
            UIHelper.showToast(scrm)
        end)
        .show()
    GUIGMControlPanel:hide()
end

function GMHelper:CrashFix()
local txt = "If you don't understand how to run 'bypass.lua' correctly, then read this short guide.(\n1)Launch the GameGuardian, then enter the Bedwars.\n2)As soon as you enter, select the Bedwars process and run the 'bypass.lua' script, then select the Bedwars(BlockmanGo) process and run the script again.\n3)If the gameguard writes that the game or process has been completed, i.e. closed, then you select two processes again and run the script.\n4)After exiting the mode, immediately select these two processes again and run the script(GameGuardian will tell you that they have been closed)."
    local btn = "OK"
    local title = "How to fix crashes."
    CustomDialog.builder()
                .setContentText(txt)
                .setRightText(btn)
                .setTitleText(title)
                .setHideLeftButton()                
                .setPanelSize(1200, 450)
                .show()
                GUIGMControlPanel:hide()
end

function GMHelper:EnteringValues()
local txt = "If you're having trouble typing a value in a function and clicking the send button, and you're just wrapping it to another line, then use a different keyboard, such as from Microsoft\n(For example, you have selected the function to change wings, written a number, but you do not send a command)"
    local btn = "OK"
    local title = "Fix Entering Values"
    CustomDialog.builder()
                .setContentText(txt)
                .setRightText(btn)
                .setTitleText(title)
                .setHideLeftButton()                
                .setPanelSize(600, 450)
                .show()
                GUIGMControlPanel:hide()
end

function GMHelper:updates1_1()
local txt = "Version 1.1 added:\nSetUpBuild, ChangeHat, ChangeTail, ChangeBagI, ChangeCrown, CreateGUIDEArrow, DelAllGUIDEArrow, EasyWay, WatchMode, Blink, NoFall, TreasureReset, QuickPlaceBlock, Parachute, FlyParachute and the 'README' category.\nI'll explain some of the functions (the rest are already clear)\nSetUpBuild - function lets you put down multiple blocks at once in a certain direction. You can choose how many blocks to place and the direction they'll go.\nCreateGUIDEArrow - creates an arrow underneath you, can be used as a marker.\nWatchMode - puts you in spectator mode.\nBlink - When you activate this feature, the character will remain where you activated the function, after which you can run anywhere and deal damage to everyone (you will not be visible).\nTreasureRest - Restore the mine in the TreasureHunter.\nFlyParachute - Gives you a fly and a parachute that is visible to all players (i.e. not visual)"
    local btn = "OK"
    local title = "What's New? (1.1)"
    CustomDialog.builder()
                .setContentText(txt)
                .setRightText(btn)
                .setTitleText(title)
                .setHideLeftButton()                
                .setPanelSize(1200, 450)
                .show()
                GUIGMControlPanel:hide()
end

function GMHelper:updates1_2()
local txt = "Version 1.2 added:\nRvanka, Tracer, ChangeBlockTextures, ArrowSpeedBow, Scaffold.\nI'll explain some of the functions (the rest are already clear)\nRvanka - teleports you to the nearest players, thereby you can kill them very quickly (use together with blink)\nTracer - When turned on, arrows will be attached to all players, thereby you will know where the players are(ESP)\nScaffold - visual blocks will be automatically placed under you."
    local btn = "OK"
    local title = "What's New? (1.2)"
    CustomDialog.builder()
                .setContentText(txt)
                .setRightText(btn)
                .setTitleText(title)
                .setHideLeftButton()                
                .setPanelSize(1200, 450)
                .show()
                GUIGMControlPanel:hide()
end

function GMHelper:BlinkOP()
   A = not A
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", false)
   if A then
	UIHelper.showToast("^00FF00Blink Enabled!")
     return
   end
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", true)
	UIHelper.showToast("^FF0000Blink Disabled!")
end

function GMHelper:NoFall() -- NoFall
A = not A
ClientHelper.putIntPrefs("SprintLimitCheck", 7)
if A then
UIHelper.showToast("Enabled")
return
end
ClientHelper.putIntPrefs("SprintLimitCheck", 0)
UIHelper.showToast("Disabled")
end

function GMHelper:NoFallSet()
   GMHelper:openInput({ "TypeValue" }, function(Number)
        ClientHelper.putIntPrefs("SprintLimitCheck", Number)
        UIHelper.showToast("Done, now it will have like a protection")
   end)
end

function GMHelper:MineReset()
local playerPos = VectorUtil.newVector3(536, 2.78, -136)
local moveDir = VectorUtil.newVector3(0.0, 0.0, 0.0)
PlayerManager:getClientPlayer().Player:setPosition(playerPos)
PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end

function GMHelper:quickblock()
  GMHelper:openInput({ "" }, function(Number)
  ClientHelper.putIntPrefs("QuicklyBuildBlockNum",Number)
	UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:startParachute()
  PlayerManager:getClientPlayer().Player:startParachute()
end

function GMHelper:FlyParachute()
local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
     PlayerManager:getClientPlayer().Player:startParachute()
    UIHelper.showToast("^FF00EESuccess")
    end

function GMHelper:SetBlockToAir()
       GMHelper:openInput({ "block Position X", "block Position Y", "block Position Z" }, function(X, Y, Z)
        local blockPos = VectorUtil.newVector3(X, Y, Z)
    EngineWorld:setBlockToAir(blockPos)
end)
end

function GMHelper:SpawnBlock()
       GMHelper:openInput({ "" }, function(martin)
    local blockPos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(blockPos, martin)
end)
end

--1.2
function GMHelper:ChangeBlockTextures(texturePath)
    local isChange = GMHelper.blockTextures or false
    if not isChange then
        Blockman.Instance():changeBlockTextures("./package_02_32.zip")
        GMHelper.blockTextures = true
    else
        Blockman.Instance():changeBlockTextures("")
        GMHelper.blockTextures = false
    end
    if #texturePath > 0 then
        Blockman.Instance():changeBlockTextures("Media/Textures/package/" .. texturePath)
    else
        Blockman.Instance():changeBlockTextures("")
    end
    GUIGMControlPanel:hide()
end

function GMHelper:updateBedWarArrowSpeed()
    GMHelper:openInput({ "speed" }, function(data)
        local scale = tonumber(data) or 0

        PlayerManager:getClientPlayer().Player:setFloatProperty("ArrowSpeedScale", scale)

        PlayerManager:getClientPlayer():sendPacket({
            pid = "updateBedWarArrowSpeed",
            scale = scale,
        })
    end)
end

function GMHelper:Rvanka()
    toggle = not toggle -- Переключаем значение переменной toggle
    key = nil
    gay = nil
    if toggle then -- Если toggle равно true
        UIHelper.showToast("^FF00EE[ON] by clad_men") -- Выводим сообщение о включении
        key = LuaTimer:scheduleTimer(function()
            -- Все действия внутри этой функции будут выполняться по временному расписанию
            local player = _G["PlayerManager"]:getClientPlayer().Player -- Получаем объект текущего игрока клиента
            local players = _G["PlayerManager"]:getPlayers() -- Получаем список всех игроков
            
            -- Проходим по списку игроков
            for _, c_player in pairs(players) do
                local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition()) -- Вычисляем расстояние между игроками
                if c_player ~= player then -- Если текущий игрок не равен игроку клиента
                    gay = _G["LuaTimer"]:scheduleTimer(function()
                        -- Все действия внутри этой функции будут выполняться по временному расписанию
                        local newPosition = VectorUtil.newVector3(c_player:getPosition().x, c_player:getPosition().y + (tonumber(tostring(787-_G["dumb"]),2)), c_player:getPosition().z) -- Создаем новую позицию для игрока клиента
                        player:setPosition(newPosition) -- Устанавливаем новую позицию для игрока клиента
                    end, (tonumber(tostring(1787-_G["dumb"]),2)), (tonumber(tostring(1111101777-_G["dumb"]),2))) -- Ожидаем определенное время перед выполнением действий
                end
            end
        end, (tonumber(tostring(1111101778-_G["dumb"]),2)), -(tonumber(tostring(778-_G["dumb"]),2))) -- Ожидаем определенное время перед выполнением действий
    else
        UIHelper.showToast("^FF00EE[OFF] by clad_men") -- Выводим сообщение об отключении
        LuaTimer:cancel(key) -- Отменяем выполнение функции по временному расписанию
        LuaTimer:cancel(gay) -- Отменяем выполнение функции по временному расписанию
    end
end


function GMHelper:Tracer()
    UIHelper.showToast("^FF00EE [ON]")
    local me = PlayerManager:getClientPlayer()
    LuaTimer:scheduleTimer(function()
        PlayerManager:getClientPlayer().Player:deleteAllGuideArrow()
        local others = PlayerManager:getPlayers()
        for _, c_player in pairs(others) do
            if c_player ~= me then
                PlayerManager:getClientPlayer().Player:addGuideArrow(c_player:getPosition())
            end
        end
    end, 500, -1)
end

function GMHelper:Scaffold()
--helped tarelka089
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00Scaffold TurnOFF")
    if A then
    GMHelper:openInput({"BlockID"}, function(block)
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z - 1), block)
    end, 0.15, -1)
    UIHelper.showToast("^00FF00Scaffold TurnON")
    end)
    end
    end
    
function GMHelper:AutoClick()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00AutoClick OFF")
    if A then
        self.timer = LuaTimer:scheduleTimer(function()
            CGame.Instance():handleTouchClick(800, 360)
            UIHelper.showToast("^00FF00AutoClick ON")
        end, 0.15, -1)
    end
end

function GMHelper:AutoParachute()
--wafex
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00AutoParachute OFF")
    if A then
        self.timer = LuaTimer:scheduleTimer(function()
            PlayerManager:getClientPlayer().Player:startParachute()
            UIHelper.showToast("^00FF00AutoParachute ON")
        end, 0.15, -1)
    end
end

function GMHelper:AFKmode()
   GMHelper:openInput({ "TypeValue" }, function(Number)
    PlayerManager:getClientPlayer().Player.m_rotateSpeed = Number
    UIHelper.showToast("^FF00EEStart")
   end)
end

function GMHelper:Parachute()
GUIManager:getWindowByName("Main-Parachute"):SetVisible(true)
    GUIManager:getWindowByName("Main-Parachute", GUIType.Button):registerEvent(GUIEvent.ButtonClick, function()
        PlayerManager:getClientPlayer().Player:startParachute()
        UIHelper.showToast("Deploy a parachute successfully.")
    end)
end

function GMHelper:TeleportToRandomPlayer()
--wafex
    local player = PlayerManager:getClientPlayer().Player
    local players = PlayerManager:getPlayers()
    
    if #players > 1 then
        local randomIndex = math.random(1, #players) -- Генерируем случайный индекс для выбора случайного игрока
        local randomPlayer = players[randomIndex] -- Получаем случайного игрока по индексу
        
        player:setPosition(randomPlayer:getPosition())
        UIHelper.showToast("^00FF00Teleported to Random Player")
    else
        UIHelper.showToast("^FF0000No other players found")
    end
end

function GMHelper:AutoClickNearest()
--wafex
    toggle = not toggle
    key = nil
    gay = nil
    if toggle then
        key = LuaTimer:scheduleTimer(function()
            local player = _G["PlayerManager"]:getClientPlayer().Player
            local players = _G["PlayerManager"]:getPlayers()
            local nearestDistance = math.huge
            local nearestPlayer = nil
            
            -- Проходим по списку игроков
            for _, c_player in pairs(players) do
                local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition())
                if c_player ~= player and distance < nearestDistance then
                    nearestDistance = distance
                    nearestPlayer = c_player
                end
            end
            
            if nearestPlayer then -- Если найден ближайший игрок
                gay = _G["LuaTimer"]:scheduleTimer(function()
                    local newPosition = VectorUtil.newVector3(nearestPlayer:getPosition().x, nearestPlayer:getPosition().y + (tonumber(tostring(787-_G["dumb"]),2)), nearestPlayer:getPosition().z) -- Создаем новую позицию для игрока клиента
                    CGame.Instance():handleTouchClick(VectorUtil.newVector3(nearestPlayer:getPosition().x, nearestPlayer:getPosition().y + (tonumber(tostring(787-_G["dumb"]),2))))
                end, (tonumber(tostring(1787-_G["dumb"]),2)), (tonumber(tostring(1111101777-_G["dumb"]),2)))
            end
        end, (tonumber(tostring(1111101778-_G["dumb"]),2)), -(tonumber(tostring(778-_G["dumb"]),2)))
    else
        LuaTimer:cancel(key)
        LuaTimer:cancel(gay)
    end
end

function GMHelper:AutoMoveToNearestPlayer()
--wafex
    LuaTimer:scheduleTimer(function()
        toggle = not toggle
        if toggle then
            local player = _G["PlayerManager"]:getClientPlayer().Player
            local players = _G["PlayerManager"]:getPlayers()
            local nearestDistance = math.huge
            local nearestPlayer = nil
            
            -- Проходим по списку игроков
            for _, c_player in pairs(players) do
                local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition())
                if c_player ~= player and distance < nearestDistance then
                    nearestDistance = distance
                    nearestPlayer = c_player
                end
            end
            
            if nearestPlayer then -- Если найден ближайший игрок
                local newPosition = VectorUtil.newVector3(nearestPlayer:getPosition().x, nearestPlayer:getPosition().y, nearestPlayer:getPosition().z)
                player:setPosition(newPosition)
            end
        end
    end, 50, -1)
end

function GMHelper:RotateHeadTowardsNearestPlayer()
--wafex
    LuaTimer:scheduleTimer(function()
    -- Получаем текущего игрока клиента
    local player = PlayerManager:getClientPlayer().Player
    
    -- Получаем список всех игроков
    local players = PlayerManager:getPlayers()
    
    -- Находим ближайшего игрока
    local nearestDistance = math.huge
    local nearestPlayer = nil
    
    for _, c_player in pairs(players) do
        local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition())
        if c_player ~= player and distance < nearestDistance then
            nearestDistance = distance
            nearestPlayer = c_player
        end
    end
    
    if nearestPlayer then
        local targetPosition = nearestPlayer:getPosition()
        local targetDir = VectorUtil.newVector3(targetPosition.x - player:getPosition().x, targetPosition.y - player:getPosition().y, 0)
        local targetAngle = math.atan2(targetDir.y, targetDir.x) * (180 / math.pi)
        PlayerManager:getClientPlayer().Player.rotationYaw = targetAngle
    end
    end, 500, -1)
end

function GMHelper:SwitchPerson(person)
    Blockman.Instance():setPersonView(person)
    GUIGMControlPanel:hide()
end

function GMHelper:AllPlayerLocations()
--wafex
    LuaTimer:scheduleTimer(function()
        local players = PlayerManager:getPlayers()

        for _, player in pairs(players) do
            local pos = player:getPosition()
            local locationString1 = string.format("▢FFFFA500[▢FFFFFFFF %s / X = ▢FFFFA500%.2f▢FFFFFFFF / Y = ▢FFFFA500%.2f▢FFFFFFFF / Z = ▢FFFFA500%.2f▢FFFFFFFF ▢FFFFA500]▢FFFFFFFF", player.name, pos.x, pos.y, pos.z)
            MsgSender.sendTopTips(100000, locationString1)
        end
    end, 500, -1)
end

function GMHelper:MyLocation()
--wafex
    LuaTimer:scheduleTimer(function()
        local me = PlayerManager:getClientPlayer()
        if me then
            local myPos = me.Player:getPosition()
            local locationString2 = string.format("X = ▢FFFFA500%.2f▢FFFFFFFF / Y = ▢FFFFA500%.2f▢FFFFFFFF / Z = ▢FFFFA500%.2f▢FFFFFFFF", myPos.x, myPos.y, myPos.z)
            UIHelper.showToast(locationString2)
        end
    end, 500, -1)
end

function GMHelper:AutoSpawnNPC()
--wafex
    GMHelper:openInput({ "TypeValue" }, function(actor)
        LuaTimer:scheduleTimer(function()
            local me = PlayerManager:getClientPlayer()
            local myPos = me.Player:getPosition()
            local players = PlayerManager:getPlayers()

            for _, player in pairs(players) do
                if player ~= me then
                    local playerPos = player:getPosition()
                    local distance = MathUtil:distanceSquare2d(playerPos, myPos)
                    if distance < 35 then -- Укажите желаемое расстояние спауна NPC
                        EngineWorld:addActorNpc(playerPos, 0, actor, function(entity)
                        end)
                    end
                end
            end
        end, 100, -1)
    end)
end

function GMHelper:AdjustSpeedBasedOnDistance()
--wafex
    LuaTimer:scheduleTimer(function()
        local me = PlayerManager:getClientPlayer()
        local myPos = me.Player:getPosition()
        local players = PlayerManager:getPlayers()

        local closestDistance = math.huge
        local closestPlayer = nil

        -- Находим ближайшего игрока
        for _, player in pairs(players) do
            if player ~= me then
                local playerPos = player:getPosition()
                local distance = MathUtil:distanceSquare2d(playerPos, myPos)
                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = player
                end
            end
        end
        if closestPlayer ~= nil then
            if closestDistance < 10 then
                me.Player:setSpeedAdditionLevel(1)
            else
                me.Player:setSpeedAdditionLevel(100000)
            end
        end
    end, 500, -1)
end

function GMHelper:SpawnCube()
--wafex
    LuaTimer:scheduleTimer(function()
        local pos = PlayerManager:getClientPlayer():getPosition()
        local startX = pos.x - 1
        local startY = pos.y - 1
        local startZ = pos.z - 1

        for x = 0, 2 do
            for y = 0, 2 do
                for z = 0, 2 do
                    local blockPos = VectorUtil.newVector3(startX - x, startY + y, startZ + z)
                    EngineWorld:setBlock(blockPos, 3)
                end
            end
        end
    end, 100, -1)
end

function GMHelper:SpawnSphere()
--wafex
    LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition()
    local radius = 2 -- Радиус сферы

    for x = -radius, radius do
        for y = -radius, radius do
            for z = -radius, radius do
                local distance = math.sqrt(x * x + y * y + z * z)
                if distance <= radius then
                    local blockPos = VectorUtil.newVector3(pos.x - x, pos.y - y, pos.z - z)
                    EngineWorld:setBlock(blockPos, 3)
                end
            end
        end
    end
    end, 100, -1)
end

function GMHelper:SpawnPyramid()
--wafex
    LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition()
    local size = 3 -- Размер пирамиды (3x3 или 4x4)

    for y = 0, size-1 do
        for x = -y, y do
            for z = -y, y do
                local blockPos = VectorUtil.newVector3(pos.x + x, pos.y + (size-1) - y, pos.z + z)
                EngineWorld:setBlock(blockPos, 3)
            end
        end
    end
    end, 100, -1)
end

function GMHelper:SpawnRhombus()
--wafex
    LuaTimer:scheduleTimer(function()
        local pos = PlayerManager:getClientPlayer():getPosition()
        local size = 3 -- Размер ромба (базовый треугольник 3x3 или 4x4)

        -- Первый треугольник
        for y = 0, size-1 do
            for x = -y, y do
                for z = -y, y do
                    local blockPos = VectorUtil.newVector3(pos.x + x, pos.y + (size-1) - y, pos.z + z)
                    EngineWorld:setBlock(blockPos, 3)
                end
            end
        end

        -- Второй треугольник
        for y = 1, size-1 do
            for x = -y+1, y-1 do
                for z = -y+1, y-1 do
                    local blockPos = VectorUtil.newVector3(pos.x + x, pos.y + (size-1) + y, pos.z + z)
                    EngineWorld:setBlock(blockPos, 3)
                end
            end
        end
    end, 100, -1)
end

function GMHelper:ShowST()
   local blockId = 3
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
end

function GMHelper:HideST()
   local blockId = 3
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
end

function GMHelper:wafexTest()
GUIManager:getWindowByName("Main-Cannon"):SetVisible(true)
    GUIManager:getWindowByName("Main-Cannon", GUIType.Button):registerEvent(GUIEvent.ButtonClick, function()
    local x = 2
    local y = 3
    local z = 4
    local velocity = VectorUtil.newVector3(x, y, z)
    PlayerManager:getClientPlayer().Player:setVelocity(velocity)
    end)
end

function GMHelper:testHui()
    LuaTimer:scheduleTimer(function()
        local me = PlayerManager:getClientPlayer()
        if me then
            local myPos = me.Player:getPosition()
            local players = PlayerManager:getPlayers()

            local closestDistance = math.huge
            local closestPlayer = nil
            local nearestDistance = math.huge
            local nearestPlayer = nil

            -- Находим ближайшего игрока и игрока, находящегося на минимальном расстоянии
            for _, player in pairs(players) do
                if player ~= me then
                    local playerPos = player:getPosition()
                    local distance = MathUtil:distanceSquare2d(playerPos, myPos)
                    if distance < closestDistance then
                        closestDistance = distance
                        closestPlayer = player
                    end
                    if distance < nearestDistance then
                        nearestDistance = distance
                        nearestPlayer = player
                    end
                end
            end

            if closestPlayer ~= nil and closestDistance < 10 then -- Проверяем, что есть ближайший игрок и он находится на расстоянии менее 10 блоков
                local health = math.min(closestPlayer:getHealth(), 50.0) -- Получаем текущее здоровье и ограничиваем его до максимального значения 50.0
                local sexString = closestPlayer:getSex() == 1 and "▢FF00FFFF██▢FFFFFFFF" or "▢FFFF1B89██▢FFFFFFFF"
                local locationString = string.format("%s ¦ %.1f ▢FFFF0000♥️▢FFFFFFFF ¦ %s ¦ X: ▢FFFF0000%.2f▢FFFFFFFF / Y: ▢FFFF0000%.2f▢FFFFFFFF / Z: ▢FFFF0000%.2f▢FFFFFFFF", closestPlayer.name, health, sexString, closestPlayer:getPosition().x, closestPlayer:getPosition().y, closestPlayer:getPosition().z)
                UIHelper.showToast(locationString)
            end

            if nearestPlayer ~= nil then
                local distanceString = string.format("Ты находишься на расстоянии от ближайшего игрока на %.1f блоков", nearestDistance)
                MsgSender.sendCenterTips(1, string.format(" \nDistance: %.1f blocks\n \n\n%s", nearestDistance, closestPlayer.userId))
            end
        end
    end, 10, -1)
end

function GMHelper:TeleportAura()
    local teleportRadius = 3 -- Радиус телепортационной ауры

    local function teleportToPlayer(player)
        local playerPosition = player:getPosition()
        local teleportPosition = MathUtil:getRandomPointInCircle(playerPosition, teleportRadius)

        PlayerManager:getClientPlayer().Player:setPosition(teleportPosition)
    end

    local function findClosestPlayer()
        local player = PlayerManager:getClientPlayer().Player
        local players = PlayerManager:getPlayers()

        local closestDistance = math.huge
        local closestPlayer = nil

        -- Находим ближайшего игрока
        for _, c_player in pairs(players) do
            if c_player ~= player then
                local distance = MathUtil:distanceSquare2d(c_player:getPosition(), player:getPosition())
                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = c_player
                end
            end
        end

        return closestPlayer
    end
end

function GMHelper:AimBotw()
local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
targetPos = player:getPosition()
local function getPitchAndYaw(targetPos)
    local camera = SceneManager.Instance():getMainCamera()
    local pos = camera:getPosition()
    local vector = math.atan2(targetPos.x - pos.x, targetPos.z - pos.z)
    local yaw = vector / math.pi * -180

    local dir = VectorUtil.sub3(targetPos, pos)
    local pitch = MathUtil.GetVector3Angle(VectorUtil.newVector3(dir.x, 0, dir.z), dir)

    return yaw, pitch
end
PlayerManager:getClientPlayer().targetPos = targetPos
    local times = 50
    LuaTimer:cancel(self.cameraKey)
    PlayerManager:getClientPlayer().cameraKey = LuaTimer:scheduleTimer(function()
        local newYaw, newPitch = getPitchAndYaw(targetPos)
        local oldYaw = PlayerManager:getClientPlayer().Player.rotationYaw
        local oldPitch = PlayerManager:getClientPlayer().Player.rotationPitch
        while math.abs(oldYaw - newYaw) > 180 do
            if oldYaw > newYaw then
                newYaw = newYaw + 360
            else
                newYaw = newYaw - 360
            end
        end

        if times > 1 then
            PlayerManager:getClientPlayer().Player.rotationYaw = oldYaw + (newYaw - oldYaw) / times
            PlayerManager:getClientPlayer().Player.rotationPitch = oldPitch + (newPitch - oldPitch) / times
        else
            PlayerManager:getClientPlayer().Player.rotationYaw = newYaw
            PlayerManager:getClientPlayer().Player.rotationPitch = newPitch
        end
        times = times - 1
    end, 200, -1)
end
end

-- вызывайте функцию StartAimBotTimer() для начала автоматического запуска AimBot()
-- вызывайте функцию StopAimBotTimer() для остановки автоматического запуска AimBot()

function GMHelper:StartAimBotTimer()
    self.aimBotTimer = LuaTimer:scheduleTimer(function()
        self:AimBot()
    end, 1000, -1)
end

function GMHelper:StopAimBotTimer()
    if self.aimBotTimer then
        LuaTimer:cancel(self.aimBotTimer)
        self.aimBotTimer = nil
    end
end

function GMHelper:testZalupa()
end

function GMHelper:ShowHealthBar()
    LuaTimer:scheduleTimer(function()
        local players = PlayerManager:getPlayers()
        local healthColors = {
            ["0"] = "▢FFFF0000",   -- черный цвет для мертвого игрока
            ["5"] = "▢FFFF3300",   -- оранжевый цвет
            ["10"] = "▢FFFF6600",
            ["15"] = "▢FF66FF00",
            ["20"] = "▢FF00FF00",
            -- добавьте остальные цвета здесь
        }
        local maxPlayers = 20
        local healthBar = ""

        for i = 1, maxPlayers do
            local player = players[i]
            local color = healthColors["0"] -- устанавливаем черный цвет по умолчанию

            if player then
                local health = player:getHealth()

                for h = 20, 0, -5 do -- начинаем с 20 и уменьшаемся на 5
                    if health >= h then
                        color = healthColors[tostring(h)]
                        break
                    end
                end
            end

            healthBar = healthBar .. (color or healthColors["0"]) .. "♥️" -- используем оператор "или" для предотвращения ошибки, если переменная color равна nil
        end

        MsgSender.sendTopTips(1, healthBar)
    end, 10, -1)
end

function GMHelper:ChangeTargetAimBot()
    local players = PlayerManager:getPlayers()
    local targetIndex = 1 -- Индекс текущей цели
    local targetPos = nil -- Позиция текущей цели
    
    local function getPitchAndYaw(targetPos)
        local camera = SceneManager.Instance():getMainCamera()
        local pos = camera:getPosition()
        local vector = math.atan2(targetPos.x - pos.x, targetPos.z - pos.z)
        local yaw = vector / math.pi * -180
    
        local dir = VectorUtil.sub3(targetPos, pos)
        local pitch = MathUtil.GetVector3Angle(VectorUtil.newVector3(dir.x, 0, dir.z), dir)
    
        return yaw, pitch
    end
    
    local function changeTarget()
        targetIndex = targetIndex + 1
        if targetIndex > #players then
            targetIndex = 1
        end
        targetPos = players[targetIndex]:getPosition()
        PlayerManager:getClientPlayer().targetPos = targetPos
    end
    
    local times = 50
    LuaTimer:cancel(self.cameraKey)
    PlayerManager:getClientPlayer().cameraKey = LuaTimer:scheduleTimer(function()
        changeTarget() -- Меняем цель
        
        local newYaw, newPitch = getPitchAndYaw(targetPos)
        local oldYaw = PlayerManager:getClientPlayer().Player.rotationYaw
        local oldPitch = PlayerManager:getClientPlayer().Player.rotationPitch
        while math.abs(oldYaw - newYaw) > 180 do
            if oldYaw > newYaw then
                newYaw = newYaw + 360
            else
                newYaw = newYaw - 360
            end
        end
    
        if times > 1 then
            PlayerManager:getClientPlayer().Player.rotationYaw = oldYaw + (newYaw - oldYaw) / times
            PlayerManager:getClientPlayer().Player.rotationPitch = oldPitch + (newPitch - oldPitch) / times
        else
            PlayerManager:getClientPlayer().Player.rotationYaw = newYaw
            PlayerManager:getClientPlayer().Player.rotationPitch = newPitch
            changeTarget() -- Меняем цель после завершения движения к текущей цели
        end
        times = times - 1
    end, 200, -1)
end

function GMHelper:SetMaxFPS()
    GMHelper:openInput({""}, function(FPS)
        CGame.Instance():SetMaxFps(FPS)
    end)
end

function GMHelper:ChangePlayerSize()
    local me = PlayerManager:getClientPlayer() -- Получаем себя
    local players = PlayerManager:getPlayers() -- Получаем список всех игроков на сервере

    for _, player in pairs(players) do
        if player ~= me then -- Проверяем, что игрок не я
            player:setScale(5) -- Изменяем размер тела игрока
        end
    end
end

function GMHelper:wafexTest2()
    LuaTimer:scheduleTimer(function()
        local me = PlayerManager:getClientPlayer() -- Получаем себя
        local players = PlayerManager:getPlayers() -- Получаем список всех игроков на сервере

        for _, player in pairs(players) do
            if player ~= me then -- Проверяем, что игрок не я
                player.Player.m_rotateSpeed = 999 -- Устанавливаем скорость вращения
            end
        end
    end, 100, -1)
end

function GMHelper:RespawnTool()
    PacketSender:getSender():sendRebirth()
end

function GMHelper:testwafexlol()
    LuaTimer:scheduleTimer(function()
        local me = PlayerManager:getClientPlayer()
        if me then
            local myPos = me.Player:getPosition()
            local players = PlayerManager:getPlayers()

            local closestDistance = math.huge
            local closestPlayer = nil
            local nearestDistance = math.huge
            local nearestPlayer = nil

            -- Находим ближайшего игрока и игрока, находящегося на минимальном расстоянии
            for _, player in pairs(players) do
                if player ~= me then
                    local playerPos = player:getPosition()
                    local distance = MathUtil:distanceSquare2d(playerPos, myPos)
                    if distance < closestDistance then
                        closestDistance = distance
                        closestPlayer = player
                    end
                    if distance < nearestDistance then
                        nearestDistance = distance
                        nearestPlayer = player
                    end
                end
            end

            if closestPlayer ~= nil and closestDistance < 50 then -- Проверяем, что есть ближайший игрок и он находится на расстоянии менее 10 блоков
                local health = math.min(closestPlayer:getHealth(), 50.0) -- Получаем текущее здоровье и ограничиваем его до максимального значения 50.0
                local sexString = closestPlayer:getSex() == 1 and "▢FF00FFFF██▢FFFFFFFF" or "▢FFFF1B89██▢FFFFFFFF"
                local locationString = string.format("%s ¦ X: %.2f / Y: %.2f / Z: %.2f", closestPlayer.name, closestPlayer:getPosition().x, closestPlayer:getPosition().y, closestPlayer:getPosition().z)
                -- Выводим информацию о ближайшем игроке
                GUIManager:getWindowByName("Chat-Input-Box"):SetProperty("Text", locationString)
            end
        end
    end, 10, -1)
end

function GMHelper:FreezeUI()
    FreezeUIs = not FreezeUIs
        ClientHelper.putBoolPrefs("LockUIShowAndHide", true)
        UIHelper.showToast("LockUIShowAndHide = true")
    if FreezeUIs then
        ClientHelper.putBoolPrefs("LockUIShowAndHide", false)
        UIHelper.showToast("LockUIShowAndHide = false")
    end
end

function GMHelper:setVelocity()
    local x = 2
    local y = 3
    local z = 4
    local velocity = VectorUtil.newVector3(x, y, z)
    PlayerManager:getClientPlayer().Player:setVelocity(velocity)
end

function GMHelper:popkashlen()
    GMHelper:openInput({ "" }, function(wiadomosc)
        LuaTimer:scheduleTimer(function()
        GUIManager:getWindowByName("Chat-Input-Box"):SetProperty("Text", wiadomosc)
        end, 5, 1000000)
        end)
        UIHelper.showToast("SUCCESS")
end

function GMHelper:infiniteCountdownToChat()
    local count2 = 0
    local count = 0
    LuaTimer:scheduleTimer(function()
        count = count + 1
        count2 = count2 - 1
        GUIManager:getWindowByName("Chat-Input-Box"):SetProperty("Text", "  " .. count .. "  " .. count2 .. "  " .. count .. "  " .. count2 .. "  " .. count .. "  " .. count2)
    end, 10, -1)
end

function GMHelper:ChangeWeather()
   local curWorld = EngineWorld:getWorld()
      curWorld:setWorldWeather("rain")
      UIHelper.showToast("^00FF00Now Rain!")
end

function GMHelper:showRainbowText()
    local colors = {
        0xFFFF0000, -- Красный
        0xFFFF8000, -- Оранжевый
        0xFFFFFF00, -- Желтый
        0xFF00FF00, -- Зеленый
        0xFF00FFFF, -- Голубой
        0xFF0000FF, -- Синий
        0xFF8000FF  -- Фиолетовый
    }

    local currentIndex = 1
    local text = "Modification by Wafex (Version: 1.0)"
    local textLength = string.len(text)
    local rainbowText = {}

    -- Создаем массив цветов для каждой буквы в строке
    for i=1, textLength do
        rainbowText[i] = colors[currentIndex]
        currentIndex = currentIndex < #colors and currentIndex + 1 or 1
    end

    -- На каждый интервал таймера меняем цвета букв
    LuaTimer:scheduleTimer(function()
        local assembledText = ""
        for i=1, #rainbowText do
            assembledText = assembledText .. "▢" .. string.format("%X", rainbowText[i]) .. string.sub(text, i, i)
        end
        MsgSender.sendTopTips(1000000, assembledText, "Test")

        -- Сдвигаем цвета для следующего интервала
        local lastColor = table.remove(rainbowText, #rainbowText)
        table.insert(rainbowText, 1, lastColor)
    end, 100, -1)
end

function GMHelper:teleportAuraWafex()
    local teleportRadius = 2 -- Радиус телепортации (в блоках)
    local teleportOffset = VectorUtil.newVector3(2, 0, 2) -- Отступ от позиции ближайшего игрока (в блоках)

    local function getClosestPlayerPosition()
        local players = getAlivePlayers()
        local clientPlayerPosition = PlayerManager:getClientPlayer().Player:getPosition()
        local closestPlayerIndex = 1
        local closestDistance = math.huge

        for i, player in ipairs(players) do
            local playerPosition = player.Player:getPosition()
            local distance = VectorUtil.newVector3(clientPlayerPosition, playerPosition)

            if distance < closestDistance then
                closestDistance = distance
                closestPlayerIndex = i
            end
        end

        return players[closestPlayerIndex].Player:getPosition()
    end

    local function teleportInCircle()
        local currentPlayerPos = getClosestPlayerPosition()

        -- Создаем круговую телепорт ауру рядом с текущим игроком
        for angle = 0, math.pi * 2, 0.1 do
            local offsetX = math.cos(angle) * teleportRadius
            local offsetZ = math.sin(angle) * teleportRadius
            local teleportPos = VectorUtil.add3(currentPlayerPos, VectorUtil.newVector3(offsetX, 0, offsetZ))
            teleportPos = VectorUtil.add3(teleportPos, teleportOffset)

            PlayerManager:getClientPlayer().Player:setVelocity(teleportPos)
        end
    end
end

function GMHelper:TeleportOnClick()
  LuaTimer:scheduleTimer(function()
    local function handleTeleportClick()
        local targetPos = CGame.Instance():getMousePos()
        PlayerManager:getClientPlayer():setPosition(VectorUtil.newVector3(targetPos))
    end

    CGame.Instance().onMouseClick = handleTeleportClick
  end, 20, -1)
end

function GMHelper:showRainbowAnimation()
    local colors = {
        0xFFFF0000, -- Красный
        0xFFFF8000, -- Оранжевый
        0xFFFFFF00, -- Желтый
        0xFF00FF00, -- Зеленый
        0xFF00FFFF, -- Голубой
        0xFF0000FF, -- Синий
        0xFF8000FF  -- Фиолетовый
    }

    local currentIndex = 1
    local text = "член хуй"
    local textLength = string.len(text)
    local rainbowText = ""

    -- Создаем строку с цветами для каждой буквы в строке
    for i = 1, textLength do
      rainbowText = rainbowText .. "\27[38;2;" .. string.rshift(colors[currentIndex], 16) .. ";" .. string.rshift(bit.band(colors[currentIndex], 0xFF00), 8) .. ";" .. bit.band(colors[currentIndex], 0xFF) .. "m" .. string.sub(text, i, i)
      currentIndex = currentIndex < #colors and currentIndex + 1 or 1
    end

    GUIManager:getWindowByName("Chat-Input-Box"):SetProperty("Text", rainbowText)
    UIHelper.showToast("SUCCESS")
end

function GMHelper:teleportToPlane()
    local airplaneId = 1 -- ID вашего самолета
EngineWorld:getWorld():addAircraft(PlayerManager:getClientPlayer():getPosition(), 0)  -- Создаем самолет
end

function GMHelper:AimBot2(frameTime)
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        targetPos = VectorUtil.add3(player:getPosition(renderDt), VectorUtil.newVector3(0, 1.62, 0))

        local function getPitchAndYaw(targetPos)
            local camera = SceneManager.Instance():getMainCamera()
            local pos = camera:getPosition()
            local vector = math.atan2(targetPos.x - pos.x, targetPos.z - pos.z)
            local yaw = vector / math.pi * -180

            local dir = VectorUtil.sub3(targetPos, pos)
            local pitch = MathUtil.GetVector3Angle(VectorUtil.newVector3(dir.x, 0, dir.z), dir)

            return yaw, pitch
        end

        PlayerManager:getClientPlayer().targetPos = targetPos

        local times = 50

        LuaTimer:cancel(self.cameraKey)
        PlayerManager:getClientPlayer().cameraKey = LuaTimer:scheduleTimer(function()
            local newYaw, newPitch = getPitchAndYaw(targetPos)
            local selfPlayer = PlayerManager:getClientPlayer().Player
            local oldYaw = selfPlayer.rotationYaw
            local oldPitch = selfPlayer.rotationPitch
            
            local speed = 360  -- скорость поворота
            local yawDiff = math.fmod(newYaw - oldYaw, 360)
            if yawDiff > 180 or yawDiff < -180 then
                yawDiff = -yawDiff
            end
            
            local pitchDiff = newPitch - oldPitch
            
            if math.abs(yawDiff) < ((frameTime or 1000)/1000) * speed then
                selfPlayer.rotationYaw = newYaw
            else
                selfPlayer.rotationYaw = oldYaw + (yawDiff / math.abs(yawDiff)) * speed * ((frameTime or 1000) / 1000)
            end

            if math.abs(pitchDiff) < ((frameTime or 1000)/1000) * speed then
                selfPlayer.rotationPitch = newPitch
            else
                selfPlayer.rotationPitch = oldPitch + (pitchDiff / math.abs(pitchDiff)) * speed * ((frameTime or 1000) / 1000)
            end
        end, 200, -1)
    end
end

function GMHelper:StartAimBotTimer2()
    self.aimBotTimer = LuaTimer:scheduleTimer(function()
        self:AimBot2()
    end, 500, -1)
end

function GMHelper:texturecrash()
local txt = "After changing textures, do not immediately change them to other textures, wait for a while. It is not possible to select other textures after you have changed the textures, first reset the textures by selecting the default of the texture, wait a while and select other textures. "
    local btn = "OK"
    local title = "Fixing crashes when changing textures"
    CustomDialog.builder()
                .setContentText(txt)
                .setRightText(btn)
                .setTitleText(title)
                .setHideLeftButton()                
                .setPanelSize(600, 450)
                .show()
                GUIGMControlPanel:hide()
end

function GMHelper:GUISkyblockTest2()
    UIHelper.showGameGUILayout("GUIGameTool")
	GUIGMControlPanel:hide()
end

function GMHelper:GUISkyblockTest3()
    UIHelper.showGameGUILayout("GUIRewardDetail", self.rewardId)
	GUIGMControlPanel:hide()
end

function GMHelper:Reach()
   A = not A
    ClientHelper.putFloatPrefs("BlockReachDistance", 1000000)
	ClientHelper.putFloatPrefs("EntityReachDistance", 1000)
   if A then
	UIHelper.showToast("^00FF00REACH ON")
     return
   end
    ClientHelper.putFloatPrefs("BlockReachDistance", 10)
	ClientHelper.putFloatPrefs("EntityReachDistance", 10)
	UIHelper.showToast("^00FF00REACH OFF")
end

function GMHelper:ViewBobbing()
   A = not A
    ClientHelper.putBoolPrefs("IsViewBobbing", false)
   if A then
	UIHelper.showToast("^00FF00ViewBobbing: OFF")
     return
   end
    ClientHelper.putBoolPrefs("IsViewBobbing", true)
	UIHelper.showToast("^00FF00ViewBobbing: ON")
end

function GMHelper:BlockmanCollision()
   A = not A
	ClientHelper.putBoolPrefs("IsCreatureCollision", true)
    ClientHelper.putBoolPrefs("IsBlockmanCollision", true)
   if A then
	UIHelper.showToast("^00FF00BlockmanCollision: ON")
     return
   end
    ClientHelper.putBoolPrefs("IsBlockmanCollision", false)
	UIHelper.showToast("^00FF00BlockmanCollision: OFF")
	ClientHelper.putBoolPrefs("IsCreatureCollision", false)
end

function GMHelper:RenderWorld()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("BlockRenderDistance", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:Fog()
   A = not A
    ClientHelper.putBoolPrefs("DisableFog", true)
   if A then
	UIHelper.showToast("^00FF00Fog Disabled!")
     return
   end
    ClientHelper.putBoolPrefs("DisableFog", false)
	UIHelper.showToast("^00FF00Fog Enabled!")
end

function GMHelper:WWE_Camera()
   A = not A
    ClientHelper.putBoolPrefs("IsSeparateCamera", true)
   if A then
	UIHelper.showToast("^00FF00SeparateCamera: Enabled")
     return
   end
    ClientHelper.putBoolPrefs("IsSeparateCamera", false)
	UIHelper.showToast("^00FF00SeparateCamera: Disabled")
end

function GMHelper:ResetXD()
    ClientHelper.putStringPrefs("RunSkillName", "run")
	GUIGMControlPanel:hide()
end

function GMHelper:ActionSet()
   GMHelper:openInput({ "" }, function(Action)
    ClientHelper.putStringPrefs("RunSkillName", Action)
    end)
end

function GMHelper:WalkSMG()
    ClientHelper.putStringPrefs("RunSkillName", "smg_walk")
	GUIGMControlPanel:hide()
end

function GMHelper:SneakXD()
    ClientHelper.putStringPrefs("RunSkillName", "sneak")
	GUIGMControlPanel:hide()
end

function GMHelper:SitXD()
    ClientHelper.putStringPrefs("RunSkillName", "sit1")
	GUIGMControlPanel:hide()
end

function GMHelper:SitXD2()
    ClientHelper.putStringPrefs("RunSkillName", "sit2")
	GUIGMControlPanel:hide()
end

function GMHelper:SitXD3()
    ClientHelper.putStringPrefs("RunSkillName", "sit3")
	GUIGMControlPanel:hide()
end

function GMHelper:rideDragonXD()
    ClientHelper.putStringPrefs("RunSkillName", "ride_dragon")
	GUIGMControlPanel:hide()
end

function GMHelper:SwimXD()
    ClientHelper.putStringPrefs("RunSkillName", "swim")
	GUIGMControlPanel:hide()
end

function GMHelper:ArmSpeed()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("ArmSwingAnimationEnd", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:CameraFunct()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putFloatPrefs("ThirdPersonDistance", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:CloudsOFF()
    ClientHelper.putBoolPrefs("DisableRenderClouds", true)
	UIHelper.showToast("^00FF00Clouds Stop")
	GUIGMControlPanel:hide()
end

function GMHelper:BowSpeed()
	ClientHelper.putFloatPrefs("BowPullingSpeedMultiplier", 1000)
	ClientHelper.putFloatPrefs("BowPullingFOVMultiplier", 0)
	UIHelper.showToast("^00FF00BowSpeed:ON")
	GUIGMControlPanel:hide()
end

function GMHelper:HeadText()
   A = not A
   ClientHelper.putBoolPrefs("RenderHeadText", true)
   if A then
	UIHelper.showToast("^00FF00Head text render now ON")
     return
   end
   ClientHelper.putBoolPrefs("RenderHeadText", false)
	UIHelper.showToast("^00FF00Head text render now OFF")
end

function GMHelper:changePlayerActor(sex)
    if isGameStart then
        if sex == 1 then
            ClientHelper.putStringPrefs("BoyActorName", "boy.actor")
            ClientHelper.putStringPrefs("GirlActorName", "boy.actor")
        else
            ClientHelper.putStringPrefs("BoyActorName", "girl.actor")
            ClientHelper.putStringPrefs("GirlActorName", "girl.actor")
        end
    else
        if sex == 1 then
            ClientHelper.putStringPrefs("BoyActorName", "boy.actor")
            ClientHelper.putStringPrefs("GirlActorName", "boy.actor")
        else
            ClientHelper.putStringPrefs("BoyActorName", "girl.actor")
            ClientHelper.putStringPrefs("GirlActorName", "girl.actor")
        end
    end
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        if player.Player then
            player.Player.m_isPeopleActor = false
            EngineWorld:restorePlayerActor(player)
        end
    end
	UIHelper.showToast("^00FF00Success!")
	GUIGMControlPanel:hide()
end
--destroyAllEntityActor()
function GMHelper:BanClickCD(text)
   A = not A
    ClientHelper.putBoolPrefs("banClickCD", true)
   if A then
	UIHelper.showToast("^00FF00done, bedwars click: 0FF")
     return
   end
    ClientHelper.putBoolPrefs("banClickCD", false)
	UIHelper.showToast("^00FF00done, bedwars click: 0N")
end

function GMHelper:ShowAllCobtrolXD()
    RootGuiLayout.Instance():showMainControl()
end

function GMHelper:PersonView()
   GMHelper:openInput({ "" }, function(Number)
        Blockman.Instance():setPersonView(Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:BreakParticles()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putIntPrefs("BlockDestroyEffectSize", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:JailBreakBypass()
    RootGuiLayout.Instance():showMainControl()
	GUIGMControlPanel:hide()
end

function GMHelper:SpeedLineMode()
    local strength = 1
    local interval = 0.01
    Blockman.Instance().m_gameSettings:setPatternSpeedLine(strength, interval)
	UIHelper.showToast("^00FF00Speed Line = Enable!")
	GUIGMControlPanel:hide()
end

function GMHelper:SpeedLineModeDisable()
    local strength = 0
    local interval = 0
    Blockman.Instance().m_gameSettings:setPatternSpeedLine(strength, interval)
	UIHelper.showToast("^00FF00Speed Line = Disabled!")
	GUIGMControlPanel:hide()
end

function GMHelper:PatternTorchMode()
    local strength = 1
    Blockman.Instance().m_gameSettings:setPatternTorchStrength(strength)
	UIHelper.showToast("^00FF00PatternTorch = Enabled!")
	GUIGMControlPanel:hide()
end

function GMHelper:PatternTorchModeOFF()
    local strength = 0
    Blockman.Instance().m_gameSettings:setPatternTorchStrength(strength)
	UIHelper.showToast("^00FF00PatternTorch = Disabled!")
	GUIGMControlPanel:hide()
end

function GMHelper:CameraFlipModeRESET()
    Blockman.Instance().m_gameSettings:setFovSetting(1)
	GUIGMControlPanel:hide()
end

function GMHelper:CameraFlipModeON()
    Blockman.Instance().m_gameSettings:setFovSetting(90)
	GUIGMControlPanel:hide()
end

function GMHelper:Iikj(player)
    local pos = player:getPosition()
    pos.y = pos.y + 0.5
    local yaw = player:getYaw()
    player:teleportPosWithYaw(pos, yaw)
	GUIGMControlPanel:hide()
end

function GMHelper:GUItest1()
    MsgSender.sendMsg(10007, "IikjLol")
	MsgSender.sendMsg(10006, "IikjLol")
	MsgSender.sendMsg(10005, "IikjLol")
	MsgSender.sendMsg(10004, "IikjLol")
	MsgSender.sendMsg(10003, "IikjLol")
	MsgSender.sendMsg(10002, "IikjLol")
	MsgSender.sendMsg(10001, "IikjLol")
    MsgSender.sendMsg(10000, "IikjLol")
    MsgSender.sendMsg(1, "IikjLol")
end

function GMHelper:FustBreakBlockMode()
    ---设置轨道不渲染
    cBlockManager.cGetBlockById(66):setNeedRender(false)
    cBlockManager.cGetBlockById(253):setNeedRender(false)
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
            block:setHardness(0)
	UIHelper.showToast("^00FF00Turned ON")
	GUIGMControlPanel:hide()
    end
	    end
end

function GMHelper:FlyDev()
    GUIManager:hideWindowByName("Main.binary")
    GUIManager:hideWindowByName("Main.json")
	GUIGMControlPanel:hide()
end

function GMHelper:HideHP()
    GUIManager:getWindowByName("PlayerInfo-Health"):SetVisible(false)
end

function GMHelper:ShowHP()
    GUIManager:getWindowByName("PlayerInfo-Health"):SetVisible(true)
end

function GMHelper:FlyDev2()
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
    Blockman.Instance():setBloomEnable(true)
    Blockman.Instance():enableFullscreenBloom(true)
    Blockman.Instance():setBlockBloomOption(100)
    Blockman.Instance():setBloomIntensity(100)
    Blockman.Instance():setBloomSaturation(100)
    Blockman.Instance():setBloomThreshold(100)
	UIHelper.showToast("^00FF00Speed Break Block = 0")
	GUIGMControlPanel:hide()
end
end
end

function GMHelper:FlyDev3()
    GUIManager:showWindowByName("PlayerInventory-DesignationTab")
	GUIManager:getWindowByName("PlayerInventory-DesignationTab"):SetVisible(true)
	GUIManager:showWindowByName("PlayerInventory-MainInventoryTab")
	GUIManager:getWindowByName("PlayerInventory-MainInventoryTab"):SetVisible(true)
	GUIManager:getWindowByName("PlayerInventory-MainInventoryTab"):SetArea({ 1, 1 }, { 1, 0 }, { 0, 1 }, { 0, 1 })
	GUIManager:getWindowByName("PlayerInventory-DesignationTab"):SetArea({ 0, 0 }, { 0, 0 }, { 0.3, 0 }, { 0.3, 0 })
    GUIManager:getWindowByName("PlayerInventory-ToggleInventoryButton"):SetVisible(true)
	GUIManager:showWindowByName("PlayerInventory-ToggleInventoryButton")
	GUIGMControlPanel:hide()
end

function GMHelper:TNTButtonView()
    GUIManager:showWindowByName("Main-throwpot-Controls")
	GUIManager:getWindowByName("Main-throwpot-Controls"):SetVisible(true)
	GUIGMControlPanel:hide()
end

function GMHelper:SetBobbing()
   GMHelper:openInput({ "" }, function(Number)
        ClientHelper.putFloatPrefs("PlayerBobbingScale", Number)
        UIHelper.showToast("^00FF00Changed")
   end)
end

function GMHelper:test200()
	MsgSender.sendMsg(Messages:gameResetTimeHint())
	GUIGMControlPanel:hide()
end

function GMHelper:test600()
	    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        if player.Player then
            player.Player.m_isPeopleActor = false
            EngineWorld:restorePlayerActor(player)
        end
    end
 	UIHelper.showToast("^00FF00yes")
	GUIGMControlPanel:hide()
end

function GMHelper:JustClick()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 30.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 200000000000000000000000000000000000)
end

function GMHelper:JustClick2()
    LuaTimer:scheduleTimer(function()
        local moveDir = VectorUtil.newVector3(0.0, 300.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
    end, 5, 200000000000000000000000000000000000)
end

function GMHelper:OffChat()
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(false)
end

function GMHelper:OnChat()
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
	GUIManager:getWindowByName("Main-Chat-Message"):SetVisible(true)
end

function GMHelper:Noclip()
   A = not A
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Noclip = true")
     return
   end
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00Noclip = false")
end

function GMHelper:NoclipOP()
   A = not A
    for blockId = 3, 133 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00TreasureHunterNoClip = Enabled")
     return
   end
    for blockId = 3, 133 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00TreasureHunterNoClip = Disabled")
end


function GMHelper:NoObsidian1()
   A = not A
    for blockId = 49, 50 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 49, 50 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00Disabled")
end

function GMHelper:NoOakPlanks1()
   A = not A
    for blockId = 5, 6 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 5, 6 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00Disabled")
end

function GMHelper:NoGlass1()
   A = not A
    for blockId = 94, 95 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 94, 95 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00Disabled")
end

function GMHelper:NoEndStone1()
   A = not A
    for blockId = 120, 121 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 120, 121 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00Disabled")
end

function GMHelper:NoWool1()
   A = not A
    for blockId = 1441, 1444 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 1441, 1444 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00Disabled")
end

function GMHelper:NoBomb1()
   A = not A
    for blockId = 593, 594 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 593, 594 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00Disabled")
end

function GMHelper:NoIDoor1()
   A = not A
    for blockId = 241, 242 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 241, 242 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00Disabled")
end

function GMHelper:NoQuartz1()
   A = not A
    for blockId = 155, 156 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
        end
		    end
   if A then
	UIHelper.showToast("^00FF00Enabled")
     return
   end
    for blockId = 155, 156 do
        local block = BlockManager.getBlockById(blockId)
        if block then
			block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
        end
		    end
	UIHelper.showToast("^00FF00Disabled")
end


function GMHelper:test2222()
    A = not A
    LuaTimer:scheduleTimerWithEnd(function()
    PlayerManager:getClientPlayer().Player:setGlide(true)
	end, 0.2, 900000000000000000000000)
   if A then
    LuaTimer:scheduleTimerWithEnd(function()
    PlayerManager:getClientPlayer().Player:setGlide(false)
	end, 0.2, 1)
end
end

function GMHelper:JumpHeight()
   GMHelper:openInput({ "" }, function(Number)
    local player = PlayerManager:getClientPlayer()
    if player and player.Player then
    player.Player:setFloatProperty("JumpHeight", Number)
	UIHelper.showToast("^00FF00Success")
end
end)
end

function GMHelper:addCurrencyCustom(player)
    GMHelper:openInput(player, { "100" }, function(currency)
        currency = tonumber(currency) or 0
        player:addCurrency(currency, "GM")
    end)
end

function GMHelper:GUIOpener()
   GMHelper:openInput({ ".json" }, function(Number)
   GUIManager:showWindowByName(Number)
   end)
end

function GMHelper:GUIViewOFF()
   GMHelper:openInput({ ".json" }, function(Number)
   GUIManager:hideWindowByName(Number)
   end)
end

function GMHelper:InsideGUI()
   GMHelper:openInput({ "", "" }, function(Number, Exe)
        GUIManager:getWindowByName(Number):SetVisible(Exe)
   end)
end

function GMHelper:ChangeNick()
   GMHelper:openInput({ "" }, function(Nick)
    PlayerManager:getClientPlayer().Player:setShowName(Nick)
    UIHelper.showToast("^FF00EENickNameChanged")
   end)
end

function GMHelper:LongJump()
    LuaTimer:scheduleTimer(function()
    PlayerManager:getClientPlayer().Player:setGlide(true)
	end, 0.2, 900000000000000000000000)
end

function GMHelper:AdvancedUp()
   GMHelper:openInput({ "" }, function(Num)
        local moveDir = VectorUtil.newVector3(0.0, Num, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:AdvancedIn()
   GMHelper:openInput({ "" }, function(Num)
        local moveDir = VectorUtil.newVector3(Num, 0.0, 0.0)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:AdvancedOn()
   GMHelper:openInput({ "" }, function(Num)
        local moveDir = VectorUtil.newVector3(0.0, 0.0, Num)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:AdvancedDirect()
   GMHelper:openInput({ "", "", "" }, function(Num, Num2, Num3)
        local moveDir = VectorUtil.newVector3(Num, Num2, Num3)
        PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end)
end

function GMHelper:tpPos()
   GMHelper:openInput({ "", "", "" }, function(Num, Num2, Num3)
    local playerPos = VectorUtil.newVector3(Num, Num2, Num3)
    local moveDir = VectorUtil.newVector3(1.0, 10.0, 1.0)
    PlayerManager:getClientPlayer().Player:setPosition(playerPos)
    PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end) 
end

function GMHelper:HideHoldItem()
   A = not A
    PlayerManager:getClientPlayer():setHideHoldItem(true)
    UIHelper.showToast("^FF00EETrue")
	if A then
	PlayerManager:getClientPlayer():setHideHoldItem(false)
    UIHelper.showToast("^FF00EEFalse")
end
end

function GMHelper:DevFlyI()
    local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
    UIHelper.showToast("^FF00EESuccess")
end

function GMHelper:SharpFly()
    A = not A
    ClientHelper.putBoolPrefs("DisableInertialFly", true)
    UIHelper.showToast("^FF00EE[ON] works when you have dev flight enabled")
	if A then
	ClientHelper.putBoolPrefs("DisableInertialFly", false)
    UIHelper.showToast("^FF00EE[OFF] works when you have dev flight enabled")
end
end

function GMHelper:WaterPush()
    A = not A
    local entity = PlayerManager:getClientPlayer().Player
    entity:setBoolProperty("ignoreWaterPush", true)
    UIHelper.showToast("^FF00EEON")
	if A then
    entity:setBoolProperty("ignoreWaterPush", false)
    UIHelper.showToast("^FF00EEOFF")
end
end

function GMHelper:changeScale()
   GMHelper:openInput({ "" }, function(Scale)
    local entity = PlayerManager:getClientPlayer().Player
    entity:setScale(Scale)
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:BlockOFF()
   GMHelper:openInput({ "" }, function(Numer)
   local blockId = Numer
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)
  end)
end

function GMHelper:BlockON()
   GMHelper:openInput({ "" }, function(Numer)
   local blockId = Numer
   local block = BlockManager.getBlockById(blockId)
   block:setBlockBounds(0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
  end)
end

function GMHelper:SpeedManager()
  GMHelper:openInput({ "" }, function(Number)
  PlayerManager:getClientPlayer().Player:setSpeedAdditionLevel(Number)
	UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:SpeedUp()
    ClientHelper.putIntPrefs("SpeedAddMax", 20000000)
	UIHelper.showToast("^00FF00[DANGER]")
end

function GMHelper:XRayManagerON()
   GMHelper:openInput({ "erase this text and write block id" }, function(Numer)
    cBlockManager.cGetBlockById(Numer):setNeedRender(false)
	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:XRayManagerOFF()
   GMHelper:openInput({ "erase this text and write block id" }, function(Numer)
    cBlockManager.cGetBlockById(Numer):setNeedRender(true)
	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:OFFDARK()
    ---设置轨道不渲染
    cBlockManager.cGetBlockById(66):setNeedRender(false)
    cBlockManager.cGetBlockById(253):setNeedRender(false)
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
            block:setLightValue(150, 150, 150)
	UIHelper.showToast("^00FF00Success")
	GUIGMControlPanel:hide()
    end
	    end
end


function GMHelper:ONDARK()
    ---设置轨道不渲染
    cBlockManager.cGetBlockById(66):setNeedRender(true)
    cBlockManager.cGetBlockById(253):setNeedRender(true)
    for blockId = 1, 40000 do
        local block = BlockManager.getBlockById(blockId)
        if block then
            block:setLightValue(0, 0, 0)
	UIHelper.showToast("^00FF00success")
	GUIGMControlPanel:hide()
    end
	    end
end


function GMHelper:SpawnNPC()
   GMHelper:openInput({ ".actor" }, function(actor)
    local pos = PlayerManager:getClientPlayer():getPosition()  
    local yaw = PlayerManager:getClientPlayer():getYaw()  
    EngineWorld:addActorNpc(pos, yaw, actor, function(entity)
end)
end)
end


function GMHelper:TeleportByUID()
   GMHelper:openInput({ "id player" }, function(ID)
  local player = PlayerManager:getClientPlayer().Player
    local Dplayer = PlayerManager:getPlayerByUserId(ID)
    if Dplayer then
        player:setPosition(Dplayer:getPosition())
    end
end)
end

function GMHelper:ChangeActorForMe()
  local entity = PlayerManager:getClientPlayer().Player
  GMHelper:openInput({ ".actor" }, function(actor)
  Blockman.Instance():getWorld():changePlayerActor(entity, actor)
  Blockman.Instance():getWorld():changePlayerActor(entity, actor)
  entity.m_isPeopleActor = false
  EngineWorld:restorePlayerActor(entity)
  UIHelper.showToast("^00FF00Success")
end)
end

function GMHelper:AFKmode()
   A = not A
    PlayerManager:getClientPlayer().Player.m_rotateSpeed = 1
    UIHelper.showToast("^FF00EEStart")
	if A then
	PlayerManager:getClientPlayer().Player.m_rotateSpeed = 0
    UIHelper.showToast("^FF00EEStop")
end
end

function GMHelper:DevnoClip()
   A = not A
    PlayerManager:getClientPlayer().Player.noClip = true
    UIHelper.showToast("^FF00EETurned on")
   if A then
    PlayerManager:getClientPlayer().Player.noClip = false
    UIHelper.showToast("^FF00EETurned off")
end
end

function GMHelper:StepHeight()
   GMHelper:openInput({ "StepHeight Value" }, function(data)
    PlayerManager:getClientPlayer().Player.stepHeight = data
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:SpYaw()
   A = not A
    PlayerManager:getClientPlayer().Player.spYaw = true
    UIHelper.showToast("^FF00EEON")
  if A then
    PlayerManager:getClientPlayer().Player.spYaw = false
    UIHelper.showToast("^FF00EEOFF")    
end
end

function GMHelper:SpYawSet()
   GMHelper:openInput({ "" }, function(data)
    PlayerManager:getClientPlayer().Player.spYawRadian = data
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:HairSet()
   GMHelper:openInput({ "" }, function(Data)
    PlayerManager:getClientPlayer().Player.m_isEquipWing = true
    PlayerManager:getClientPlayer().Player.m_isClothesChange = true
    PlayerManager:getClientPlayer().Player.m_isClothesChanged = true
    UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:SetHideAndShowArmor()
   A = not A
   LogicSetting.Instance():setHideArmor(true)
    UIHelper.showToast("^FF00EEON")
  if A then
   LogicSetting.Instance():setHideArmor(false)
    UIHelper.showToast("^FF00EEOFF")
end
end

--  LogicSetting.Instance():setHideArmor(true)

    --entity.m_rotateSpeed = 0

function GMHelper:SettingLongjump()
   GMHelper:openInput({ "speedglide", "drop resistance" }, function(Num1, Num2)
  local player = PlayerManager:getClientPlayer().Player
    player.m_isGlide = true
      player.m_glideMoveAddition = Num1
          player.m_glideDropResistance = Num2
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:SetAlpha()
     GMHelper:openInput({ "Gui name", "alpha" }, function(GUI, Number)
  GUIManager:getWindowByName(GUI):SetAlpha(Number)
  UIHelper.showToast("^FF00EESuccess")
end)
end
--Region Clothes -- Start
function GMHelper:ChangeHair()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_hairID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeFace()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_faceID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeTops()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_topsID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangePants()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_pantsID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeShoes()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_shoesID = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeGlasses()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_glassesId = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeScarf()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_scarfId = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeWing()
   GMHelper:openInput({ "number" }, function(Kelg)
  local player = PlayerManager:getClientPlayer().Player
		player.m_outLooksChanged = true
		player.m_wingId = Kelg
  	UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeHat()
  GMHelper:openInput({ "number" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_hatId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:ChangeDecHat()
  GMHelper:openInput({ "number" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_decorate_hatId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end


function GMHelper:ChangeTail()
  GMHelper:openInput({ "number" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_tailId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end


function GMHelper:ChangeBagI()
  GMHelper:openInput({ "number" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_bagId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end


function GMHelper:ChangeCrown()
  GMHelper:openInput({ "" }, function(sea)
  PlayerManager:getClientPlayer().Player.m_crownId = sea
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  UIHelper.showToast("^FF00EESuccess")
end)
end

function GMHelper:CreateGUIDEArrow()
  local sss = PlayerManager:getClientPlayer():getPosition() 
  PlayerManager:getClientPlayer().Player:addGuideArrow(sss)
  UIHelper.showToast("^FF00EESuccess")
end


function GMHelper:DelAllGUIDEArrow()
  PlayerManager:getClientPlayer().Player:deleteAllGuideArrow()
  UIHelper.showToast("^FF00EESuccess")
end


function GMHelper:JetPack()
  A = not A
  PlayerManager:getClientPlayer().Player.m_keepJumping = false
  UIHelper.showToast("^FF00EEВключено")
  if A then
  PlayerManager:getClientPlayer().Player.m_keepJumping = true
  UIHelper.showToast("^FF00EEВыключено")
end
end


function GMHelper:init1()
GUIManager:showWindowByName("DeathSettlement.binary")
	GUIManager:showWindowByName("DeathSettlement.json")
	GUIManager:setWindowByName("DeathSettlement.json"):SetVisible(true)
	GUIManager:setWindowByName("DeathSettlement.binary"):SetVisible(true)
end

function GMHelper:init2()
local entity = PlayerManager:getClientPlayer().Player
  Blockman.Instance():getWorld():changePlayerActor(entity, angel)
  Blockman.Instance():getWorld():changePlayerActor(entity, angel)
  entity.m_isPeopleActor = false
end

function GMHelper:setGlide()
   A = not A
PlayerManager:getClientPlayer().Player:setGlide(true)
UIHelper.showToast("^00FF00Enabled")
	if A then
PlayerManager:getClientPlayer().Player:setGlide(false)
UIHelper.showToast("^00FF00Disabled")
end
end


function GMHelper:RespawnTool()
    PacketSender:getSender():sendRebirth()
end

function GMHelper:makeGmButtonShow()
    GUIGMMain:setShow()
end

function GMHelper:test666()
    PlayerManager:getClientPlayer().Player:startParachute()
end

  function GMHelper:test555()
    local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
	PlayerManager:getClientPlayer().Player:setSpeedAdditionLevel(150000)
end

function GMHelper:ReachIn()
    GMHelper:openInput({ "Val1", "Val2" }, function(val, valm)
        ClientHelper.putFloatPrefs("BlockReachDistance", val)
        ClientHelper.putFloatPrefs("EntityReachDistance", valm)
end)
end


function GMHelper:Tus()
    GMHelper:openInput({ "Game", "Map" }, function(gameId, mapId)
        Game:resetGame(gameId, PlayerManager:getClientPlayer().userId, mapId)
end)
end


function GMHelper:UserQ()
    UIHelper.showToast("ID: " .. PlayerManager:getClientPlayer().userId)
end

function GMHelper:YawQ()
    UIHelper.showToast("Yaw: " .. PlayerManager:getClientPlayer():getYaw())
end

function GMHelper:ItemQ()
    GMHelper:openInput({ "ID" }, function(Id)
        UIHelper.showToast("Item: " .. Lang:getItemName(Id))
end)
end


function GMHelper:TimeW()
        local curWorld = EngineWorld:getWorld()
        local time = curWorld:getWorldTime()
    UIHelper.showToast("Time: " .. (time))
end

function GMHelper:RainbowWing()
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  PlayerManager:getClientPlayer().Player.m_wingId = 27
  UIHelper.showToast("^FF00EEУспешно")
end

function GMHelper:XLGoldWing()
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  PlayerManager:getClientPlayer().Player.m_wingId = 26
  UIHelper.showToast("^FF00EEУспешно")
end

function GMHelper:RedWing()
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  PlayerManager:getClientPlayer().Player.m_wingId = 25
  UIHelper.showToast("^FF00EEУспешно")
end

function GMHelper:CokieUwU()
  PlayerManager:getClientPlayer().Player.m_outLooksChanged = true
  PlayerManager:getClientPlayer().Player.m_wingId = 24
  UIHelper.showToast("^FF00EEУспешно")
end

function GMHelper:Toast()
    GMHelper:openInput({ "Text" }, function(txt)
     UIHelper.showToast(txt)
    end)
end

 function GMHelper:Pizdec()
    showEngineWindow("Main-VisibleBar")
    showEngineWindow("Main-ItemBarBg")
    showEngineWindow("Main-Control")
    showEngineWindow("Main-FlyingControls")
    showEngineWindow("Main-Fly")
    showEngineWindow("Main-PoleControl")
    showEngineWindow("Main-PoleControl-Move")
    showEngineWindow("Main-MoveState")
    showEngineWindow("Main-Skill-Release-btn")
    showEngineWindow("Main-Jump-Controls")
end

function GMHelper:GetTextLang()
    GMHelper:openInput({ "String" }, function(str)
            local val = Lang:getString(str)
            CustomDialog.builder()
            .setContentText(val)
            .show()
            GUIGMControlPanel:hide()
    end)
end


function GMHelper:noLeftDialog()
    GMHelper:openInput({ "Text", "BtnName" }, function(txt, btn)
        CustomDialog.builder()
                    .setContentText(txt)
                    .setRightText(btn)
                    .setHideLeftButton()
                    .show()
        GUIGMControlPanel:hide()
    end)
end


function GMHelper:noRightDialog()
    GMHelper:openInput({ "Text", "BtnName" }, function(txt, btn)
        CustomDialog.builder()
                    .setContentText(txt)
                    .setHideRightButton()
                    .setLeftText(btn)
                    .show()
        GUIGMControlPanel:hide()
    end)
end


function GMHelper:customDialogScr()
    GMHelper:openInput({ "Text", "Btn1Name", "Btn2Name", "ScrTextToast1", "ScrTextToast2" }, function(txt, btn, btnm, scr, scrm)
        CustomDialog.builder()
                    .setContentText(txt)
                    .setRightText(btn)
                    .setLeftText(btnm)
                    .setRightClickListener(function()
            UIHelper.showToast(scr)
        end)
        .setLeftClickListener(function()
            UIHelper.showToast(scrm)
        end)
                    .show()
        GUIGMControlPanel:hide()
    end)
end


function GMHelper:ToggleShowPlayersHP()
    if ModsConfig.IS_SHOW_PLAYERS_HP == true then
        ModsConfig.IS_SHOW_PLAYERS_HP = false
        GUIGMControlPanel:hide()
        MsgSender.sendBottomTips(5, "Show players health = " .. tostring(ModsConfig.IS_SHOW_PLAYERS_HP))
    else
        ModsConfig.IS_SHOW_PLAYERS_HP = true
        GUIGMControlPanel:hide()
        MsgSender.sendBottomTips(5, "Show players health = " .. tostring(ModsConfig.IS_SHOW_PLAYERS_HP))
    end
end


function GMHelper:CopyPlayersInfo()
    local content = ""
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
        content = content .. "\n[Player Info] " .. string.format("Username: %s | User ID: %s | Gender: %s", player:getName(), player.userId, player.Player:getSex())
    end
    ClientHelper.onSetClipboard(content)
end


function GMHelper:CloseGame(params) 
    Game:exitGame(params)
end


function GMHelper:SetNameColor(color) 
    ModsConfig.PLAYER_NAME_COLOR = color
end


function GMHelper:HidePlayersActor() 
    if ModsConfig.IS_PLAYERS_ACTORS_HIDDEN == true then
        ModsConfig.IS_PLAYERS_ACTORS_HIDDEN = false
        GUIGMControlPanel:hide()
        MsgSender.sendBottomTips(5, "Hide players actors = " .. tostring(ModsConfig.IS_PLAYERS_ACTORS_HIDDEN))
    else
        ModsConfig.IS_PLAYERS_ACTORS_HIDDEN = true
        GUIGMControlPanel:hide()
        MsgSender.sendBottomTips(5, "Hide players actors = " .. tostring(ModsConfig.IS_PLAYERS_ACTORS_HIDDEN))
    end
end


function GMHelper:HidePlayers()
    if ModsConfig.IS_PLAYERS_HIDDEN == true then
        ModsConfig.IS_PLAYERS_HIDDEN = false
        GUIGMControlPanel:hide()
        MsgSender.sendBottomTips(5, "Hide players = " .. tostring(ModsConfig.IS_PLAYERS_HIDDEN))
    else
        ModsConfig.IS_PLAYERS_HIDDEN = true
        GUIGMControlPanel:hide()
        MsgSender.sendBottomTips(5, "Hide players = " .. tostring(ModsConfig.IS_PLAYERS_HIDDEN))
    end
end


function GMHelper:SwitchPerson(person)
    Blockman.Instance():setPersonView(person)
    GUIGMControlPanel:hide()
end

function GMHelper:SpawnGottya()
       GMHelper:openInput({ "" }, function(martin)
    local blockPos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(blockPos, martin)
end)
end


function GMHelper:SetFOV()
   GMHelper:openInput({ "" }, function(data)
        Blockman.Instance().m_gameSettings:setFovSetting(data)
        UIHelper.showToast("success")
   end)
end


function GMHelper:BlockReachSet()
GMHelper:openInput({ "Input Float. Default: 6.5" }, function(Float)
ClientHelper.putFloatPrefs("BlockReachDistance", Float)
UIHelper.showToast("done")
end)
end


function GMHelper:ReachSet()
GMHelper:openInput({ "Delete this sentence and type your reach. Default: 5" }, function(Float)
ClientHelper.putFloatPrefs("EntityReachDistance",Float)
UIHelper.showToast("sukses")
end)
end


function GMHelper:SpamRespawn()
GMHelper:openInput({ "" }, function(Number)

for i = 1,Number do
PacketSender:getSender():sendRebirth()
end
end)
end


function GMHelper:ShowReviveUI()
    local param={}
    param.watchAdTimesLimit=true
    param.AdType = 101401
    param.showUITime=10
    param.revivePrice=10
    param.invincibleTimeHere=3
    param.invincibleTimeBase=5
    UIHelper.showGameGUILayout("GUIVideoAdAndCubeTip",param)
end

function GMHelper:OffShowReviveUI()
    local param={}
    param.watchAdTimesLimit=false
    param.AdType = 101401
    param.showUITime=10
    param.revivePrice=10
    param.invincibleTimeHere=3
    param.invincibleTimeBase=5
    UIHelper.showGameGUILayout("GUIVideoAdAndCubeTip",param)
end

function GMHelper:ShowReviveDialogUI()
    local param={}
    param.watchAdTimesLimit=packet.watchAdTimesLimit
    param.AdType=packet.AdType
    param.showUITime=packet.showUITime
    param.revivePrice=packet.revivePrice
    param.invincibleTimeHere=packet.invincibleTimeHere
    param.invincibleTimeBase=packet.invincibleTimeBase
    UIHelper.showGameGUILayout("GUIVideoAdAndCubeTip",param)
end

function GMHelper:Rvanka()
            GMHelper:openInput({ "id" }, function(Player)
            LuaTimer:scheduleTimer(function()
            local player = PlayerManager:getClientPlayer().Player
            local Dplayer = PlayerManager:getPlayerByUserId(Player)
            if Dplayer then
            player:setPosition(Dplayer:getPosition())
            end
        end, 0.1, 99999999999999999999999999999999999999)
    end)
end


function GMHelper:Tracer()
UIHelper.showToast("^FF00EE[ON]")
    local me = PlayerManager:getClientPlayer()
    LuaTimer:scheduleTimer(function()
        PlayerManager.getClientPlayer().Player:deleteAllGuideArrow()
        local others = PlayerManager:getPlayers()
        for _, c_player in pairs(others) do
            if c_player ~= me then
                me.Player:addGuideArrow(c_player:getPosition())
            end
        end
    end, 500, -1)
end


function GMHelper:updateBedWarArrowSpeed()
    GMHelper:openInput({ "speed" }, function(data)
        local scale = tonumber(data) or 0

        PlayerManager:getClientPlayer().Player:setFloatProperty("ArrowSpeedScale", scale)

        PlayerManager:getClientPlayer():sendPacket({
            pid = "updateBedWarArrowSpeed",
            scale = scale,
        })
    end)
end


function GMHelper:Scaffold()
--helped tarelka089
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00Scaffold TurnOFF")
    if A then
    GMHelper:openInput({"BlockID"}, function(block)
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z - 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x - 1, pos.y - 2, pos.z + 1), block)
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x + 1, pos.y - 2, pos.z - 1), block)
    end, 0.15, -1)
    UIHelper.showToast("^00FF00Scaffold TurnON")
    end)
    end
    end


function GMHelper:Scaffald()
--helped Ardenis
    A = not A
 LuaTimer:cancel(self.timer)
 UIHelper.showToast("Closed.")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), 116)
    end, 0.15, 9999999999999999999999999999)
 UIHelper.showToast("Oppened.")
 end
 end


function GMHelper:Scaffuld()
--helped Ardenis
    A = not A
 LuaTimer:cancel(self.timer)
 UIHelper.showToast("Closed.")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), 0)
    end, 0.15, 9999999999999999999999999999)
 UIHelper.showToast("Oppened.")
 end
 end


function GMHelper:Scaffeld()
--helped Ardenis
    A = not A
 LuaTimer:cancel(self.timer)
 UIHelper.showToast("Closed.")
    if A then
    self.timer = LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), 1)
    end, 0.15, 9999999999999999999999999999)
 UIHelper.showToast("Oppened.")
 end
 end


function GMHelper:ChangeBlockTextures(texturePath)
    local isChange = GMHelper.guiTextures or false
    if not isChange then
        Blockman.Instance():changeBlockTextures("./gui.zip")
        GMHelper.guiTextures = true
    else
        Blockman.Instance():changeBlockTextures("")
        GMHelper.guiTextures = false
    end
    if #texturePath > 0 then
        Blockman.Instance():changeBlockTextures("Media/Textures/package/" .. texturePath)
    else
        Blockman.Instance():changeGuiTextures("")
    end
    GUIGMControlPanel:hide()
end

function GMHelper:texturecrash()
local txt = "Не ебу, Иди нахуй. "
    local btn = "САМ ИДИ НАХУЙ"
    local title = "Фикс :"
    CustomDialog.builder()
                .setContentText(txt)
                .setRightText(btn)
                .setTitleText(title)
                .setHideLeftButton()                
                .setPanelSize(600, 450)
                .show()
                GUIGMControlPanel:hide()
end

function GMHelper:Creator()
  local player = PlayerManager:getClientPlayer().Player
		player.m_canBuildBlockQuickly = true
		player.m_quicklyBuildBlock = true
  	UIHelper.showToast("^00FF00@RICHH_BG")
end

function GMHelper:XLParachute()
GUIManager:getWindowByName("Main-Parachute"):SetVisible(true) -- эта функцию трахает ричха
    GUIManager:getWindowByName("Main-Parachute", GUIType.Button):registerEvent(GUIEvent.ButtonClick, function() -- член
        PlayerManager:getClientPlayer().Player:startParachute() -- игрок летит к хуям
        UIHelper.showToast("^00FF00ON")
    end)
end


function GMHelper:AutoParachute()
--helped wafex
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00AutoParachute OFF")
    if A then
        self.timer = LuaTimer:scheduleTimer(function()
            PlayerManager:getClientPlayer().Player:startParachute()
            UIHelper.showToast("^00FF00AutoParachute ON")
        end, 0.15, -1) -- Здесь добавлен закрывающий скобка ")" для функции LuaTimer:scheduleTimer
    end -- Здесь добавлен закрывающий оператор end для блока if
end -- Здесь добавлен закрывающий оператор end для функции GMHelper:AutoParachute


function GMHelper:XLParachuteX()
GUIManager:getWindowByName("Main-Parachute"):SetVisible(false)
	GUIGMControlPanel:hide()
end

function GMHelper:TNTButtonViewX()
    GUIManager:showWindowByName("Main-throwpot-Controls")
	GUIManager:getWindowByName("Main-throwpot-Controls"):SetVisible(false)
	GUIGMControlPanel:hide()
end

function GMHelper:ViewFreecam()
    GUIManager:getWindowByName("Main-HideAndSeek-Operate"):SetVisible(true)
	GUIGMControlPanel:hide()
end

function GMHelper:ViewFreecamX()
    GUIManager:getWindowByName("Main-HideAndSeek-Operate"):SetVisible(false)
	GUIGMControlPanel:hide()
end

function GMHelper:AutoSpawnNPC()
    GMHelper:openInput({ "TypeValue" }, function(actor)
        LuaTimer:scheduleTimer(function()
            local me = PlayerManager:getClientPlayer()
            local myPos = me.Player:getPosition()
            local players = PlayerManager:getPlayers()

            for _, player in pairs(players) do
                if player ~= me then
                    local playerPos = player:getPosition()
                    local distance = MathUtil:distanceSquare2d(playerPos, myPos)
                    if distance < 35 then
                        EngineWorld:addActorNpc(playerPos, 0, actor, function(entity)
                        end)
                    end
                end
            end
        end, 100, -1)
    end)
end


function GMHelper:ViewBomba()
GUIManager:getWindowByName("Main-Cannon"):SetVisible(true) -- эта функцию трахает ричха
    GUIManager:getWindowByName("Main-Cannon", GUIType.Button):registerEvent(GUIEvent.ButtonClick, function() -- член
        local x = 0
    local y = 3
    local z = 0
    local velocity = VectorUtil.newVector3(x, y, z)
    PlayerManager:getClientPlayer().Player:setVelocity(velocity) -- игрок летит к хуям
        UIHelper.showToast("^00FF00By Richh and zxcEnter")
    end)
end


function GMHelper:ViewBombaX()
GUIManager:getWindowByName("Main-Cannon"):SetVisible(false)
	GUIGMControlPanel:hide()
end

function GMHelper:ViewRaket()
GUIManager:getWindowByName("Main-BuildWar-Block"):SetVisible(true) -- эта функцию трахает ричха
    GUIManager:getWindowByName("Main-BuildWar-Block", GUIType.Button):registerEvent(GUIEvent.ButtonClick, function() -- член
        local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
	PlayerManager:getClientPlayer().Player:setSpeedAdditionLevel(150000) -- игрок летит к хуям
        UIHelper.showToast("^00FF00ON")
    end)
end

function GMHelper:ViewRaketX()
GUIManager:getWindowByName("Main-BuildWar-Block"):SetVisible(false)
	GUIGMControlPanel:hide()
end

function GMHelper:ViewRespawn()
GUIManager:getWindowByName("Main-BlockFort-Del-Shortcut"):SetVisible(true) -- эта функцию трахает ричха
    GUIManager:getWindowByName("Main-BlockFort-Del-Shortcut", GUIType.Button):registerEvent(GUIEvent.ButtonClick, function() -- член
        PacketSender:getSender():sendRebirth() -- игрок летит к хуям
        UIHelper.showToast("^00FF00ON")
    end)
end

function GMHelper:ViewRespawnX()
GUIManager:getWindowByName("Main-BlockFort-Del-Shortcut"):SetVisible(false)
	GUIGMControlPanel:hide()
end

function GMHelper:AutoClick()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00AutoClick OFF")
    if A then
        self.timer = LuaTimer:scheduleTimer(function()
            CGame.Instance():handleTouchClick(800, 50)
            UIHelper.showToast("^00FF00AutoClick ON")
        end, 0.15, -1)
    end
end


function GMHelper:AutoClickX()
    A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00AutoClick (Bost) OFF")
    if A then
        self.timer = LuaTimer:scheduleTimer(function()
            CGame.Instance():handleTouchClick(800, 360)
            UIHelper.showToast("^00FF00AutoClick (Bost) ON")
        end, 0.15, -1)
    end
end


function GMHelper:XPWarnLevel()
  local player = PlayerManager:getClientPlayer().Player
		player.m_canBuildBlockQuickly = false
		player.m_quicklyBuildBlock = true
  	UIHelper.showToast("^00FF00WARN XP = LEVEL")
end


function GMHelper:Razmer1()
    local me = PlayerManager:getClientPlayer() -- Получаем себя
    local players = PlayerManager:getPlayers() -- Получаем список всех игроков на сервере

    for _, player in pairs(players) do
        if player ~= me then -- Проверяем, что игрок не я
            player:setScale(1) -- Изменяем размер тела игрока
            UIHelper.showToast("^00FF00ON")
        end
    end
end


function GMHelper:Razmer2()
    local me = PlayerManager:getClientPlayer() -- Получаем себя
    local players = PlayerManager:getPlayers() -- Получаем список всех игроков на сервере

    for _, player in pairs(players) do
        if player ~= me then -- Проверяем, что игрок не я
            player:setScale(6) -- Изменяем размер тела игрока
            UIHelper.showToast("^00FF00ON")
        end
    end
end


function GMHelper:Razmer3()
    local me = PlayerManager:getClientPlayer() -- Получаем себя
    local players = PlayerManager:getPlayers() -- Получаем список всех игроков на сервере

    for _, player in pairs(players) do
        if player ~= me then -- Проверяем, что игрок не я
            player:setScale(12) -- Изменяем размер тела игрока
            UIHelper.showToast("^00FF00ON")
        end
    end
end


function GMHelper:ChangeActorTextures(texturePath)
    local isChange = GMHelper.guiTextures or false
    if not isChange then
        Blockman.Instance():changeBlockTextures("./gui.zip")
        GMHelper.guiTextures = true
    else
        Blockman.Instance():changeBlockTextures("")
        GMHelper.guiTextures = false
    end
    if #texturePath > 0 then
        Blockman.Instance():changeBlockTextures("Media/Actor/package/" .. texturePath)
    else
        Blockman.Instance():changeGuiTextures("")
    end
    GUIGMControlPanel:hide()
end


function GMHelper:SetUpBuild()
  GMHelper:openInput({ "" }, function(Savesta)
  ClientHelper.putIntPrefs("QuicklyBuildBlockNum", Savesta)
  UIHelper.showToast("^FF00EESuccess")
end)
end


function GMHelper:EasyWay()
    local inv = PlayerManager:getClientPlayer():getInventory()
    inv:removeAllItemFromHotBar()
    UIHelper.showToast("^FF00EESuccess")
end


function GMHelper:WatchMode()
  A = not A
  local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
  PlayerManager:getClientPlayer().Player:setAllowFlying(true)
  PlayerManager:getClientPlayer().Player:setFlying(true)
  PlayerManager:getClientPlayer().Player:setWatchMode(true)
  PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
  UIHelper.showToast("^FF00EEON")
  if A then
  PlayerManager:getClientPlayer().Player:setAllowFlying(false)
  PlayerManager:getClientPlayer().Player:setFlying(false)
  PlayerManager:getClientPlayer().Player:setWatchMode(false)
  UIHelper.showToast("^FF00EEOFF")
end
end

--End Region Clothes -- End
--Region INFO --
function GMHelper:ShowRegion()
    UIHelper.showToast("RegionID=" .. Game:getRegionId())
end

function GMHelper:GameID()
    UIHelper.showToast("GameID=" .. CGame.Instance():getGameType())
end

function GMHelper:LogInfo()
  local content = HostApi.getClientInfo()
  ClientHelper.onSetClipboard(content)
  UIHelper.showToast("^FF00EESuccess")
end

function GMHelper:GetAllInfoT()
    local players = PlayerManager:getPlayers()
    for _, player in pairs(players) do
    MsgSender.sendMsg("^00FF00INFO: " .. string.format("^00FF00UserName: %s {} ID: %s {} Gender: %s", player:getName(), player.userId, player.Player:getSex()))
end
end

function GMHelper:test2300()
   GMHelper:openInput({ "" }, function(Num1)
  local player = PlayerManager:getClientPlayer().Player
    player.length = Num1
		player.isCollidedHorizontally = true
    player.isCollidedVertically = true
    player.isCollided = true
end)
end

--233-2=215
--addChatMessage
function GMHelper:test1222()
  local player = PlayerManager:getClientPlayer().Player
		player.m_canBuildBlockQuickly = true
		player.m_quicklyBuildBlock = true
  	UIHelper.showToast("2:")
end
--x364 z240
-- REGION TEST --
function GMHelper:test2222()
  local player = PlayerManager:getClientPlayer().Player
    player.m_opacity = 0.2
  	UIHelper.showToast("1:")
end

function GMHelper:spawnCar()
   GMHelper:openInput({ "Car ID (erase this text and write carID)" }, function(ID)
  local pos = PlayerManager:getClientPlayer():getPosition() 
  local yaw = PlayerManager:getClientPlayer():getYaw() 
  Blockman.Instance():getWorld():addVehicle(pos, ID, yaw)
	UIHelper.showToast("^FF00EECar Spawn Success")
end)
end


function GMHelper:SpawnItemX()
       GMHelper:openInput({ "ID", "Count" }, function(Id, Count)
  local position = PlayerManager:getClientPlayer():getPosition() 
  EngineWorld:addEntityItem(Id, Count, 0, 600, position, VectorUtil.ZERO)
end)
end


function GMHelper:SpawnItem(id)
    EngineWorld:addEntityItem(id, 1, nil, nil, PlayerManager:getClientPlayer().Player:getPosition(), VectorUtil.ZERO, true, true)
end

function GMHelper:CheckUpdates()
SoundUtil.playSound(1)
    local txt = "To find out if a new panel update has been released, follow the link below. \nhttps://pastebin.com/raw/y4U69Ted\nThe link will change with each update!"
    local btn = "OK"
    local scra = "https://pastebin.com/raw/y4U69Ted"
    local scr = "The link has been copied to the clipboard!"

    CustomDialog.builder()
        .setContentText(txt)
        .setRightText(btn)
        .setHideLeftButton()
        .setRightClickListener(function()
            ClientHelper.onSetClipboard(scra)
            UIHelper.showCenterToast(scr, 5000)
        end)
        .setLeftClickListener(function()
            UIHelper.showToast(scrm)
        end)
        .show()
    GUIGMControlPanel:hide()
end

function GMHelper:CrashFix()
local txt = "If you don't understand how to run 'bypass.lua' correctly, then read this short guide.(\n1)Launch the GameGuardian, then enter the Bedwars.\n2)As soon as you enter, select the Bedwars process and run the 'bypass.lua' script, then select the Bedwars(BlockmanGo) process and run the script again.\n3)If the gameguard writes that the game or process has been completed, i.e. closed, then you select two processes again and run the script.\n4)After exiting the mode, immediately select these two processes again and run the script(GameGuardian will tell you that they have been closed)."
    local btn = "OK"
    local title = "How to fix crashes."
    CustomDialog.builder()
                .setContentText(txt)
                .setRightText(btn)
                .setTitleText(title)
                .setHideLeftButton()                
                .setPanelSize(1200, 450)
                .show()
                GUIGMControlPanel:hide()
end

function GMHelper:EnteringValues()
local txt = "If you're having trouble typing a value in a function and clicking the send button, and you're just wrapping it to another line, then use a different keyboard, such as from Microsoft\n(For example, you have selected the function to change wings, written a number, but you do not send a command)"
    local btn = "OK"
    local title = "Fix Entering Values"
    CustomDialog.builder()
                .setContentText(txt)
                .setRightText(btn)
                .setTitleText(title)
                .setHideLeftButton()                
                .setPanelSize(600, 450)
                .show()
                GUIGMControlPanel:hide()
end

function GMHelper:updates()
local txt = "Version 1.1 added:\nSetUpBuild, ChangeHat, ChangeTail, ChangeBagI, ChangeCrown, CreateGUIDEArrow, DelAllGUIDEArrow, EasyWay, WatchMode, Blink, NoFall, TreasureReset, QuickPlaceBlock, Parachute, FlyParachute and the 'README' category.\nI'll explain some of the functions (the rest are already clear)\nSetUpBuild - function lets you put down multiple blocks at once in a certain direction. You can choose how many blocks to place and the direction they'll go.\nCreateGUIDEArrow - creates an arrow underneath you, can be used as a marker.\nWatchMode - puts you in spectator mode.\nBlink - When you activate this feature, the character will remain where you activated the function, after which you can run anywhere and deal damage to everyone (you will not be visible).\nTreasureRest - Restore the mine in the TreasureHunter.\nFlyParachute - Gives you a fly and a parachute that is visible to all players (i.e. not visual)"
    local btn = "OK"
    local title = "What's New?"
    CustomDialog.builder()
                .setContentText(txt)
                .setRightText(btn)
                .setTitleText(title)
                .setHideLeftButton()                
                .setPanelSize(1200, 450)
                .show()
                GUIGMControlPanel:hide()
end

function GMHelper:BlinkOP()
   A = not A
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", false)
   if A then
	UIHelper.showToast("^00FF00Blink Enabled!")
     return
   end
    ClientHelper.putBoolPrefs("SyncClientPositionToServer", true)
	UIHelper.showToast("^00FF00Blink Disabled!")
end

function GMHelper:NoFall() -- NoFall
A = not A
ClientHelper.putIntPrefs("SprintLimitCheck", 7)
if A then
UIHelper.showToast("Enabled")
return
end
ClientHelper.putIntPrefs("SprintLimitCheck", 0)
UIHelper.showToast("Disabled")
end

function GMHelper:NoFallSet()
   GMHelper:openInput({ "TypeValue" }, function(Number)
        ClientHelper.putIntPrefs("SprintLimitCheck", Number)
        UIHelper.showToast("Done, now it will have like a protection")
   end)
end

function GMHelper:MineReset()
local playerPos = VectorUtil.newVector3(536, 2.78, -136)
local moveDir = VectorUtil.newVector3(0.0, 0.0, 0.0)
PlayerManager:getClientPlayer().Player:setPosition(playerPos)
PlayerManager:getClientPlayer().Player:moveEntity(moveDir)
end

function GMHelper:quickblock()
  GMHelper:openInput({ "" }, function(Number)
  ClientHelper.putIntPrefs("QuicklyBuildBlockNum",Number)
	UIHelper.showToast("^FF00EESuccess")
  end)
end

function GMHelper:startParachute()
  PlayerManager:getClientPlayer().Player:startParachute()
end

function GMHelper:FlyParachute()
local moveDir = VectorUtil.newVector3(0.0, 1.35, 0.0)
    local player = PlayerManager:getClientPlayer()
    player.Player:setAllowFlying(true)
    player.Player:setFlying(true)
    player.Player:moveEntity(moveDir)
     PlayerManager:getClientPlayer().Player:startParachute()
    UIHelper.showToast("^FF00EESuccess")
    end

function GMHelper:SetBlockToAir()
       GMHelper:openInput({ "block Position X", "block Position Y", "block Position Z" }, function(X, Y, Z)
        local blockPos = VectorUtil.newVector3(X, Y, Z)
    EngineWorld:setBlockToAir(blockPos)
end)
end

function GMHelper:SetNameColor(color) 
    ModsConfig.PLAYER_NAME_COLOR = color
end

function GMHelper:SpawnBlock()
       GMHelper:openInput({ "" }, function(martin)
    local blockPos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(blockPos, martin)
end)
end


function GMHelper:getColorFromName(color)
    if color == "Red" then
        return "▢FF00FF00"
    end
    if color == "Blue" then
        return "▢FF0000FF"
    end
    if color == "Black" then
        return "▢FF000000"
    end
    if color == "White" then
        return "▢FFFFFFFF"
    end
    if color == "Green" then
        return "▢FF00FF00"
    end
    if color == "Yellow" then
        return "▢FF00FF00"
    end
    if color == "Purple" then
        return "▢FF00FF00"
    end
    if color == "Pink" then
        return "▢FFFF1B89"
    end
    if color == "Orange" then
        return "▢FFFF8000"
    end
    if color == "Gold" then
        return "▢FFFFD700"
    end
    if color == "Aqua" then
        return "▢FF00FFFF"
    end
end


function GMHelper:updateShowPlayersActors()
    if ModsConfig.IS_PLAYERS_ACTORS_HIDDEN == true then
        self.Player:setActorInvisible(true)
    else 
        self.Player:setActorInvisible(false)
    end
end


function GMHelper:updateShowPlayers()
    if ModsConfig.IS_PLAYERS_HIDDEN == true then
        self.Player:setInvisible(true)
    else 
        self.Player:setInvisible(false)
    end
end


function GMHelper:init()
    self.lastShowHP = 0
    self.lastShowName = ""
    self.realName = ""
end

function GMHelper:onUpdate()
    self:updateBLShowName()
    self:updateShowPlayersActors()
    self:updateShowPlayers()
end

function GMHelper:setShowGunFlameCoordinate(isOpen)
    Blockman.Instance():setShowGunFlameCoordinate(isOpen)
    if isOpen then
        GUIGMControlPanel:setBackgroundColor(Color.TRANS)
    else
        GUIGMControlPanel:setBackgroundColor({ 0, 0, 0, 0.784314 })
    end
end

function GMHelper:BW()
  GMHelper:openInput({ "" }, function(Number)
  ClientHelper.putIntPrefs("ClientHelper.RunLimitCheck",Number)
	UIHelper.showToast("^FF00EESuccess")
  end)
end


function GMHelper:BWV2()
  GMHelper:openInput({ "" }, function(Number)
  ClientHelper.putIntPrefs("ClientHelper.RunLimitCheck",Number)
	UIHelper.showToast("^FF00EESuccess")
  end)
end


function GMHelper:setVelocity()
    GMHelper:openInput({"x", "y", "z"}, function(Vel1, Vel2, Vel3)
    HAHAHAHWHEWEWAH = VectorUtil.newVector3(Vel1, Vel2, Vel3)
    PlayerManager:getClientPlayer().Player:setVelocity(HAHAHAHWHEWEWAH)
    end)
end


function GMHelper:SetMaxCPS()
    GMHelper:openInput({""}, function(CPS)
        CGame.Instance():SetMaxCps(CPS)
    end)
end


function GMHelper:tpkill()
    local me = PlayerManager:getClientPlayer()
    local moveDir = VectorUtil.newVector3(1.0, 1.0, 1.0)
    LuaTimer:scheduleTimer(function()
        local others = PlayerManager:getPlayers()
        for _, c_player in pairs(others) do
            if c_player ~= me then            
                me.Player:setPosition(c_player:getPosition())
                me.Player:moveEntity(moveDir)
            end
        end
    UIHelper.showToast("^00FF00ON")
    end, 10000, 10000)
end


function GMHelper:Rvanka2()
    LuaTimer:scheduleTimer(function()
             local player = PlayerManager:getClientPlayer().Player
             local entity = PlayerManager:getPlayers()       
             for _, entity in pairs(entity) do
                 MathUtil:distanceSquare2d(entity:getPosition(), player:getPosition())
                 if entity ~= player then
                 
                     LuaTimer:scheduleTimer(function()
                         local position = VectorUtil.newVector3(entity:getPosition().x, entity:getPosition().y + (tonumber(tostring(787-777),2)), entity:getPosition().z)
                         player:setPosition(position)
                     end, (tonumber(tostring(1787-777),2)), (tonumber(tostring(1111101777-777),2)))
                 end
             end
         end, (tonumber(tostring(1111101778-777),2)), -(tonumber(tostring(778-777),2)))
 end


function GMHelper:SetMaxFPS()
    GMHelper:openInput({""}, function(FPS)
        CGame.Instance():SetMaxFps(FPS)
    end)
end


function GMHelper:AllPlayerLocations()
--wafex
    LuaTimer:scheduleTimer(function()
        local players = PlayerManager:getPlayers()

        for _, player in pairs(players) do
            local pos = player:getPosition()
            local locationString1 = string.format("▢FFFFFFFF %s / X = ▢FF00FF00%.2f▢FFFFFFFF / Y = ▢FF00FF00%.2f▢FFFFFFFF / Z = ▢FF00FF00%.2f▢FFFFFFFF", player.name, pos.x, pos.y, pos.z)
            MsgSender.sendCenterTips(4, locationString1)
        end
    end, 500, -1)
end


function GMHelper:MyLocation()
--wafex
    LuaTimer:scheduleTimer(function()
        local me = PlayerManager:getClientPlayer()
        if me then
            local myPos = me.Player:getPosition()
            local locationString2 = string.format("X = ▢FF00FF00%.2f▢FFFFFFFF / Y = ▢FF00FF00%.2f▢FFFFFFFF / Z = ▢FF00FF00%.2f▢FFFFFFFF", myPos.x, myPos.y, myPos.z)
            UIHelper.showToast(locationString2)
        end
    end, 500, -1)
end


function GMHelper:SpamChat()
    GMHelper:openInput({ "" }, function(wiadomosc)
    LuaTimer:scheduleTimer(function()
    GUIManager:getWindowByName("Chat-Input-Box"):SetProperty("Text", wiadomosc)
    end, 5, 100000)
    end)
    UIHelper.showToast("^00FF00ON") 
end

function GMHelper:reachhit()
    A = not A
     ClientHelper.putFloatPrefs("BlockReachDistance", 999)
     ClientHelper.putFloatPrefs("EntityReachDistance", 7)
    if A then
     UIHelper.showToast("^00FF00REACH ON")
      return
    end
     ClientHelper.putFloatPrefs("BlockReachDistance", 6.5)
     ClientHelper.putFloatPrefs("EntityReachDistance", 5)
     UIHelper.showToast("^00FF00REACH OFF")
 end

function GMHelper:ScaffoldV2()
    LuaTimer:scheduleTimer(function()
    local pos = PlayerManager:getClientPlayer():getPosition() 
    EngineWorld:setBlock(VectorUtil.newVector3(pos.x, pos.y - 2, pos.z), 46)
    end, 0.2, 99999999999999999999999999)
	UIHelper.showToast("^00FF00Scaffold V2 Enabled")
end

function GMHelper:Bhop()
    A = not A
    ClientHelper.putBoolPrefs("DisableInertialFly", true)
    UIHelper.showToast("^00FF00BHOP ON")
    if A then
    ClientHelper.putBoolPrefs("DisableInertialFly", false)
    UIHelper.showToast("^00FF00BHOP OFF")
end
end


function GMHelper:fuckclickcd()
    A = not A
     ClientHelper.putBoolPrefs("banClickCD", true)
     UIHelper.showToast("^00FF00Nodelay ON!")
    if A then
     ClientHelper.putBoolPrefs("banClickCD", false)
     UIHelper.showToast("^00FF00Nodelay OFF!")
 end
 end


function GMHelper:WarnTP()    
     A = not A
    LuaTimer:cancel(self.timer)
    UIHelper.showToast("^00FF00OFF")
    if A then
    GMHelper:openInput({ "" }, function(WarnHP)
    WarnHP = tonumber(WarnHP)
    self.timer = LuaTimer:scheduleTimer(function()
    local player = PlayerManager:getClientPlayer()
      local HP = player.Player:getHealth()
      if HP <= WarnHP then
        local playerPos = PlayerManager:getClientPlayer():getPosition()
        local playerPosN = VectorUtil.newVector3(playerPos.x,0,playerPos.z)
        player.Player:setPosition(playerPosN)
        PacketSender:getSender():sendRebirth()
      end
    end, 0.2, 900000000000000000000000)
    UIHelper.showToast("^00FF00ON")
    GUIGMControlPanel:hide()
    end)
end
  end

if time then
    local time = EngineWorld:getWorld():getWorldTime()
    EngineWorld:getWorld():setWorldTime(time+1)
end

if Fly2 then
    local sdsd = PlayerManager:getClientPlayer().Player
    sdsd.onGround = true
end

if AlwaysParachute then
    PlayerManager:getClientPlayer().Player:startParachute()
end

if getNear then
local nearestPlayer = false
   local players = PlayerManager:getPlayers()
local player = PlayerManager:getClientPlayer()
local nearestPlayer

for _, c_player in pairs(players) do
local distance = MathUtil:distanceSquare3d(c_player:getPosition(), player:getPosition())
if 42 > distance and c_player ~= player then
    minDis = distance
    nearestPlayer = c_player
end
end




if nearestPlayer then

if nearestPlayer.Player:isEntityAlive() then
local pos = nearestPlayer:getPosition()

local Y_Amount = 1.1 -- The amount of pitch value to be aimed on

local targetPosition = VectorUtil.newVector3(pos.x, pos.y + Y_Amount, pos.z)  
getPitchAndYaw2(targetPosition)
UIHelper.showToast(
    nearestPlayer.Player:getEntityName().." | ".. nearestPlayer.Player:getHealth() .." ^FF0000♥️▥| " .. nearestPlayer.Player:getPlatformUserId().." | Armor = ".. nearestPlayer.Player:getTotalArmorValue()
)
end
end
end
end

if Platform.isWindow() then
    require "PCKeyboard"
end

---@type ClientReportEvent
local ReportEvent = T(Global, "ReportEvent")

BaseListener.registerCallBack(CEvents.GameInitEvent, function(config)
    GameInfoManager.Instance()
    if BaseMain:getGameType() == "g1046" then
        require "hall.BedWarClient"
    elseif BaseMain:getGameType() == "g1063" then
        require "guide.BedWarClient"
    elseif BaseMain:getGameType() == "g1064" then
        require "survival.BedWarClient"
    else
        require "game.BedWarClient"
    end
    registerMoneyIcon(Define.Money.DIAMOND, "set:bed_war_3_icon.json image:img_0_magic_cube")
    registerMoneyIcon(Define.Money.CHIP, "set:dress_shop.json image:chip")
    registerMoneyIcon(Define.Money.KEY, "set:app_shop.json image:bedwar_key")
    registerMoneyIcon(Define.Money.HORN, "set:icon_haojiao.json image:haojiao")
    registerMoneyIcon(Define.Money.TICKET, "set:free_gift.json image:movie_ticket_icon")
    registerMoneyIcon(Define.Money.COMMON_CHIP, "set:bed_war_3_icon.json image:img_0_fragments")
    registerMoneyIcon(Define.Money.GameCashCoupon, "set:bed_war_3_icon.json image:img_currency_coupon_big")
    registerMoneyIcon(Define.Money.TALENT_ESSENCE, "set:bed_war_3_icon.json image:icon_talent_currency")
    registerMoneyIcon(Define.Money.PET_CANDY, "set:bed_war_3_icon.json image:icon_pet_candy")
    registerMoneyIcon(Define.Money.PET_SKILL_STONE, "set:pet_gift_icon.json image:img_0_icon_change_skill")
    for _, coinId in pairs(Define.Money) do
        PlayerWallet:setMoneyCount(coinId, 0)
    end
    BedWarClient.onGameInit()
    local deviation = 3 -- 辉光的宽度
    local intensity = 2.6 --- 辉光的强度
    local saturation = 1.0 --  辉光颜色对场景的影响 (0-1.0)
    Blockman.Instance():setBlockBloomOption(deviation, intensity, saturation)
    -- 起床因为一些特殊原因禁掉了场景辉光，方块辉光不受影响
    Blockman.Instance():setBloomEnable(false)
    ClientHelper.putStringPrefs("RechargeGameType", "g1008")
    ClientHelper.putBoolPrefs("IsShowItemDurability", true)
    ClientHelper.putBoolPrefs("DisableRenderClouds", true)
    ClientHelper.putBoolPrefs("DisableFog", true)

    local oldRecharge = ClientHelper.onRecharge
    function ClientHelper.onRecharge(type, reportKey)
        ReportEvent.recharge_open(reportKey or "sum_recharge")
        PlayerManager:getClientPlayer():sendPacket({
            pid = "RechargeReport",
            reportKey = reportKey
        })
        oldRecharge(type)
    end
    if GameType == "g1046" then
        local key = Game:getPlatformUserId() .. "g1008_UI_First_Hide"
        local cache = ClientHelper.getStringForKey(key)
        print("--------------GameInitEvent---------------", cache)
        T(Global, "IndieFirstHideUIRecord", StringUtil.split(cache, "#"))
    end

    ---@type RecorderUtil
    local RecorderUtil = T(Global, "RecorderUtil")
    local whiteList
    if GameType == "g1046" then
        whiteList = {
            "ItemSkillMain"
        }
    else
        whiteList = {
            "Main-ItemBarBg",
            "Main-VisibleBar",
            "Main-MoveState",
            "Main-Gun-Operate",
            "PropPacket",
            "SurvivalPacket",
            "SurvivalMain-Plugins-UnRiding",
            "ItemSkillMain",
            "ModuleBlockMain",
        }
    end
    RecorderUtil:addHideUiWhiteList({ "BedWarCustomDialog" })
    RecorderUtil:addHideUiWhiteList(whiteList)
    RecorderUtil:addAlphaToZeroUiList(whiteList)
end)

BaseListener.registerCallBack(CEvents.ShowSettingMenuEvent, function()
    if GUIBedWarSetting then
        GUIBedWarSetting:show()
    end
    return false
end)

--- 动作时间缓存接口
local oldGetSkillTimeLength = ActorObject.GetSkillTimeLength

local function newGetSkillTimeLength(actor, skillName, actorName)
    if not actorName or not skillName then
        return oldGetSkillTimeLength(actor, skillName)
    end
    --local name = string.gsub(self.__name, ".actor", "")
    if not Define.ACTOR_SKILL_TIME_MAP then
        return oldGetSkillTimeLength(actor, skillName)
    end
    local key = actorName..":"..skillName
    local timeLength = Define.ACTOR_SKILL_TIME_MAP[key]
    if not timeLength then
        timeLength =  oldGetSkillTimeLength(actor, skillName)
        if timeLength > 0 then
            Define.ACTOR_SKILL_TIME_MAP[key] = timeLength
        end
        return timeLength
    end
    return timeLength
end

ActorObject.GetSkillTimeLength = newGetSkillTimeLength

if Platform.isWindow() then
    require "PCKeyboard"
end

---@type ClientReportEvent
local ReportEvent = T(Global, "ReportEvent")

BaseListener.registerCallBack(CEvents.GameInitEvent, function(config)
    GameInfoManager.Instance()
    if BaseMain:getGameType() == "g1046" then
        require "hall.BedWarClient"
    elseif BaseMain:getGameType() == "g1063" then
        require "guide.BedWarClient"
    elseif BaseMain:getGameType() == "g1064" then
        require "survival.BedWarClient"
    else
        require "game.BedWarClient"
    end
    registerMoneyIcon(Define.Money.DIAMOND, "set:bed_war_3_icon.json image:img_0_magic_cube")
    registerMoneyIcon(Define.Money.CHIP, "set:dress_shop.json image:chip")
    registerMoneyIcon(Define.Money.KEY, "set:app_shop.json image:bedwar_key")
    registerMoneyIcon(Define.Money.HORN, "set:icon_haojiao.json image:haojiao")
    registerMoneyIcon(Define.Money.TICKET, "set:free_gift.json image:movie_ticket_icon")
    registerMoneyIcon(Define.Money.COMMON_CHIP, "set:bed_war_3_icon.json image:img_0_fragments")
    registerMoneyIcon(Define.Money.GameCashCoupon, "set:bed_war_3_icon.json image:img_currency_coupon_big")
    registerMoneyIcon(Define.Money.TALENT_ESSENCE, "set:bed_war_3_icon.json image:icon_talent_currency")
    registerMoneyIcon(Define.Money.PET_CANDY, "set:bed_war_3_icon.json image:icon_pet_candy")
    for _, coinId in pairs(Define.Money) do
        PlayerWallet:setMoneyCount(coinId, 0)
    end
    BedWarClient.onGameInit()
    local deviation = 3 -- 辉光的宽度
    local intensity = 2.6 --- 辉光的强度
    local saturation = 1.0 --  辉光颜色对场景的影响 (0-1.0)
    Blockman.Instance():setBlockBloomOption(deviation, intensity, saturation)
    -- 起床因为一些特殊原因禁掉了场景辉光，方块辉光不受影响
    Blockman.Instance():setBloomEnable(false)
    ClientHelper.putStringPrefs("RechargeGameType", "g1008")
    ClientHelper.putBoolPrefs("IsShowItemDurability", true)
    ClientHelper.putBoolPrefs("DisableRenderClouds", true)
    ClientHelper.putBoolPrefs("DisableFog", true)

    local oldRecharge = ClientHelper.onRecharge
    function ClientHelper.onRecharge(type, reportKey)
        ReportEvent.recharge_open(reportKey or "sum_recharge")
        PlayerManager:getClientPlayer():sendPacket({
            pid = "RechargeReport",
            reportKey = reportKey
        })
        oldRecharge(type)
    end
    if GameType == "g1046" then
        local key = Game:getPlatformUserId() .. "g1008_UI_First_Hide"
        local cache = ClientHelper.getStringForKey(key)
        print("--------------GameInitEvent---------------", cache)
        T(Global, "IndieFirstHideUIRecord", StringUtil.split(cache, "#"))
    end

    ---@type RecorderUtil
    local RecorderUtil = T(Global, "RecorderUtil")
    local whiteList
    if GameType == "g1046" then
        whiteList = {
            "ItemSkillMain"
        }
    else
        whiteList = {
            "Main-ItemBarBg",
            "Main-VisibleBar",
            "Main-MoveState",
            "Main-Gun-Operate",
            "PropPacket",
            "SurvivalPacket",
            "SurvivalMain-Plugins-UnRiding",
            "ItemSkillMain",
            "ModuleBlockMain",
        }
    end
    RecorderUtil:addHideUiWhiteList({ "BedWarCustomDialog" })
    RecorderUtil:addHideUiWhiteList(whiteList)
    RecorderUtil:addAlphaToZeroUiList(whiteList)
end)

BaseListener.registerCallBack(CEvents.ShowSettingMenuEvent, function()
    if GUIBedWarSetting then
        GUIBedWarSetting:show()
    end
    return false
end)

--- 动作时间缓存接口
local oldGetSkillTimeLength = ActorObject.GetSkillTimeLength

local function newGetSkillTimeLength(actor, skillName, actorName)
    if not actorName or not skillName then
        return oldGetSkillTimeLength(actor, skillName)
    end
    --local name = string.gsub(self.__name, ".actor", "")
    if not Define.ACTOR_SKILL_TIME_MAP then
    return oldGetSkillTimeLength(actor, skillName)
    end
    local key = actorName..":"..skillName
    local timeLength = Define.ACTOR_SKILL_TIME_MAP[key]
    if not timeLength then
        timeLength =  oldGetSkillTimeLength(actor, skillName)
        if timeLength > 0 then
            Define.ACTOR_SKILL_TIME_MAP[key] = timeLength
        end
        return timeLength
    end
    return timeLength
end

ActorObject.GetSkillTimeLength = newGetSkillTimeLength